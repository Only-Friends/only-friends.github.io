(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"00a0":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{id:"ModalRestore","modal-class":"modal-restore","hide-footer":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("template",{slot:"modal-header"},[s("h4",{staticClass:"modal-title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.forgot_password_title"))+" ")])]),s("p",[e._v(e._s(e.$t("message.forgot_password_text")))]),s("form",{on:{submit:function(t){return t.preventDefault(),e.doRestore(t)}}},[s("div",{staticClass:"g-input__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:e.$t("message.email_placeholder")},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("div",{staticClass:"g-input__help m-danger error_place"},[e._v(" "+e._s(e.validEmailMessage)+" ")])]),s("div",{staticClass:"captcha_wrapper",attrs:{id:"captcha_restore_wrapper"}}),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.disabled}},[e._v(" "+e._s(e.$t("message.send_button"))+" ")])])])],2)},r=[],a=(s("96cf"),s("3b8d")),n=s("9b02"),o=s.n(n),c=s("2612"),l=s("fece"),u=s("09e4"),d={name:"ModalRestore",mixins:[l["a"]],props:{currentEmail:{type:String,default:""}},data:function(){return{action:"restore",captchaWrapperId:"captcha_restore_wrapper",show:!1,email:"",requestInProgress:!1}},computed:{disabled:function(){return!this.fields.email||this.fields.email.invalid||this.formDisabled||this.requestInProgress},validEmailMessage:function(){return this.errors.first("email")}},watch:{show:function(e){e&&(this.needToLoadRecaptcha=!0),this.V2rendered=!1,this.formDisabledV2=!1}},mounted:function(){this.currentEmail&&(this.email=this.currentEmail)},methods:{doRestore:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabled){e.next=2;break}return e.abrupt("return");case 2:return t={email:this.email,"v3-recaptcha-response":this["v3-recaptcha-response"],"g-recaptcha-response":this["g-recaptcha-response"]},e.prev=3,this.requestInProgress=!0,this.$window.showPreloader(),e.next=8,Object(c["o"])(t);case 8:s=e.sent,this.requestInProgress=!1,this.$window.hidePreloader(),s&&s.success&&(this.show=!1,alert(this.$i18n.t("message.restore_check_email_message"))),e.next=19;break;case 14:e.prev=14,e.t0=e["catch"](3),this.requestInProgress=!1,this.$window.hidePreloader(),Object(u["a"])(e.t0,this.errorHandler);case 19:case"end":return e.stop()}}),e,this,[[3,14]])})));function t(){return e.apply(this,arguments)}return t}(),errorHandler:function(e){if(o()(e,"data.error")){if(this.maybeInitV3Captcha(),102===e.data.error.code)return void this.initV2Captcha();this.V2rendered&&this.initV2Captcha(),Object(u["b"])(e)}}}},p=d,h=s("2877"),m=Object(h["a"])(p,i,r,!1,null,null,null);t["a"]=m.exports},"07a2":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("settings-otp"),!1===e.allSettings.disableSubscribesOffers||e.authUser.isPerformer?s("form",[s("div",{staticClass:"g-section__header m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.subheader_profile_privacy"))+" ")])]),s("div",{staticClass:"g-input__fieldset"},[s("checkbox-toggle",{attrs:{name:"is_visible_online",disabled:e.disabledIsVisibleOnline,label:e.$t("message.settings_profile_visibility")},on:{input:function(t){return e.sendCurrentUserField(e.isVisibleOnline,"isVisibleOnline","disabledIsVisibleOnline")}},model:{value:e.isVisibleOnline,callback:function(t){e.isVisibleOnline=t},expression:"isVisibleOnline"}}),e.authUser.isPerformer?[e.authUser.isAdultContent?e._e():s("checkbox-toggle",{attrs:{name:"is_private",disabled:e.disabledIsPrivate,label:e.$t("message.private_account_checkbox_label_new"),text:e.$t("message.subtext_profile_privacy")},on:{input:function(t){return e.sendCurrentUserField(e.isPrivate,"isPrivate","disabledIsPrivate")}},model:{value:e.isPrivate,callback:function(t){e.isPrivate=t},expression:"isPrivate"}}),s("checkbox-toggle",{attrs:{name:"is_want_comments",disabled:e.disabledIsWantComments,label:e.$t("message.comments_checkbox_label_new")},on:{input:function(t){return e.sendCurrentUserField(e.isWantComments,"isWantComments","disabledIsWantComments")}},model:{value:e.isWantComments,callback:function(t){e.isWantComments=t},expression:"isWantComments"}}),s("checkbox-toggle",{attrs:{name:"show_subscribers_count",disabled:e.disabledShowSubscribersCount,label:e.$t("message.show_fans_count_checkbox_label_new")},on:{input:function(t){return e.sendCurrentUserField(e.showSubscribersCount,"showSubscribersCount","disabledShowSubscribersCount")}},model:{value:e.showSubscribersCount,callback:function(t){e.showSubscribersCount=t},expression:"showSubscribersCount"}}),s("checkbox-toggle",{attrs:{name:"show_media_count",disabled:e.disabledShowMediaCount,label:e.$t("message.show_media_count_checkbox_label")},on:{input:function(t){return e.sendCurrentUserField(e.showMediaCount,"showMediaCount","disabledShowMediaCount")}},model:{value:e.showMediaCount,callback:function(t){e.showMediaCount=t},expression:"showMediaCount"}}),s("checkbox-toggle",{attrs:{name:"show_posts_tips",disabled:e.disabledShowPostsTips,label:e.$t("message.show_posts_tips_summ_checkbox_label")},on:{input:function(t){return e.sendCurrentUserField(e.showPostsTips,"showPostsTips","disabledShowPostsTips")}},model:{value:e.showPostsTips,callback:function(t){e.showPostsTips=t},expression:"showPostsTips"}}),void 0!==e.allSettings.showFriendsToSubscribers?s("checkbox-toggle",{attrs:{name:"show_friends_list",disabled:e.disabledShowFriendsToSubscribers,label:e.$t("message.public_friends_list_settings_label")},on:{input:function(t){return e.sendCurrentUserField(e.showFriendsToSubscribers,"showFriendsToSubscribers","disabledShowFriendsToSubscribers")}},model:{value:e.showFriendsToSubscribers,callback:function(t){e.showFriendsToSubscribers=t},expression:"showFriendsToSubscribers"}}):e._e(),s("checkbox-toggle",{attrs:{name:"auto_follow_back",disabled:e.disabledIsAutoFollowBack,label:e.$t("message.auto_follow_back")},on:{input:function(t){return e.sendCurrentUserField(e.isAutoFollowBack,"isAutoFollowBack","disabledIsAutoFollowBack")}},model:{value:e.isAutoFollowBack,callback:function(t){e.isAutoFollowBack=t},expression:"isAutoFollowBack"}})]:e._e(),!1===e.allSettings.disableSubscribesOffers?s("checkbox-toggle",{attrs:{name:"show_subscribes_offers",disabled:e.disabledShowSubscribesOffers,label:e.$t("message.show_subscribes_offers_checkbox_label_new")},on:{input:function(t){return e.sendCurrentUserField(e.showSubscribesOffers,"showSubscribesOffers","disabledShowSubscribesOffers")}},model:{value:e.showSubscribesOffers,callback:function(t){e.showSubscribesOffers=t},expression:"showSubscribesOffers"}}):e._e(),e.isCoStreamingAllowed?[s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.allow_costreaming_request_setting_title"))+" ")])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.coStreamingRequestFrom,expression:"coStreamingRequestFrom"}],staticClass:"b-input-radio",attrs:{id:"allowNobody",type:"radio",name:"allow_costreaming",value:"nobody",disabled:e.disabledCoStreamingRequestFrom},domProps:{checked:e._q(e.coStreamingRequestFrom,"nobody")},on:{input:function(t){return e.sendCurrentUserField("nobody","coStreamingRequestFrom","disabledCoStreamingRequestFrom")},change:function(t){e.coStreamingRequestFrom="nobody"}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"allowNobody"}},[e._v(" "+e._s(e.$t("message.allow_costreaming_request_setting_nobody"))+" ")]),e._m(0)])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.coStreamingRequestFrom,expression:"coStreamingRequestFrom"}],staticClass:"b-input-radio",attrs:{id:"allowFriends",type:"radio",name:"allow_costreaming",value:"friends",disabled:e.disabledCoStreamingRequestFrom},domProps:{checked:e._q(e.coStreamingRequestFrom,"friends")},on:{input:function(t){return e.sendCurrentUserField("friends","coStreamingRequestFrom","disabledCoStreamingRequestFrom")},change:function(t){e.coStreamingRequestFrom="friends"}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"allowFriends"}},[e._v(" "+e._s(e.$t("message.allow_costreaming_request_setting_friends"))+" ")]),e._m(1)])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.coStreamingRequestFrom,expression:"coStreamingRequestFrom"}],staticClass:"b-input-radio",attrs:{id:"allowSubscribers",type:"radio",name:"allow_costreaming",value:"subscribers",disabled:e.disabledCoStreamingRequestFrom},domProps:{checked:e._q(e.coStreamingRequestFrom,"subscribers")},on:{input:function(t){return e.sendCurrentUserField("subscribers","coStreamingRequestFrom","disabledCoStreamingRequestFrom")},change:function(t){e.coStreamingRequestFrom="subscribers"}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"allowSubscribers"}},[e._v(" "+e._s(e.$t("message.allow_costreaming_request_setting_subcribers"))+" ")]),e._m(2)])])]:e._e()],2),e.authUser.isPerformer?[s("div",{staticClass:"g-section__header m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.geo_blocking_title_new"))+" ")])]),s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.geo_blocking_country_label")))]),s("div",{staticClass:"g-select__selected__list"},e._l(e.blockedCountriesComputed,(function(t){return s("span",{key:t.code,staticClass:"g-select__selected__item"},[e._v(" "+e._s(t.name)+" "),s("button",{staticClass:"g-select__selected__item__del-btn",attrs:{type:"button"},on:{click:function(s){return e.removeCountry(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])})),0),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.countriesListWithoutCurrent,searchable:!0,placeholder:e.$t("message.dropdown_country_block_select"),"max-height":290},model:{value:e.selectedCountry,callback:function(t){e.selectedCountry=t},expression:"selectedCountry"}})],1)]),e.blockedCountriesWithStates.length?s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.geo_blocking_state_label")))]),e._l(e.blockedCountriesWithStates,(function(t){return s("div",{key:t.id,staticClass:"b-blocked-state"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(t.name))]),s("div",{staticClass:"g-select__selected__list"},e._l(e.blockedCountriesStates[t.id],(function(i,r){return s("span",{key:i.id,staticClass:"g-select__selected__item"},[e._v(" "+e._s(i.name)+" "),s("button",{staticClass:"g-select__selected__item__del-btn",attrs:{type:"button"},on:{click:function(s){return e.removeStateFromSelected(t.id,r)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])})),0),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.countryStates[t.id],searchable:!0,placeholder:e.$t("message.dropdown_country_block_select"),"max-height":290},model:{value:e.selectedState,callback:function(t){e.selectedState=t},expression:"selectedState"}})],1)])}))],2):e._e(),s("InputOF",{attrs:{id:"input-blocked-ips",type:"textarea",label:e.$t("message.geo_blocking_ip_label_new"),maxlength:1e3,autogrow:!0,autocomplete:!1,"help-text":e.$t("message.geo_blocking_ip_help")},model:{value:e.blockedIps,callback:function(t){e.blockedIps=t},expression:"blockedIps"}}),e.isImageWatermarkNeeded?[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_watermarks_title"))+" ")])]),s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.settings_watermarks_subtitle")))])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.hasWatermarkPhoto,expression:"hasWatermarkPhoto"}],staticClass:"b-input-radio",attrs:{id:"hasWatermarkPhoto",type:"checkbox",name:"hasWatermarkPhoto"},domProps:{checked:Array.isArray(e.hasWatermarkPhoto)?e._i(e.hasWatermarkPhoto,null)>-1:e.hasWatermarkPhoto},on:{change:function(t){var s=e.hasWatermarkPhoto,i=t.target,r=!!i.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);i.checked?n<0&&(e.hasWatermarkPhoto=s.concat([a])):n>-1&&(e.hasWatermarkPhoto=s.slice(0,n).concat(s.slice(n+1)))}else e.hasWatermarkPhoto=r}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"hasWatermarkPhoto"}},[e._v(" "+e._s(e.$t("message.settings_my_photos_title"))+" ")]),s("span",{staticClass:"b-input-radio__label"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"}),s("span",{staticClass:"b-input-ripple"})])])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.hasWatermarkVideo,expression:"hasWatermarkVideo"}],staticClass:"b-input-radio",attrs:{id:"hasWatermarkVideo",type:"checkbox",name:"hasWatermarkVideo"},domProps:{checked:Array.isArray(e.hasWatermarkVideo)?e._i(e.hasWatermarkVideo,null)>-1:e.hasWatermarkVideo},on:{change:function(t){var s=e.hasWatermarkVideo,i=t.target,r=!!i.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);i.checked?n<0&&(e.hasWatermarkVideo=s.concat([a])):n>-1&&(e.hasWatermarkVideo=s.slice(0,n).concat(s.slice(n+1)))}else e.hasWatermarkVideo=r}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"hasWatermarkVideo"}},[e._v(" "+e._s(e.$t("message.settings_my_videos_title"))+" ")]),s("span",{staticClass:"b-input-radio__label"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"}),s("span",{staticClass:"b-input-ripple"})])])]),e.showWatermarkTextInput?s("InputOF",{attrs:{id:"input-watermark-text",type:"text",label:e.$t("message.settings_watermark_text"),placeholder:e.$t("message.settings_watermark_text"),maxlength:32},model:{value:e.watermarkText,callback:function(t){e.watermarkText=t},expression:"watermarkText"}}):e._e()]:e._e()],2),s("ButtonOF",{attrs:{text:e.$t("message.save_changes_button"),loading:e.loading},on:{click:e.save}})]:e._e()],2):e._e()],1)},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"b-input-radio__label"},[s("span",{staticClass:"b-input-ripple"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"b-input-radio__label"},[s("span",{staticClass:"b-input-ripple"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"b-input-radio__label"},[s("span",{staticClass:"b-input-ripple"})])}],a=(s("8e6e"),s("96cf"),s("3b8d")),n=(s("7f7f"),s("55dd"),s("75fc")),o=(s("28a5"),s("456d"),s("ac6a"),s("7514"),s("bd86")),c=s("d634"),l=s("1569"),u=s("d1e5"),d=s("0fc7"),p=s("13ca"),h=s("d8a0"),m=s("29d7");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var v={name:"SettingsSecurity",components:{CheckboxToggle:l["a"],CustomSelect:u["a"],ButtonOF:d["a"],InputOF:p["a"],SettingsOtp:h["a"]},mixins:[m["a"]],data:function(){return{loading:!1,isVisibleOnline:!1,isPrivate:!1,isWantComments:!1,showSubscribersCount:!1,showMediaCount:!1,showSubscribesOffers:!1,showPostsTips:!1,showFriendsToSubscribers:!1,isAutoFollowBack:!1,coStreamingRequestFrom:!1,selectedCountry:[],currentCountryWithStates:null,selectedStates:[],blockedCountries:[],blockedStates:[],blockedIps:"",hasWatermarkPhoto:!1,hasWatermarkVideo:!1,watermarkText:"",blockedCountriesStates:{},countryStates:{},selectedState:"",disabledIsVisibleOnline:!1,disabledIsPrivate:!1,disabledIsWantComments:!1,disabledShowSubscribersCount:!1,disabledShowMediaCount:!1,disabledShowPostsTips:!1,disabledShowFriendsToSubscribers:!1,disabledShowSubscribesOffers:!1,disabledCanAcceptMessageOnlyFromFriends:!1,disabledIsAutoFollowBack:!1,disabledCoStreamingRequestFrom:!1,isCoStreamingAllowed:!1}},computed:g(g(g(g({},Object(c["Ob"])(["user","hasUser","userId"])),Object(c["b"])(["isAuth","authUser","authUserId"])),Object(c["eb"])(["countriesList","statesByCounty","isImageWatermarkNeeded","allSettings"])),{},{blockedCountriesComputed:function(){var e=this;return this.countriesList&&this.countriesList.length?this.countriesList.filter((function(t){return e.blockedCountries.find((function(e){return e===t.code}))})):[]},countriesListWithoutCurrent:function(){var e=this;return this.blockedCountries.length?this.countriesList.filter((function(t){for(var s=0;s<e.blockedCountries.length;s+=1)if(e.blockedCountries[s]===t.code)return!1;return!0})):this.countriesList},blockedCountriesWithStates:function(){var e=this,t=[];return this.blockedCountries.forEach((function(s){var i=e.getCountryByCode(s);return i&&i.hasStates?t.push(i):null})),t},currentStatesList:function(){var e=this.statesByCounty(this.currentCountryWithStates);if(e&&Object.keys(e).length){var t=[];return Object.keys(e).forEach((function(s){t.push({code:s,name:e[s]})})),t}return[]},blockedIpsForRequest:function(){return this.blockedIps.split("\n")},showWatermarkTextInput:function(){return this.hasWatermarkPhoto||this.hasWatermarkVideo}}),watch:{authUser:function(e){this.setDataFromStore(e)},"allSettings.isPrivate":function(e){this.isPrivate=e},"allSettings.showPostsTips":function(e){this.showPostsTips=e},"allSettings.showFriendsToSubscribers":function(e){this.showFriendsToSubscribers=e},"allSettings.showSubscribesOffers":function(e){this.showSubscribesOffers=e},"allSettings.blockedCountries":function(e){this.blockedCountries=Array.isArray(e)?Object(n["a"])(e):[]},"allSettings.blockedStates":function(e){this.blockedStates=Array.isArray(e)?Object(n["a"])(e):[]},"allSettings.blockedIps":function(e){this.blockedIps=Array.isArray(e)?e.join("\n"):""},"allSettings.isAutoFollowBack":function(e){this.isAutoFollowBack=e},"allSettings.coStreamingRequestFrom":function(e){this.coStreamingRequestFrom=e},"allSettings.isCoStreamingAllowed":function(e){this.isCoStreamingAllowed=e},selectedState:function(e){if(""!==e){var t=null;for(var s in this.countryStates){var i=this.countryStates[s].find((function(t){return t.code===e}));"undefined"!==typeof i&&(t=s)}var r=this.getStateByCode(e,t);this.blockedCountriesStates[t].push(r);var a=g({},this.countryStates);a[t]=this.countryStates[t].filter((function(e){return e.code!==r.code})),this.countryStates=a,this.selectedState="",this.blockedStates.push(r.id)}},selectedCountry:function(e){var t=this;if(""!==e){var s=this.getCountryByCode(e);this.blockedCountries.find((function(t){return t===e}))||(this.blockedCountries.push(e),s&&s.hasStates&&this.fetchCountriesStates(s.id).then((function(){return t.setStates(s)}))),this.selectedCountry=""}},blockedCountriesWithStates:function(e,t){var s=this;0===t.length&&e.length>0&&this.blockedCountriesWithStates.forEach((function(e){s.fetchCountriesStates(e.id).then((function(){return s.setStates(e)}))}))}},mounted:function(){this.fetchCountries(),this.setDataFromStore(this.authUser),this.setDataFromSettings(this.allSettings)},beforeDestroy:function(){this.$validator.pause()},methods:g(g(g(g(g({},Object(c["Sb"])(["setUserField"])),Object(c["Nb"])(["changeUserBySection"])),Object(c["a"])(["fetchUserMe"])),Object(c["db"])(["fetchUserSettings","fetchCountries","fetchCountriesStates"])),{},{setStates:function(e){var t=this,s=this.statesByCounty(e.id),i=function(e){return s.filter((function(s){for(var i=0;i<t.blockedStates.length;i+=1)if(t.blockedStates[i]===s.id)return e;return!e}))},r=i(!0),a=i(!1),n=g({},this.blockedCountriesStates);n[e.id]=r;var o=g({},this.countryStates);o[e.id]=a,this.blockedCountriesStates=n,this.countryStates=o},setDataFromStore:function(e){e.id&&(this.isWantComments=e.isWantComments,this.showSubscribersCount=e.showSubscribersCount,this.showMediaCount=e.showMediaCount,this.hasWatermarkPhoto=e.hasWatermarkPhoto,this.hasWatermarkVideo=e.hasWatermarkVideo,this.watermarkText=e.watermarkText,this.isVisibleOnline=e.isVisibleOnline)},setDataFromSettings:function(e){this.isPrivate=e.isPrivate,this.showPostsTips=e.showPostsTips,this.showFriendsToSubscribers=e.showFriendsToSubscribers,this.showSubscribesOffers=e.showSubscribesOffers,this.isAutoFollowBack=e.isAutoFollowBack,this.coStreamingRequestFrom=e.coStreamingRequestFrom,this.isCoStreamingAllowed=e.isCoStreamingAllowed,this.blockedCountries=Array.isArray(e.blockedCountries)?Object(n["a"])(e.blockedCountries):[],this.blockedStates=Array.isArray(e.blockedStates)?Object(n["a"])(e.blockedStates):[],this.blockedIps=Array.isArray(e.blockedIps)?e.blockedIps.join("\n"):""},removeCountry:function(e){var t=this;this.blockedCountries=this.blockedCountries.filter((function(t){return t!==e.code})),"undefined"!==typeof this.blockedCountriesStates[e.id]&&this.blockedCountriesStates[e.id].forEach((function(e){t.blockedStates=t.blockedStates.filter((function(t){return e.id!==t}))})),delete this.blockedCountriesStates[e.id],this.selectedCountry=""},getCountryByCode:function(e){return this.countriesList.find((function(t){return t.code===e}))},getStateByCode:function(e,t){return this.countryStates[t].find((function(t){return t.code===e}))},removeStateFromSelected:function(e,t){var s=this.blockedCountriesStates[e].splice(t,1)[0];this.blockedStates=this.blockedStates.filter((function(e){return e!==s.id}));var i=g({},this.countryStates);i[e].push(s),i[e].sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={isPrivate:this.isPrivate,isWantComments:this.isWantComments,showSubscribersCount:this.showSubscribersCount,showMediaCount:this.showMediaCount,showPostsTips:this.showPostsTips,showFriendsToSubscribers:this.showFriendsToSubscribers,showSubscribesOffers:this.showSubscribesOffers,blockedCountries:this.blockedCountries,blockedIps:this.blockedIpsForRequest,blockedStates:this.blockedStates,isAutoFollowBack:this.isAutoFollowBack,coStreamingRequestFrom:this.coStreamingRequestFrom},this.isImageWatermarkNeeded&&(t.hasWatermarkPhoto=this.hasWatermarkPhoto,t.hasWatermarkVideo=this.hasWatermarkVideo,t.watermarkText=this.watermarkText),e.next=5,this.changeUserBySection({data:t,section:"security"});case 5:if(s=e.sent,!s||!s.success){e.next=12;break}return alert(this.$i18n.t("message.changes_saved_toast")),e.next=10,this.fetchUserMe();case 10:return e.next=12,this.fetchUserSettings();case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendCurrent:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sendCurrentUserField(t,s,i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,s,i){return e.apply(this,arguments)}return t}()})},b=v,_=s("2877"),w=Object(_["a"])(b,i,r,!1,null,null,null);t["default"]=w.exports},"08b0":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[e.authUser.isPerformer?[s("checkbox-toggle",{staticClass:"m-size-lg-text m-gap-first",attrs:{name:"isSuggestionsOptOut",disabled:e.disabledIsSuggestionsOptOut,label:e.$t("message.suggestions_opt_out")},on:{input:function(t){return e.sendCurrentUserField(e.isSuggestionsOptOut,"isSuggestionsOptOut","disabledIsSuggestionsOptOut")}},model:{value:e.isSuggestionsOptOut,callback:function(t){e.isSuggestionsOptOut=t},expression:"isSuggestionsOptOut"}})]:e._e(),e.authUser.canStreaming?[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title",domProps:{innerHTML:e._s(e.$t("message.streaming_settings_obs_title_new",{OBS:"<a href='https://obsproject.com/download' target='_blank' rel='nofollow noopener'>OBS</a>"}))}})]),s("div",{staticClass:"b-settings__form"},[s("InputOF",{attrs:{id:"obsstreamingserver",type:"text",label:e.$t("message.streaming_settings_obs_server_lable"),readonly:!0,"wrapper-classes":"d-flex m-field-copy"},scopedSlots:e._u([{key:"afterInput",fn:function(){return[s("copy-button",{attrs:{"additional-class":"m-rounded m-border m-sm m-bold","copy-text":e.getInit.obsStreamingServer}})]},proxy:!0}],null,!1,2818862752),model:{value:e.getInit.obsStreamingServer,callback:function(t){e.$set(e.getInit,"obsStreamingServer",t)},expression:"getInit.obsStreamingServer"}}),s("InputOF",{attrs:{id:"streamingobskey",type:"text",label:e.$t("message.streaming_settings_obs_key_lable"),readonly:!0,"wrapper-classes":"d-flex m-field-copy"},scopedSlots:e._u([{key:"afterInput",fn:function(){return[s("copy-button",{attrs:{"additional-class":"m-rounded m-border m-sm m-bold","copy-text":e.streamingObsKey}})]},proxy:!0}],null,!1,1721775856),model:{value:e.streamingObsKey,callback:function(t){e.streamingObsKey=t},expression:"streamingObsKey"}}),s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(this.$i18n.t("message.settings_streaming_chat_link_title")))]),s("div",{staticClass:"b-settings__streaming-chat-link"},[s("router-link",{attrs:{to:{name:"StreamingChat"}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.href,r=t.navigate;return[s("a",{staticClass:"b-settings__streaming-chat-link__url",attrs:{href:i},on:{click:r}},[e._v(" "+e._s(e.streamingChatUrl)+" ")])]}}],null,!1,3306094801)}),s("copy-button",{attrs:{"additional-class":"m-rounded m-border m-sm m-bold","copy-text":e.streamingChatUrl}})],1)])],1)]:e._e(),e.activityHubAllowed?[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title",domProps:{innerHTML:e._s(e.$t("message.activity_hub_token"))}})]),s("div",{staticClass:"g-btn__wrapper"},[s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.addHubToken}},[e._v(" "+e._s(e.$t("message.add_button"))+" ")])]),s("table",{staticClass:"table table-main"},[s("tbody",[s("tr",[s("th",[e._v(e._s(e.$t("message.personal_settings_other_token")))]),s("th",[e._v(e._s(e.$t("message.personal_settings_other_created_at")))]),s("th")]),e._l(e.fromHubToken,(function(t,i){return s("tr",{key:i},[s("td",[e._v(e._s(t.token))]),s("td",[s("utils-time",{attrs:{date:t.createdAt,type:"setting-token"}})],1),s("td",[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.delete_hub_token"),expression:"$t('message.delete_hub_token')"}],staticClass:"b-chats__search-users-clear js-chats__search-users-clear",attrs:{type:"button"},on:{click:function(s){return e.confirmRemove(t.id)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])])}))],2)]),s("modal-confirm",{attrs:{"modal-show":e.isShowModalConfirm,title:this.$i18n.t("message.delete_hub_token"),text:this.$i18n.t("message.dialog_delete_hub_token"),"agree-btn":this.$i18n.t("message.dialog_delete_post_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isShowModalConfirm=t},"update:modal-show":function(t){e.isShowModalConfirm=t},"on-agree":e.removeToken}})]:e._e()],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("d634"),c=s("13ca"),l=s("33a44"),u=s("8b3f"),d=s("1569"),p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("button",{staticClass:"g-btn",class:e.buttonClass,attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.onClick(t)}}},[e._v(" "+e._s(e.buttonLabel)+" ")])])},h=[],m={name:"CopyButton",props:{additionalClass:{type:String,default:""},copyText:{type:String,required:!0}},data:function(){return{isCopyBtnPressed:!1}},computed:{buttonLabel:function(){return this.isCopyBtnPressed?this.$i18n.t("message.copy_btn_copied_label"):this.$i18n.t("message.copy_btn_label")},buttonClass:function(){return Object(n["a"])({copied:this.isCopyBtnPressed},this.additionalClass,!0)}},methods:{onClick:function(){var e=this;this.$copyText(this.copyText).then((function(){e.isCopyBtnPressed=!0,setTimeout((function(){e.isCopyBtnPressed=!1}),1e3)}))}}},f=m,g=s("2877"),v=Object(g["a"])(f,p,h,!1,null,null,null),b=v.exports,_=s("29d7");function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var k={name:"SettingsOther",components:{InputOF:c["a"],UtilsTime:l["a"],ModalConfirm:u["a"],CheckboxToggle:d["a"],CopyButton:b},mixins:[_["a"]],data:function(){return{isShow:!1,hubToken:[],isShowModalConfirm:!1,tokenForRemove:"",templateForRemove:"",isSuggestionsOptOut:!1,disabledIsSuggestionsOptOut:!1}},computed:y(y(y(y({fromHubToken:function(){return this.activityHubTokens}},Object(o["b"])(["authUser"])),Object(o["q"])(["getInit"])),Object(o["eb"])(["streamingObsKey","activityHubAllowed","activityHubTokens"])),{},{streamingChatUrl:function(){var e=this.$router.resolve({name:"StreamingChat"}).href;return"".concat(this.$window.location.origin).concat(e)}}),watch:{authUser:function(e){this.setDataFromStore(e)}},mounted:function(){this.setDataFromStore(this.authUser)},methods:y(y({},Object(o["db"])(["createHubToken","deleteHubTokenAction"])),{},{addHubToken:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createHubToken();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmRemove:function(e){this.isShowModalConfirm=!0,this.tokenForRemove=e},removeToken:function(){this.tokenForRemove&&this.deleteHubTokenAction(this.tokenForRemove),this.tokenForRemove=""},setDataFromStore:function(e){e.id&&(this.isSuggestionsOptOut=e.isSuggestionsOptOut)}})},C=k,O=Object(g["a"])(C,i,r,!1,null,null,null);t["default"]=O.exports},"0c50":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-dropzone__preview",class:{"m-loaded":100===e.file.progress||"tip"===e.file.mediaType,"m-audio":"audio"===e.file.mediaType,"m-tip":"tip"===e.file.mediaType,"m-error":e.file.error}},[e.file.error?e._e():[e.file.url?["photo"===e.file.mediaType||"gif"===e.file.mediaType?s("a",{ref:"linkElement",staticClass:"media-file",attrs:{href:e.file.url},on:{click:function(t){return t.preventDefault(),e.openPreview(t)}}},[s("img",{ref:"fileImg",staticClass:"b-dropzone__preview__media",attrs:{src:e.file.url,alt:e.file.name,title:e.file.name},on:{load:e.loaded}})]):e._e(),"video"===e.file.mediaType&&100===e.file.progress&&"DELETE"===e.file.deleteType?[e.file.processId?e._e():s("a",{staticClass:"js-dropzone__video-lightbox-link",attrs:{href:e.uploadedVideoUrl},on:{click:function(t){return t.preventDefault(),e.openPreview(t)}}},[s("img",{staticClass:"b-dropzone__preview__media",attrs:{alt:e.file.name,title:e.file.name,src:e.videoPoster}}),s("span",{staticClass:"b-dropzone__preview__play-btn"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})])]),e.file.processId&&(e.file.size<e.previewFileLimit||e.file.thumbs&&e.file.thumbs.length)?s("span",{staticClass:"media-file"},[s("video",{staticClass:"b-dropzone__preview__media m-video",attrs:{poster:e.videoPoster}},[s("source",{attrs:{type:e.file.type,src:e.file.url}})])]):e._e(),e.showChoosePreviewBtn?[s("span",{staticClass:"g-btn m-rounded m-icon m-icon-only m-sm-size m-flex m-colored m-cover-btn",on:{click:function(t){return e.chooseCover(e.file.processId||e.file.id)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-eye",attrs:{"extra-class":"m-aligned-top"}})]),s("button",{staticClass:"b-dropzone__preview__edit",attrs:{type:"button",title:"Preview"},on:{click:function(t){return e.chooseCover(e.file.processId||e.file.id)}}},["sm"!==e.$mq?[e._v(" "+e._s(e.$t("message.preview_button_text"))+" ")]:e._e(),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})],2),s("cover-picker",{attrs:{id:e.file.processId||e.file.id,thumbs:e.file.thumbs,selectedIndex:e.file.thumbId},on:{save:e.updateThumbId}})]:e._e(),e.file.processId&&e.file.size>=e.previewFileLimit&&!e.file.thumbs?s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(e.file.name)+" ")]):e._e(),e.showIconPlay?s("span",{staticClass:"b-dropzone__preview__play-btn"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-play",staticClass:"icon-play"})]):e._e()]:e._e()]:e._e(),"tip"!==e.file.mediaType&&100!==e.file.progress?s("span",{staticClass:"b-dropzone__preview__progress-wrapper"},[s("span",{staticClass:"b-dropzone__preview__progress",style:{width:e.file.progress+"%"}})]):e._e(),"video"===e.file.mediaType&&e.file.progress<100?s("span",{staticClass:"b-chat__message__media__processing-icon"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-loading",staticClass:"icon-loading"})]):e._e()],e.file.error||(!e.file.url||"video"===e.file.mediaType&&e.file.size>=e.previewFileLimit&&!e.file.thumbs)&&"tip"!==e.file.mediaType?s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(e.file.name)+" ")]):e._e(),e.file.error?s("span",{staticClass:"b-dropzone__preview__error-icon"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-alert",staticClass:"icon-alert"})]):e._e(),"tip"!==e.file.mediaType&&e.canEditMedia?s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",disabled:e.sendMessageLoading,title:"Delete"},on:{click:function(t){return t.preventDefault(),e.deleteFile(e.file,e.index)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-close",staticClass:"icon-close"})]):e._e(),"photo"===e.file.mediaType&&e.canEditMedia&&e.authUser.enabledImageEditorForChat&&e.showEditor?s("button",{staticClass:"b-dropzone__preview__edit",attrs:{type:"button",title:"Edit new"},on:{click:e.openImageEditor}},[e._v(" Edit "),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})]):e._e(),e.file.error?e._e():["video"===e.file.mediaType&&e.file.size<e.previewFileLimit?s("span",{staticClass:"js-dropzone__video-lightbox-link media-file"},[s("video",{staticClass:"b-dropzone__preview__media m-video",attrs:{poster:e.file.thumbs&&e.file.thumbs.length?e.file.thumbs[0].url:""}},[s("source",{attrs:{type:e.file.type,src:e.file.url}})]),e.showIconPlay?s("span",{staticClass:"b-dropzone__preview__play-btn"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-play",staticClass:"icon-play"})]):e._e()]):e._e(),"audio"===e.file.mediaType?s("audio",{ref:"audio",staticClass:"g-hidden",attrs:{controlslist:"nodownload"}},[s("source",{attrs:{type:e.file.type,src:e.file.url}})]):e._e()],"tip"===e.file.mediaType?[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-funds",staticClass:"icon-funds"}),e._v(" "+e._s(e.$t("message.chat_message_on_tip_new",{SUMM:e.file.value.toFixed(2).replace(".00","")}))+" "),s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.deleteTip(e.index)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]:e._e()],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("7f7f"),s("7514"),s("bd86")),o=(s("c5f6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"coverPicker-"+this.id,attrs:{id:"coverPicker-"+this.id,"hide-header":!0,"hide-footer":!0,scrollable:"lg"!==e.$mq,centered:"lg"===e.$mq,"modal-class":"story-highlights","dialog-class":"story-highlights-dialog","content-class":"story-highlights-content"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"g-page__header"},[s("button",{staticClass:"g-page__header__btn m-with-round-hover",on:{click:e.close}},[s("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-back"}})])]),s("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.choose_cover_picture"))+" ")]),s("div",{staticClass:"btns-highlights"},[s("button",{staticClass:"g-btn m-rounded",on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save"))+" ")])])]),s("div",{staticClass:"modal-body"},[s("perfect-scrollbar",{staticClass:"b-photos m-custom-scrollbar m-highlights-wrapper"},e._l(e.thumbs,(function(t){return s("div",{key:t.id,staticClass:"b-photos__item m-highlight m-checkbox-control",class:{selected:t.id===e.thumbId},on:{click:function(s){return e.selectCover(t.id)}}},[s("div",{staticClass:"checkbox-item m-pos-left-bottom"},[s("span",{staticClass:"checkbox-item__num"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done",attrs:{"extra-class":"m-aligned-top"}})])]),s("img",{staticClass:"b-photos__item__img",attrs:{src:t.url,alt:""}})])})),0)],1)])}),c=[],l=s("b304"),u=(s("912b"),s("0f32"),{components:{BackToTopBtn:l["a"]},data:function(){return{show:!1,thumbId:1}},props:{id:{required:!0},thumbs:{required:!0},selectedIndex:{default:1}},computed:{},methods:{close:function(){this.$refs["coverPicker-".concat(this.id)].hide()},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("save",this.thumbId),this.$refs["coverPicker-".concat(this.id)].hide();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selectCover:function(e){this.thumbId=e}},mounted:function(){},watch:{show:function(){this.show&&(this.thumbId=this.selectedIndex)}}}),d=u,p=s("2877"),h=Object(p["a"])(d,o,c,!1,null,null,null),m=h.exports,f=s("ebdc"),g=s("d634"),v=s("06f2");s("0644");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={name:"UploadPreview",mixins:[v["a"]],components:{CoverPicker:m},props:{file:{type:Object,required:!0},index:{type:Number,required:!0},post:{type:Object,default:function(){}},showEditor:{type:Boolean,default:!0},filesCount:{type:Number,default:1},searchFace:{type:Boolean,default:!1}},data:function(){return{galleryIndex:null,previewFileLimit:2e7,editorOpened:!1}},computed:_(_(_({},Object(g["j"])(["sendMessageLoading"])),Object(g["b"])(["authUser"])),{},{videoPoster:function(){var e=this;if(this.file.thumbs&&this.file.thumbs.length){var t=this.file.thumbs.find((function(t){return t.id===e.file.thumbId}));return t?t.url:this.file.thumbs[0].url}return""},galleryMedia:function(){var e=this,t=[];if("photo"===this.file.mediaType||"gif"===this.file.mediaType||"video"===this.file.mediaType&&!this.file.processId){var s=this.file.url,i=this.file.url;if("video"===this.file.mediaType&&!this.file.processId&&this.file.thumbs&&this.file.thumbs.length){var r=this.file.thumbs.find((function(t){return t.id===e.file.thumbId}));s=r?r.url:s,i=r?r.url:i}t.push({src:i,thumbnail:s,w:this.file.width,h:this.file.height,orientation:this.file.orientation,rotation:this.file.rotation})}return t},uploadedVideoUrl:function(){return this.file.videoUploadHost&&this.file.previewUrl?"https://".concat(this.file.videoUploadHost).concat(this.file.url):this.file.url},showIconPlay:function(){return!this.file.error},canEditMedia:function(){return!this.post||!this.post.hasOwnProperty("canEditMedia")||this.post.canEditMedia},showChoosePreviewBtn:function(){return this.file.thumbs&&this.file.thumbs.length>1&&"ChatsSend"!==this.$route.name}}),mounted:function(){this.renderAudio()},methods:{deleteFile:function(e,t){this.$emit("deleteFile",{file:e,index:t})},openImageEditor:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!s.file.url||!/^blob:/.test(s.file.url)){e.next=2;break}return e.abrupt("return",s.file.url);case 2:return window.showPreloader(),e.next=5,new Promise((function(e,t){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.onload=function(t){e(i.response)},i.onerror=function(e){t(e)},i.open("GET",s.file.sourceUrl||s.file.url,!0),i.send()}));case 5:return t=e.sent,window.hidePreloader(),i=s.figureoutExif(t),e.abrupt("return",s.rotateImage({url:window.URL.createObjectURL(new Blob([i.result])),orientation:i.orientation,type:s.file.type}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=3,t();case 3:this.file.url=e.sent,this.imageEditor(this.file);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),imageEditor:function(e){var t=this;this.$imageEditor.$installFile(e,{disableGifs:this.filesCount>1}).then((function(e){e.asCopy?t.saveAsCopyEditedImage(e.file):t.saveEditedImage(e.file,t.index)})).catch((function(e){console.log("file closed",e)})).finally((function(){t.file.sourceUrl&&window.URL.revokeObjectURL(t.file.url)}))},updateThumbId:function(e){this.$emit("updateThumbId",e)},deleteTip:function(e){this.$emit("deleteTip",e)},saveEditedImage:function(e,t){this.$emit("saveEditedImage",e,t)},saveAsCopyEditedImage:function(e){this.$emit("saveAsCopyEditedImage",e)},onCloseImageEditor:function(){this.editorOpened=!1},setGalleryIndex:function(e){this.galleryIndex=e},renderAudio:function(){var e=this;this.$nextTick((function(){e.$refs.audio&&f["a"].init(e.$refs.audio)}))},openPreview:function(e){e.preventDefault(),e.stopPropagation(),this.$emit("openPreview",this.galleryMedia)},loaded:function(e){if(e){var t=e.srcElement;t.naturalWidth&&t.naturalHeight&&(this.file.width=t.naturalWidth,this.file.height=t.naturalHeight)}},chooseCover:function(e){this.$root.$emit("bv::show::modal","coverPicker-".concat(e))}}},y=w,k=(s("5144"),Object(p["a"])(y,i,r,!1,null,null,null));t["a"]=k.exports},"16eb":function(e,t,s){"use strict";var i=s("2710"),r=s.n(i);r.a},1793:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"video-js vjs-default-skin g-hidden b-chat__video-message__preview",attrs:{id:e.videoStreamId}},[s("video",{staticClass:"vjs-tech",attrs:{id:"video-message-el",playsinline:"",autoplay:"",muted:""},domProps:{muted:!0}}),s("button",{staticClass:"vjs-record-button vjs-control vjs-button vjs-icon-record-start",attrs:{type:"button",title:"Record","aria-disabled":"false"}},[s("span",{staticClass:"b-chat__videorec-btn__icon-rec"}),s("svg",{staticClass:"svg-progress",attrs:{width:"60",height:"60",viewBox:"0 0 60 60"}},[s("circle",{staticClass:"progress__meter",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}}),s("circle",{staticClass:"progress__value",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}})])]),s("button",{staticClass:"g-btn-close js-video-message-close m-light",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),s("div",{staticClass:"b-chat__videorec-live-icon"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-video"})]),s("div",{staticClass:"b-chat__videorec-live-label g-hidden"},[e._v(" REC ")]),s("div",{staticClass:"b-chat__videorec-title"},[e._v(" RECORD VIDEO message ")]),s("div",{staticClass:"b-chat__videorec-orientation-notice"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-orientation"}),e._v(" Please set screen orientation before start ")]),e._m(0)]),s("video",{staticClass:"video-js vjs-default-skin g-hidden b-chat__video-message__preview",attrs:{id:e.videoId}})])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"vjs-current-time vjs-time-control vjs-control",staticStyle:{display:"block"}},[s("span",{staticClass:"vjs-current-time-display",attrs:{"aria-live":"off",role:"presentation"}})])}],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("2b0e"),c=(s("7514"),s("75fc")),l=(s("6762"),s("2fdb"),s("7f7f"),s("4917"),s("3b2b"),s("a481"),s("f0e2")),u=s("c1df"),d=s.n(u),p=s("56d7"),h={controls:!0,width:320,height:240,fluid:!1,plugins:{record:{audio:!0,video:!0,maxLength:300,debug:!0}},controlBar:{fullscreenToggle:!1,volumePanel:!1,pipToggle:!1,deviceButton:!1,pictureInPictureToggle:!0}},m=!!(window&&window.MediaRecorder&&"function"===typeof window.MediaRecorder.isTypeSupported&&window.Blob),f=function(e){var t=!0,s=!0;e.forEach((function(e,i){var r,a,n="";if("videoinput"===e.kind)r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Camera ".concat(i),a=document.querySelector(".js-video-menu ul"),t&&(t=!1,n="m-active");else{if("audioinput"!==e.kind)return;r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Microphone ".concat(i),a=document.querySelector(".js-audio-menu ul"),s&&(s=!1,n="m-active")}var o=document.createElement("li"),c=document.createElement("a");c.dataset.id=i,c.classList.add("b-streaming__mic-select__option"),n&&c.classList.add(n),c.innerHTML='<span class="b-dropdown__icon"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-done"></use></svg></span>'.concat(r),o.appendChild(c),a.appendChild(o)}))},g=function(e,t,s){var i=2*Math.PI*28,r=s.querySelector(".progress__value"),a=Math.round(e/t*100);r.style.strokeDashoffset=i*(1-a/100),r.style.strokeDasharray=i},v=function(e,t){var s="",i=new RegExp("(.*?)(?=;|$)","gi"),r=e.type.match(i)[0];switch(r){case"audio/ogg":s="ogg";break;case"audio/webm":s="webm";break;case"video/webm":case"video/mp4":s="mp4";break;case"audio/wav":s="wav";break;case"video/x-matroska":s="mkv";break;default:s="mp3";break}try{return new File([e],"".concat(t,".").concat(s),{type:e.type})}catch(n){var a=new Blob([e],{type:e.type});return a.name="".concat(t,".").concat(s),Sentry.captureException(n),a}},b=null,_=window.innerWidth<768,w=function(e){var t,s=document.querySelector("#fileupload_photo"),i=v(e,"videorecord_".concat(b,"_").concat(d()().format("YYYYMMDDHHmmss")));window.CustomEvent?t=new CustomEvent("selectFile",{detail:{file:i}}):(t=document.createEvent("CustomEvent"),t.initCustomEvent("selectFile",!0,!0,{file:i})),s.disabled=!1,s.dispatchEvent(t)},y=function(e,t){e.classList.toggle("m-live",!t),e.querySelector(".b-chat__videorec-title").classList.toggle("g-hidden",!t),e.querySelector(".b-chat__videorec-orientation-notice").classList.toggle("g-hidden",!t),e.querySelector(".b-chat__videorec-live-icon").classList.toggle("m-live",!t),e.querySelector(".vjs-current-time").classList.toggle("g-hidden",t),e.querySelector(".b-chat__videorec-live-label").classList.toggle("g-hidden",t)},k=function(e){e.querySelector(".b-streaming__mic-select__btn").classList.add("g-hidden"),e.querySelector(".b-streaming__video-select__btn").classList.add("g-hidden"),e.querySelector(".vjs-record-button").innerHTML='<svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-stop"></use></svg>\n        <svg class="svg-progress" width="60" height="60" viewBox="0 0 60 60">\n          <circle class="progress__meter" cx="30" cy="30" r="28" stroke-width="4"></circle>\n          <circle class="progress__value" cx="30" cy="30" r="28" stroke-width="4"></circle>\n          </svg>',document.querySelector(".contact_button").classList.add("g-hidden"),y(e,!1)},C=function(e){e.querySelector(".b-streaming__mic-select__btn").classList.remove("g-hidden"),e.querySelector(".b-streaming__video-select__btn").classList.remove("g-hidden");var t=e.querySelector(".progress__value");t.style.strokeDashoffset=null,t.style.strokeDasharray=null,enableBodyScroll(),document.querySelector(".contact_button").classList.remove("g-hidden"),"Chat"!==p["default"].$route.name&&"SettingsMessaging"!==p["default"].$route.name||!document.documentElement.classList.contains("p-personal-chats-chat")||document.documentElement.classList.remove("p-personal-chats-chat")},O=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,r,n,o,u,d,v,O,S,P,x,j,$,T,D,I,E,M,A,F,U;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.IS_PERFORMER,r=t.userId,n=t.videoId,o=t.videoStreamId,u=t.isTester,b=r,d=!0,v=document.querySelector(".js-chat__video-record-btn"),v.classList.toggle("g-hidden",!i||!m),!m||u){e.next=18;break}return document.getElementById(o).remove(),e.next=9,s.e("vendor").then(s.t.bind(null,"3966",7));case 9:return O=null,S=Object(l["default"])(n,h,(function(){if(O=document.getElementById(S.id()),!O)return!1;S.isRecording=!1;var e=O.querySelector(".vjs-device-button");v.addEventListener("click",(function(t){O.classList.remove("g-hidden"),disableBodyScroll(),e&&setTimeout((function(){e.click()}),0)}));var t=document.createElement("button");t.type="button",t.classList.add("g-btn-close","js-video-message-close","m-light"),t.innerHTML='<svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-close"></use></svg>',t.onclick=function(){if(S.isRecording){var e=confirm(p["default"].$i18n.t("message.audiorecorder_leave_msg"));if(!e)return}S.isRecording=!1,O.classList.add("g-hidden"),enableBodyScroll(),S.record().reset(),document.documentElement.classList.contains("p-personal-chats-chat")&&document.documentElement.classList.remove("p-personal-chats-chat")},O.appendChild(t);var s=document.createElement("div");s.classList.add("b-chat__videorec-live-icon"),s.innerHTML='<svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-video"></use></svg>',O.appendChild(s);var i=document.createElement("div");i.classList.add("b-chat__videorec-live-label"),i.innerHTML="REC",O.appendChild(i);var r=document.createElement("div");r.classList.add("b-chat__videorec-title"),r.innerHTML="RECORD VIDEO message",O.appendChild(r);var a=document.createElement("div");a.classList.add("b-chat__videorec-orientation-notice"),a.innerHTML='<svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-orientation"></use></svg>Please set screen orientation before start',O.appendChild(a)})),S.on("deviceReady",(function(){S.record().enumerateDevices()})),S.on("enumerateReady",(function(){var e=S.record().devices.filter((function(e){return"default"!==e.deviceId&&!e.label.includes("default")}));if(O.querySelector(".vjs-record-button").innerHTML='<span class="b-chat__videorec-btn__icon-rec"></span>\n          <svg class="svg-progress" width="60" height="60" viewBox="0 0 60 60">\n          <circle class="progress__meter" cx="30" cy="30" r="28" stroke-width="4"></circle>\n          <circle class="progress__value" cx="30" cy="30" r="28" stroke-width="4"></circle>\n          </svg>',y(O,!0),d){d=!1,_&&O.classList.add("m-maybe-front-camera");var t=function(e,t){if(!1===e&&!1===t)return!1;e&&(S.record().recordAudio={deviceId:{exact:e}}),"undefined"===typeof e&&(S.record().recordAudio=!1),t&&(S.record().recordVideo={deviceId:{exact:t}}),S.record().getRecordType=function(){return"audio_video"};var s=S.record(),i=s.stream,r=i.getTracks();r.length>0&&(S.record().mediaElement.pause(),S.record().mediaElement.src="",r.forEach((function(e){e.stop()}))),S.record().getDevice()},s={allDevices:e,audioDevices:[{deviceId:void 0}].concat(Object(c["a"])(e.filter((function(e){return"audioinput"===e.kind})))),videoDevices:e.filter((function(e){return"videoinput"===e.kind}))},i=0,r=1;1===s.videoDevices.length&&(O.querySelector(".b-streaming__video-select__btn").disabled=!0),1===s.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").disabled=!0,document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href","#icon-voice-off")),2===s.videoDevices.length&&(document.querySelector(".b-streaming__video-select__btn").outerHTML='<button id="switch-camera" type="button" class="dropdown-toggle b-streaming__video-select__btn"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-video-switch"></use></svg></button>',document.getElementById("switch-camera").addEventListener("click",(function(e){_&&O.classList.toggle("m-maybe-front-camera"),i+=1,i>=s.videoDevices.length&&(i=0);var r=!!s.videoDevices[i]&&s.videoDevices[i].deviceId;t(!1,r)}))),2===s.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").outerHTML='<button id="switch-mic" type="button" class="dropdown-toggle b-streaming__mic-select__btn"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-voice"></use></svg></button>',document.getElementById("switch-mic").addEventListener("click",(function(e){r+=1,r>=s.audioDevices.length&&(r=0);var i=!!s.audioDevices[r]&&s.audioDevices[r].deviceId;t(i,!1),document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href",i?"#icon-voice":"#icon-voice-off")}))),f(s.allDevices),O.querySelectorAll(".js-video-menu .b-streaming__mic-select__option").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var i=e.target,r=!!s.allDevices[i.dataset.id]&&s.allDevices[i.dataset.id].deviceId;O.querySelector(".js-video-menu .m-active").classList.remove("m-active"),i.classList.add("m-active"),t(!1,r)}))})),O.querySelectorAll(".js-audio-menu .b-streaming__mic-select__option").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var i=e.target,r=s.allDevices[i.dataset.id]?s.allDevices[i.dataset.id].deviceId:void 0;O.querySelector(".js-audio-menu .m-active").classList.remove("m-active"),i.classList.add("m-active"),t(r,!1),document.querySelector(".b-streaming__mic-select .g-icon use").setAttribute("xlink:href",r?"#icon-voice":"#icon-voice-off")}))}))}})),S.on("deviceError",(function(){console.error("device error:",S.deviceErrorCode)})),S.on("error",(function(e,t){console.error(t)})),S.on("startRecord",(function(){S.isRecording=!0,k(O);var e=(new Date).getTime(),t=h.plugins.record.maxLength,s=setInterval((function(){if(S.record().isRecording()){var i=Math.round(((new Date).getTime()-e)/1e3);g(i,t,O),i>=t&&clearInterval(s)}else clearInterval(s)}),250)})),S.on("finishRecord",(function(){S.isRecording=!1;var e=S.recordedData;w(e),O.classList.add("g-hidden"),S.record().reset(),C(O)})),e.abrupt("return",S);case 18:if(!u){e.next=35;break}return console.log("isTester"),P="onlyfans.com",x="https://".concat(P),j=null,$=!1,T=0,e.next=27,Promise.resolve().then(s.bind(null,"7e97"));case 27:D=e.sent,I=D.default,E=new I,M=document.getElementById(o),A=h.plugins.record.maxLength,F=!1,U={videoElId:"video-message-el",getApiUrl:"".concat(x,"/my/streaming/get_api_url/video_message"),streamSource:"local",showErrorMessage:function(e){console.error(e)},onLocalStreamInit:function(){},onRemoteStreamInit:function(){},onStreamError:function(e){console.error(e)},onStreamTick:function(e){T=Math.round((new Date).getTime()/1e3)-e;var t=new Date(1e3*T),s=(t.getHours()<10?"0":"")+t.getHours(),i=(t.getMinutes()<10?"0":"")+t.getMinutes(),r=(t.getSeconds()<10?"0":"")+t.getSeconds(),a="".concat(i,":").concat(r);T>3600&&(a="".concat(s,":").concat(i,":").concat(r)),M.querySelector(".vjs-current-time-display").innerText=a,g(T,A,M),T>=A&&E.stopStream()},onStreamStart:function(e){fetch("".concat(x,"/my/streaming/start_stream/video_message?room_name=").concat(e),{headers:{"content-type":"application/json","X-Requested-With":"XMLHttpRequest"},method:"GET",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){e?j=e.streamId:($=!0,E.stopStream())})).catch((function(e){$=!0,E.stopStream(),Sentry.captureException(e)}))},onDestroy:function(){j&&fetch("".concat(x,"/my/streaming/finish_stream?stream_id=").concat(j).concat($?"&cancel=1":""),{headers:{"content-type":"application/json","X-Requested-With":"XMLHttpRequest"},method:"GET",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){$=!1})).catch((function(e){Janus.error(e),Sentry.captureException(e)}))},onStreamEnd:function(e){M.querySelector(".vjs-record-button").innerHTML='<span class="b-chat__videorec-btn__icon-rec"></span>\n            <svg class="svg-progress" width="60" height="60" viewBox="0 0 60 60">\n            <circle class="progress__meter" cx="30" cy="30" r="28" stroke-width="4"></circle>\n            <circle class="progress__value" cx="30" cy="30" r="28" stroke-width="4"></circle>\n            </svg>',M.querySelector(".vjs-current-time-display").innerText="",C(M),y(M,!0),$?M.classList.add("g-hidden"):showPreloader()},onDevicesReadyCallback:function(){F=!0,M.querySelector(".vjs-record-button").addEventListener("click",(function(){E.streamStarted?T<=5?my_dialog({message:"Only messages over 5 seconds will be saved",buttons:[{title:"Record again",onclick:function(){$=!0,E.stopStream(),my_dialog_close()}}],dismissBtn:"Close"}):E.stopStream():(disableBodyScroll(),k(M),E.startStream())})),M.querySelector(".js-video-message-close").onclick=function(){M.classList.add("g-hidden"),enableBodyScroll(),E.streamStarted&&($=!0,E.stopStream())},window.ws.onmessage=function(e){console.log(e);var t=JSON.parse(e.data);if(t.video_message_stream){hidePreloader(),M.classList.add("g-hidden");var s=t.video_message_stream.media_src;fetch(s).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.blob();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){w(e)})).catch((function(e){Sentry.captureException(e)}))}},E.isMobile&&M.classList.add("m-maybe-front-camera");var e=E.getDevices(),t=0,s=1;1===e.videoDevices.length&&(M.querySelector(".b-streaming__video-select__btn").disabled=!0),1===e.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").disabled=!0,document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href","#icon-voice-off")),2===e.videoDevices.length&&(document.querySelector(".b-streaming__video-select__btn").outerHTML='<button id="switch-camera" type="button" class="dropdown-toggle b-streaming__video-select__btn"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-video-switch"></use></svg></button>',document.getElementById("switch-camera").addEventListener("click",(function(){E.isMobile&&M.classList.toggle("m-maybe-front-camera"),t=e.videoDevices.indexOf(e.videoDevices.find((function(e){return e.deviceId===E.videoVars.device.id}))),t+=1,t>=e.videoDevices.length&&(t=0);var s=!!e.videoDevices[t]&&e.videoDevices[t].deviceId;E.switchDevices(!1,s)}))),2===e.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").outerHTML='<button id="switch-mic" type="button" class="dropdown-toggle b-streaming__mic-select__btn"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-voice"></use></svg></button>',document.getElementById("switch-mic").addEventListener("click",(function(){s=e.audioDevices.indexOf(e.audioDevices.find((function(e){return e.deviceId===E.audioVars.device.id}))),s+=1,s>=e.audioDevices.length&&(s=0);var t=!!e.audioDevices[s]&&e.audioDevices[s].deviceId;E.switchDevices(t,!1),document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href",t?"#icon-voice":"#icon-voice-off")}))),f(e.allDevices),M.querySelectorAll(".js-video-menu .b-streaming__mic-select__option").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();var s=t.target,i=!!e.allDevices[s.dataset.id]&&e.allDevices[s.dataset.id].deviceId;M.querySelector(".js-video-menu .m-active").classList.remove("m-active"),s.classList.add("m-active"),E.switchDevices(!1,i)}))})),M.querySelectorAll(".js-audio-menu .b-streaming__mic-select__option").forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();var s=t.target,i=e.allDevices[s.dataset.id]?e.allDevices[s.dataset.id].deviceId:void 0;M.querySelector(".js-audio-menu .m-active").classList.remove("m-active"),s.classList.add("m-active"),E.switchDevices(i,!1),document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href",i?"#icon-voice":"#icon-voice-off")}))}))},onCleanUp:function(){}},v.addEventListener("click",(function(){M.classList.remove("g-hidden"),F||E.init(U)}));case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=O,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-btns-panel"},[s("b-dropdown",{staticClass:"b-volume-btn m-btn-round b-streaming__mic-select",attrs:{left:"","toggle-class":"b-volume-btn__el b-streaming__mic-select__btn","menu-class":"js-audio-menu m-list-switcher"}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice"})]),s("ul",[s("li",[s("a",{staticClass:"b-streaming__mic-select__option",attrs:{"data-id":"",href:"#"}},[s("span",{staticClass:"b-dropdown__icon"},[s("span",{staticClass:"b-input-ripple"})]),e._v(" Disable Microphone ")])])])],2),s("b-dropdown",{staticClass:"b-volume-btn m-btn-round b-streaming__video-select",attrs:{right:"","toggle-class":"b-volume-btn__el b-streaming__video-select__btn","menu-class":"js-video-menu m-list-switcher"}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-video"})]),s("ul")],2)],1)},x=[],j={name:"Videorec"},$=j,T=s("2877"),D=Object(T["a"])($,P,x,!1,null,null,null),I=D.exports,E=s("ad97"),M=s("d634");function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var U={name:"Videomessage",mixins:[E["a"]],components:{Videorec:I},watch:{player:{handler:function(e){e&&void 0!==e.isRecording&&(this.isRecording=e.isRecording)},deep:!0}},data:function(){return{date:null,player:null,isRecording:!1,hasBeforeunloadVideomessageEvent:!1,beforeEachVideomessageFunc:null}},computed:F(F({},Object(M["b"])(["authUser"])),{},{videoId:function(){return"js-video-message".concat(this.date)},videoStreamId:function(){return"js-video-message-stream".concat(this.date)},checkLeaveVideomessage:function(){return this.isRecording},checkLeaveTextVideomessage:function(){return this.$i18n.t("message.audiorecorder_leave_msg")}}),mounted:function(){var e=this;this.date=+new Date,this.$nextTick((function(){e.initVideo()})),this.beforeEachVideomessageFunc=this.routerCheckLeave({conditionField:"checkLeaveVideomessage",textField:"checkLeaveTextVideomessage"}),this.beforeunloadCheckLeave({watchField:"checkLeaveVideomessage",conditionField:"checkLeaveVideomessage",eventField:"hasBeforeunloadVideomessageEvent",funcField:"handleBeforeUnloadVideomessage"}),this.$root.$once("removeAllBeforeUnloadListeners",this.removeListeners)},beforeDestroy:function(){this.beforeEachVideomessageFunc&&this.beforeEachVideomessageFunc(),this.hasBeforeunloadVideomessageEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnloadVideomessage),this.hasBeforeunloadVideomessageEvent=!1),this.$root.$off("removeAllBeforeUnloadListeners",this.removeListeners)},methods:{handleBeforeUnloadVideomessage:function(e){if(this.hasBeforeunloadVideomessageEvent){var t=this.checkLeaveTextVideomessage;return e=e||window.event,e&&(e.returnValue=t),t}},initVideo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S({IS_PERFORMER:this.authUser.isPerformer,isTester:this.$cookie.get("tester",{domain:".".concat("onlyfans.com")}),userId:this.authUser.id,videoId:this.videoId,videoStreamId:this.videoStreamId});case 2:this.player=e.sent,t=this.player?this.player.id():this.videoStreamId,this.insertVideorec(t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),insertVideorec:function(e){var t=o["default"].extend(I),s=new t;s.$mount(),document.getElementById(e).appendChild(s.$el)},removeListeners:function(){window.removeEventListener("beforeunload",this.handleBeforeUnloadVideomessage)}}},L=U,N=Object(T["a"])(L,i,r,!1,null,null,null);t["a"]=N.exports},"1db1":function(e,t,s){"use strict";s("8e6e"),s("ac6a"),s("456d"),s("c5f6"),s("a481"),s("7f7f"),s("96cf");var i=s("3b8d"),r=s("bd86"),a=s("9b02"),n=s.n(a),o=s("d173"),c=s.n(o),l=s("c1df"),u=s.n(l),d=s("d634"),p=s("e057"),h=s("16d9");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={data:function(){return{loadingError:!1,userLoaded:null}},mixins:[p["a"],h["a"]],computed:f({},Object(d["T"])(["getLastProfileItemIds","getPost","getTempItemIds"])),methods:f(f(f(f(f(f({},Object(d["pb"])(["fetchUserStories","fetchUserHighlights","resetUserStories","resetUserHighlights"])),Object(d["Sb"])(["setCurrentUser"])),Object(d["Nb"])(["fetchCurrentUser"])),Object(d["U"])(["setItemIds","setLastProfileItemId","setPrevUserPostsToLoad","setPinnedIds"])),Object(d["S"])(["fetchUserPosts","fetchPost","fetchPostsPinned"])),{},{fetchProfileData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var s,i,r,a,o,l,d,p,h,m,g,v,b,_,w,y,k,C,O,S,P,x,j,$,T=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.loadingError=!1,t){e.next=4;break}return this.loadingError=!0,e.abrupt("return");case 4:if(this.setPrevUserPostsToLoad(!1),!this.userLoaded){e.next=10;break}s=this.userLoaded,this.userLoaded=null,e.next=20;break;case 10:return this.setCurrentUser(null),e.prev=11,e.next=14,this.fetchCurrentUser(t);case 14:s=e.sent,e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](11),this.loadingError=!0;case 20:if(!s){e.next=56;break}if(!this.$route||"Profile"!==this.$route.name&&"ProfileInner"!==this.$route.name||s.username===this.$route.params.userId){e.next=25;break}return this.userLoaded=s,this.$router.replace(f(f({},this.$route),{},{params:{userId:s.username}})),e.abrupt("return");case 25:if(!(!s.isPrivateRestriction||s.isPrivateRestriction&&this.isAuthUser||s.subscribedBy)){e.next=55;break}if(!this.$route){e.next=34;break}if(i=this.$route,r=i.name,a=i.params.postId,"Post"!==r||!a){e.next=34;break}return e.next=31,this.fetchPost({id:a,active:!0});case 31:return o=e.sent,Array.isArray(o)&&!o.length&&(this.loadingError=!0),e.abrupt("return");case 34:return l=s,d=l.id,p=this.$route.params.postType,h=this.$route.query,m=h.q,g=h.order,v=h.filter,b=this.getLastProfileItemIds(s.username,p),b.length&&(C=this.getTempItemIds(s.username),y=C.pinnedPostsIds,k=C.userPostItemIds,this.route&&this.route.from&&"Post"===this.route.from.name&&this.route.from.params?O=[Number(this.route.from.params.postId)]:(O=c()(y,b),O.length||(O=c()(k,b))),_=k.indexOf(O[0]),y.length?w=y.indexOf(O[0]):this.setPinnedIds(),-1===w&&_>=0&&(this.setPinnedIds(),this.setPrevUserPostsToLoad(!0)),-1===w&&-1===_?this.fetchPostsPinned():(_>0||s.hasPinnedPosts&&!y.length)&&this.setPrevUserPostsToLoad(!0),(_>=0||w>=0)&&(w>=0&&this.setPinnedIds(y),this.setItemIds(O),S=document.querySelector(".b-compact-header")?document.querySelector(".b-compact-header").getBoundingClientRect().height:0,this.$nextTick((function(){T.scrollToElement({behavior:"instant",el:document.querySelector("#postId_".concat(O[0])),offset:S})})))),_>-1&&(x=this.getPost(k[0])[0],x&&(x.isPinned||(j=n()(x,"postedAt"),$=n()(x,"postedAtPrecise"),P=$?u.a.unix($).format("X.SSSSSS"):u()(j).format("X.SSSSSS")))),e.prev=40,e.next=43,this.fetchUserPosts({id:d,type:p,query:m,order:g,filter:v,beforePublishTime:P,more:!!P});case 43:e.next=47;break;case 45:e.prev=45,e.t1=e["catch"](40);case 47:if(this.setLastProfileItemId({username:s.username,arr:[]}),!s.canLookStory){e.next=53;break}return e.next=51,this.fetchUserStories(d);case 51:return e.next=53,this.fetchUserHighlights(d);case 53:e.next=56;break;case 55:s.isPrivateRestriction&&"Post"===this.$route.name&&this.$router.replace({name:"Profile",params:{userId:s.username}});case 56:case"end":return e.stop()}}),e,this,[[11,17],[40,45]])})));function t(t){return e.apply(this,arguments)}return t}(),resetProfileData:function(){this.resetUserStories(),this.resetUserHighlights()}})}},2:function(e,t){},"25ac":function(e,t,s){"use strict";var i=s("9957");t["a"]={methods:{fileType:function(e){return i["a"].getType(e)}}}},"25e7":function(e,t,s){"use strict";s("3b2b"),s("a481");t["a"]={methods:{highlight:function(e,t,s){t="(?![^<]*>)".concat(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));var i=new RegExp(t,"gmi");return e.replace(i,(function(e){return'<span class="'.concat(s,'">').concat(e,"</span>")}))}}}},2710:function(e,t,s){},3:function(e,t){},"30ba":function(e,t,s){"use strict";s("8e6e"),s("ac6a"),s("456d");var i=s("bd86"),r=s("d634");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={computed:n(n({},Object(r["b"])(["authUser"])),{},{canPayToUser:function(){return!(!this.authUser||!this.user)&&(this.authUser.isPaymentCardConnected||this.authUser.isCreditsEnabled&&this.authUser.creditBalance>=1&&this.user.canPayInternal)}})}},"313e":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.user?s("b-modal",{ref:"ModalBundle",attrs:{id:"ModalBundle","modal-class":"modal-bundle",size:"sm","hide-header-close":!0,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("template",{slot:"modal-header"},[s("h4",{staticClass:"modal-title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"}),e._v(" "+e._s(e.id?e.$t("message.bundles_author_update_bundle_title"):e.$t("message.bundles_author_add_btn_label"))+" ")])]),s("div",{staticClass:"row row_flex"},[s("div",{staticClass:"col-xs-7"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_discount_label_new"))+" ")]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.discounts,searchable:!1},model:{value:e.discount,callback:function(t){e.discount=t},expression:"discount"}})],1)]),s("div",{staticClass:"col-xs-5"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.subscription_discount_dialog_peroid_label_new"))+" ")]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.durations,searchable:!1},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}})],1)])]),s("p",{staticClass:"g-input__help",class:{"m-danger":e.maxPriceError}},[e._v(" "+e._s(e.maxPriceError||e.$t("message.bundle_popup_desc",{DURATION:e.durationName,AMOUNT:e.amount}))+" ")]),s("template",{slot:"modal-footer"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.close}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.isDisabled},on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])],2):e._e()},r=[],a=(s("8e6e"),s("96cf"),s("3b8d")),n=(s("a481"),s("20d6"),s("ac6a"),s("456d"),s("bd86")),o=(s("c5f6"),s("9b02")),c=s.n(o),l=s("d634"),u=s("d1e5");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"ModalBundle",components:{CustomSelect:u["a"]},props:{bundleDiscount:{type:Number,default:void 0},bundleDuration:{type:Number,default:void 0},id:{type:Number,default:void 0}},data:function(){return{show:!1,disable:!1,computedDiscount:0,computedDuration:0}},computed:p(p(p(p({},Object(l["Ob"])(["modalUser","getUser"])),Object(l["h"])(["getBundles"])),Object(l["b"])(["authUser"])),{},{user:function(){return this.getUser(this.modalUser)},bundles:function(){return this.user.subscriptionBundles?this.getBundles(this.user.subscriptionBundles):[]},discounts:function(){var e=this;return c()(this,"user.canAddSubscriberByBundle.discounts")?Object.keys(this.user.canAddSubscriberByBundle.discounts).map((function(t){return{code:t,name:e.user.canAddSubscriberByBundle.discounts[t]}})):[]},durations:function(){var e=this;return c()(this,"user.canAddSubscriberByBundle.durations")?Object.keys(this.user.canAddSubscriberByBundle.durations).map((function(t){return{code:t,name:e.user.canAddSubscriberByBundle.durations[t]}})).filter((function(t){return e.bundleDuration===Number(t.code)||e.bundles.findIndex((function(e){return e.duration===Number(t.code)}))<0})):[]},discount:{get:function(){return this.computedDiscount||(this.discounts.length?this.discounts[0].code:0)},set:function(e){this.computedDiscount=Number(e)}},duration:{get:function(){return this.computedDuration||(this.durations.length?this.durations[0].code:0)},set:function(e){this.computedDuration=Number(e)}},amount:function(){return(Math.round(this.duration*this.user.subscribePrice*(100-this.discount))/100).toFixed(2).replace(".00","")},durationName:function(){return c()(this,"user.canAddSubscriberByBundle.durations")&&this.user.canAddSubscriberByBundle.durations[this.duration]||""},maxAmount:function(){return this.authUser.bundleMaxPrice},maxPriceError:function(){return!!(this.maxAmount&&this.amount>this.maxAmount)&&this.$i18n.t("message.bundle_max_price_error",{PRICE:"$".concat(this.maxAmount)})},isDisabled:function(){return this.disable||this.maxPriceError}}),watch:{bundleDiscount:function(e){this.computedDiscount=e},bundleDuration:function(e){this.computedDuration=e}},methods:p(p({},Object(l["g"])(["saveBundle"])),{},{close:function(){this.show=!1},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disable){e.next=2;break}return e.abrupt("return");case 2:return this.close(),this.disable=!0,t=this.discount,s=this.duration,i={discount:t,duration:s},this.id&&(i.id=this.id),e.next=9,this.saveBundle(i);case 9:this.disable=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},m=h,f=s("2877"),g=Object(f["a"])(m,i,r,!1,null,null,null);t["a"]=g.exports},"33a44":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.html?s("span",{staticClass:"datetime",attrs:{title:e.prettierDateFull},domProps:{innerHTML:e._s(e.prettierDate)}}):s("span",{attrs:{title:e.prettierDateFull}},[e._v(" "+e._s(e.prettierDate)+" ")])},r=[],a=(s("6762"),s("2fdb"),s("c5f6"),s("c1df")),n=s.n(a);n.a.updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"1 minute",mm:"%d minutes",h:"1 hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});var o={name:"UtilsTime",props:{type:{type:String,default:"feed"},date:{type:[String,Number,Date],default:""},html:{type:Boolean,default:!1}},data:function(){return{prettierDate:"",prettierDateFull:"",interval:null}},mounted:function(){this.updateMoment(),this.$root.$on("updateTime",this.updateMoment)},beforeDestroy:function(){this.$root.$off("updateTime",this.updateMoment)},watch:{date:function(){this.updateMoment()}},methods:{updateMoment:function(){var e=this,t=function(e){return e instanceof Date&&!isNaN(e)};if(this.$nextTick((function(){e.$emit("time",e.prettierDate)})),t(new Date(this.date)))if("setting-sessions"!==this.type)if("setting-token"!==this.type)if("expired"!==this.type)if("time-only"!==this.type)if("date-only"!==this.type)if("scheduled-stream"!==this.type)if("scheduled-stream-post"!==this.type){var s=n()(),i=n()().subtract(1,"days").startOf("day"),r=n()().add(1,"days").startOf("day"),a=n()().add(1,"days").endOf("day"),o=n()().endOf("year"),c=n()(this.date).isSame(s,"day"),l=n()(this.date).isSame(i,"day"),u=n()(this.date).isSame(r,"day"),d=n()(this.date).isSame(s,"year");if(this.prettierDateFull=n()(this.date).format("MMM D, h:mm a"),["feed","chat","schedule","timeline","payments"].includes(this.type)){if("schedule"===this.type&&s.isAfter(this.date))return void(this.prettierDate="now");if(c)return"chat"===this.type?void(this.prettierDate=n()(this.date).format("h:mm a")):"timeline"===this.type?void(this.prettierDate="Today"):"payments"===this.type&&this.html?void(this.prettierDate='<span class="date">Today</span><span class="time">'.concat(n()(this.date).format("h:mm a"),"</span>")):void(this.prettierDate=n()(this.date).fromNow());if(n()(this.date).isAfter(o))return void(this.prettierDate=n()(this.date).format("MMM D YYYY, h:mm a"));if(n()(this.date).isAfter(a))return void(this.prettierDate=n()(this.date).format("MMM D, h:mm a"));if(u)return void(this.prettierDate="Tomorrow, ".concat(n()(this.date).format("h:mm a")));if(l)return"payments"===this.type&&this.html?void(this.prettierDate='<span class="date">Yesterday</span><span class="time">'.concat(n()(this.date).format("h:mm a"),"</span>")):void(this.prettierDate="Yesterday");if(d)return"payments"===this.type&&this.html?void(this.prettierDate='<span class="date">'.concat(n()(this.date).format("MMM D"),'</span><span class="time">').concat(n()(this.date).format("h:mm a"),"</span>")):void(this.prettierDate=n()(this.date).format("MMM D"));if("payments"===this.type&&this.html)return void(this.prettierDate='<span class="date">'.concat(n()(this.date).format("MMM D, YYYY"),'</span><span class="time">').concat(n()(this.date).format("h:mm a"),"</span>"));this.prettierDate=n()(this.date).format("MMM D, YYYY")}"vote-finished"===this.type&&(this.prettierDate=n.a.duration(n()(this.date).diff(s)).humanize())}else this.prettierDate=n()(this.date).format("MM.DD.YYYY, h:mm a");else this.prettierDate=n()(this.date).format("MMM D, h:mm a");else this.prettierDate=n()(this.date).format("MMM D, YYYY");else this.prettierDate=n()(this.date).format("h:mm a");else this.prettierDate=n()(this.date).fromNow(!0);else this.prettierDate=n()(this.date).format("M/D/YY");else this.prettierDate=n()(this.date).format("M/D/YY h:mm a");else this.prettierDate=""}}},c=o,l=s("2877"),u=Object(l["a"])(c,i,r,!1,null,null,null);t["a"]=u.exports},"39a7":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("router-link",{staticClass:"b-chats__available-users__item m-search",class:{"m-active":e.isActive},attrs:{to:{name:"Profile",params:{userId:e.user.username}},event:""},nativeOn:{click:function(t){return t.preventDefault(),e.goTo(t)}}},[s("span",{staticClass:"g-avatar online_status_class m-w50",class:{online:e.user.isOnline}},[s("payer-rating",{attrs:{user:e.user,placement:"right"}}),s("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),s("div",{staticClass:"b-users__item-short__text"},[s("div",{staticClass:"g-user-name",domProps:{innerHTML:e._s(e.userName)}}),s("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" "),e.subscribe?s("span",{staticClass:"g-user-username__subscription-text"},[e._v(" • "+e._s(e.subscribedText)+" ")]):e._e()])])])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),n=(s("c5f6"),s("c1df")),o=s.n(n),c=s("d634"),l=s("e66b"),u=s("4683"),d=s("7e35"),p=s("925c");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"SearchUsersItem",components:{ImageThumb:l["a"],PayerRating:u["a"]},mixins:[p["a"],d["a"]],props:{userId:{type:Number,required:!0},preventClick:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1}},computed:m(m(m(m({},Object(c["Ob"])(["getUser"])),Object(c["eb"])(["userLoginPrefix"])),Object(c["Jb"])(["getSubscribe"])),{},{user:function(){return this.getUser(this.userId)},subscribe:function(){return this.getSubscribe(this.user.id)},isExpiredSubscribe:function(){return this.subscribe&&this.subscribe.expiredAt&&+new Date(this.subscribe.expiredAt)-+new Date<=0&&!this.subscribe.renewedAt&&!this.subscribe.status},userName:function(){return this.user.displayName?this.user.name==="".concat(this.userLoginPrefix).concat(this.user.id)?this.user.displayName:"".concat(this.user.displayName,' <span class="g-gray-text">(').concat(this.user.name,")</span>"):this.user.name},expiredSubscribeDays:function(){return this.isExpiredSubscribe?("en"!==this.$i18n.locale&&o.a.locale(this.$i18n.locale),o()(this.subscribe.expiredAt).toNow(!0)):""},subscribedText:function(){return this.isExpiredSubscribe?this.subscribe.newPostsAfterExpireCount?this.$i18n.tc("message.new_posts_count_plural",this.subscribe.newPostsAfterExpireCount,{COUNT:this.subscribe.newPostsAfterExpireCount>99?"99+":this.subscribe.newPostsAfterExpireCount}):this.$i18n.t("message.subscription_expired_ago_short",{DURATION:this.expiredSubscribeDays}):this.$i18n.t("message.message_type_subscribed")}}),methods:{goTo:function(){this.preventClick?this.$emit("click",this.user.id):this.$router.push({name:"Profile",params:{userId:this.user.username}})}}},g=f,v=s("2877"),b=Object(v["a"])(g,i,r,!1,null,null,null);t["a"]=b.exports},"3bc9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"post_media",class:{"m-video":e.visibleVideos.length||e.visibleGifs.length,"m-one-video":e.oneVideo||e.oneGif,"m-only-video":e.onlyVideo||e.onlyGifs}},[e.isBlurFoto?s("div",{staticClass:"b-chat__message__pay-btn blur-foto-btn",on:{click:function(t){e.isBlurFoto=!1}}},[s("span",[e._v(e._s(e.$t("message.click_to_open")))])]):e._e(),!e.isPlaying&&e.visibleMediaWithoutAudio.length>1?s("Switcher",{attrs:{post:e.post,message:e.message,"current-media-type-item-num":e.currentMediaTypeItemNum,"current-index":e.currentContentIndex,"is-linked":e.isLinked},on:{changeType:e.setMediaType}}):e._e(),e.visibleMediaWithoutAudio.length>1&&!e.isLinked?s("swiper",{key:e.visibleMediaWithoutAudio.length,ref:"postSwiper",staticClass:"b-slideshow",class:{"m-square":"squarePreview"===e.mediaPreviewType,"m-only-video":e.onlyVideo||e.onlyGifs},attrs:{options:e.mediaOptions},on:{"click-slide":e.gallerySlideClicked,slideChange:e.slideChange,sliderMove:e.sliderMove,touchEnd:e.touchEnd}},[e._l(e.visibleMediaWithoutAudio,(function(t){return s("swiper-slide",{key:t.id},[s("post-media-item",{class:{"m-no-pointer":e.sliderIsMoving},style:{filter:e.isBlurFoto?"blur(20px)":""},attrs:{"media-item":t,"preview-type":e.mediaPreviewType,post:e.post},on:{changeVideoState:e.changeVideoState,"~mediaError":function(t){return e.mediaError(t)}}})],1)})),s("div",{staticClass:"swiper-button-prev",class:{"g-hidden":e.isPlaying},attrs:{slot:"button-prev"},slot:"button-prev"},[s("span",{staticClass:"b-swiper-button-icon "},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]),s("div",{staticClass:"swiper-button-next",class:{"g-hidden":e.isPlaying},attrs:{slot:"button-next"},slot:"button-next"},[s("span",{staticClass:"b-swiper-button-icon "},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])])],2):1!==e.visiblePhotos.length||e.isLinked?s("post-media-item",{style:{filter:e.isBlurFoto?"blur(20px)":""},attrs:{"media-item":e.visibleMediaWithoutAudio[0],"preview-type":e.mediaPreviewType,post:e.post,message:e.message,"is-linked":e.isLinked},on:{changeVideoState:e.changeVideoState,"~mediaError":function(t){return e.mediaError(t)}}}):s("div",{staticClass:"post_img_block",on:{click:function(t){return t.preventDefault(),e.showPhotoSwipe(0)}}},[s("post-media-item",{style:{filter:e.isBlurFoto?"blur(20px)":""},attrs:{"media-item":e.visiblePhotos[0],"preview-type":e.mediaPreviewType,post:e.post,message:e.message},on:{"~mediaError":function(t){return e.mediaError(t)}}})],1)],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("28a5"),s("20d6"),s("bd86")),o=(s("7f7f"),s("9b02")),c=s.n(o),l=s("d634"),u=s("3c15"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-post__media__item-inner"},[e.isShowIconLock?s("span",{staticClass:"icn-lock"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"swiper-icon-unlocked",staticClass:"icon-price-free"})]):e._e(),"photo"===e.mediaItem.type?s("img",{class:{"img-responsive":1===e.visibleMediaWithoutAudio.length},attrs:{src:e.mediaItem[e.previewType],draggable:"false",alt:""},on:{"~error":function(t){return e.mediaError(t)}}}):e._e(),"gif"===e.mediaItem.type?s("post-gif",{attrs:{media:e.mediaItem,"is-linked":e.isLinked}}):"video"===e.mediaItem.type?s("post-video",{attrs:{media:e.mediaItem,"stream-id":e.post.streamId||0,"post-id":e.getPostId,"is-linked":e.isLinked},on:{changeVideoState:e.changeVideoState,"~videoError":function(t){return e.mediaError(t)}}}):e._e()],1)},p=[],h=(s("c5f6"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("figure",{staticClass:"post_img_big"},[s("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.visibilityChanged,expression:"visibilityChanged"},{name:"touch",rawName:"v-touch",value:e.togglePlaying,expression:"togglePlaying"}],staticClass:"post_gif"},[s("img",{staticClass:"img-responsive post_gif_preview",attrs:{alt:"",src:e.media.preview}}),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.isPlaying,expression:"!isPlaying"}],staticClass:"post_gif_play"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-play"})]),e.isPlaying&&!e.isVideo?s("img",{ref:"gifElement",staticClass:"post_gif_media",attrs:{src:e.mediaFull,alt:""}}):e._e(),e.isVideo?s("video",{ref:"videoElement",staticClass:"post_gif_media",attrs:{poster:e.media.preview,loop:"",muted:"",playsinline:""},domProps:{muted:!0}},[s("source",{attrs:{type:"video/mp4",src:e.mediaFull}})]):e._e()])])}),m=[],f={name:"PostGif",props:{media:{type:Object,required:!0}},data:function(){return{isPlaying:!1,playPromise:null}},computed:{isVideo:function(){return this.media.convertedToVideo||"mp4"===this.mediaFull.split("?").shift().split(".").pop().toLowerCase()},mediaFull:function(){return this.media.full?this.media.full:this.media.src}},methods:{togglePlayingCallback:function(e){var t=this;!e&&this.$refs.gifElement&&(this.$refs.gifElement.src=""),this.isPlaying=void 0!==e?e:!this.isPlaying,this.$nextTick((function(){if(t.isPlaying)if(t.isVideo){if(t.$refs.videoElement)try{t.playPromise=t.$refs.videoElement.play(),void 0!==t.playPromise&&t.playPromise.catch((function(){}))}catch(e){}}else t.$refs.gifElement.src=t.mediaFull;else t.isVideo&&t.playPromise&&t.playPromise.then((function(){if(t.$refs.videoElement)try{t.$refs.videoElement.pause()}catch(e){}t.playPromise=null})).catch((function(e){}))}))},togglePlaying:function(e){var t=this;this.$parent.toggleLikeMessage?(e&&(e.stopPropagation(),e.preventDefault()),this.$parent.toggleLikeMessage(e,(function(){t.togglePlayingCallback()}))):this.togglePlayingCallback()},visibilityChanged:function(e){this.togglePlayingCallback(e)}}},g=f,v=s("2877"),b=Object(v["a"])(g,h,m,!1,null,null,null),_=b.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:e.onWaypoint,options:e.intersectionOptions},expression:"{ active: true, callback: onWaypoint, options: intersectionOptions }"},{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:e.visibilityChanged,throttle:1e3,intersection:{rootMargin:"2000px 0px"}},expression:"{\n    callback: visibilityChanged,\n    throttle: 1000,\n    intersection: {\n      rootMargin: '2000px 0px'\n    },\n  }"}],key:e.keyUnique,ref:"videoWrapper",staticClass:"video-wrapper"},[s("div",{staticClass:"blurred-poster",style:"background-image: url("+e.media.preview+")"}),e.showPlaceholder?s("div",{staticClass:"video-js video-js-placeholder-wrapper",on:{click:e.mountPlayer}},[s("div",{staticClass:"vjs-tech placeholder-preview",class:{"no-placeholder-preview":!e.hasPreview}},[e.hasPreview?s("img",{staticClass:"g-invisible",attrs:{src:e.media.preview,width:e.mediaWidth,height:e.mediaHeight,alt:""},on:{load:e.placeholderImageLoaded,error:e.placeholderImageError}}):e._e()]),s("div",{staticClass:"vjs-poster show",style:"background-image: url("+e.media.preview+")",attrs:{"aria-disabled":"false"}}),e.showPlaceholderRunning?e._e():s("button",{staticClass:"vjs-big-play-button",attrs:{type:"button",title:"Play Video","aria-disabled":"false"}},[s("span",{staticClass:"vjs-icon-placeholder",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"vjs-control-text",attrs:{"aria-live":"polite"}},[e._v(" Play Video ")])])]):e._e(),e.showPlayer?s("video",{ref:"video",staticClass:"video-js vjs-default-skin",attrs:{width:e.mediaWidth,height:e.mediaHeight,preload:"none",playsinline:"",controls:"",controlsList:"nodownload",poster:e.media.preview,"data-setup":"{}",autoplay:e.autoplay}},[e.hasQuality?e._l(e.sources,(function(t,i){return s("source",{key:i,attrs:{type:e.getMediaSourceType(t),src:t,label:i,selected:i==e.defaultSourceSize}})})):s("source",{attrs:{type:e.mediaSourceType,src:e.mediaSource}})],2):e._e(),e.streamId?s("div",{ref:"actions",staticClass:"b-post__streaming-actions"},[s("div",{ref:"comments",staticClass:"b-streaming__comments",class:{"m-overflowed":e.limitReached}},e._l(e.comments,(function(t){return s("div",{key:t.time,staticClass:"b-streaming__comment"},[s("span",{staticClass:"g-avatar m-w36"},[s("image-thumb",{attrs:{user:t.data.user,size:"c50"}})],1),s("div",{staticClass:"b-username-row m-width-limit"},[s("span",{staticClass:"b-username"},[s("span",{staticClass:"g-user-name"},[e._v(" "+e._s(t.data.user.name)+" ")])])]),s("span",{staticClass:"b-streaming__comment__text",domProps:{innerHTML:e._s(t.data.comment)}})])})),0),e._l(e.likes,(function(e){return s("streaming-like",{key:e.time,attrs:{"start-left":e.left,"start-top":e.top}})}))],2):e._e(),e.needPreventHolder?s("div",{directives:[{name:"touch",rawName:"v-touch",value:e.clickToPlay,expression:"clickToPlay"}],staticClass:"video-wrapper-prevent-holder"}):e._e()])},y=[],k=s("77c1"),C=s.n(k),O=s("13ea"),S=s.n(O),P=s("63ea"),x=s.n(P),j=s("0f32"),$=s.n(j),T=s("f0e2"),D=s("9957"),I=s("e66b"),E=s("c393");function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}s("deae")(T["default"]),T["default"].log.level("off");var F={name:"PostVideo",components:{ImageThumb:I["a"],StreamingLike:E["a"]},props:{media:{type:Object,required:!0},postId:{type:Number,default:0},streamId:{type:Number,default:0},messageId:{type:Number,default:0}},data:function(){return{player:null,comments:[],likes:[],playerTime:0,limitReached:!1,needPreventHolder:!1,isPlaying:!1,isInFullScreenMode:!1,keyUnique:+new Date,videoError:!1,intersectionOptions:{threshold:[.5,.75]},showPlaceholder:!0,showPlaceholderRunning:!1,showPlayer:!1,hasPreview:!0,autoplay:!1}},computed:A(A({},Object(l["T"])(["getPost"])),{},{post:function(){if(this.postId){var e=this.getPost(this.postId);if(e.length)return e[0]}return{}},mediaSource:function(){return this.media.source||this.media.full?this.media.source?this.media.source.source:this.media.full:this.media.video&&this.media.video.mp4?this.media.video.mp4:this.media.src},sources:function(){return C()(A(A({},this.media.videoSources),{},{original:this.mediaSource}))},hasQuality:function(){return!S()(this.media.videoSources)},defaultSourceSize:function(){return this.media.videoSources["720"]?"720":"original"},mediaSourceType:function(){return this.fileType(this.mediaSource)},mediaWidth:function(){return this.media.source&&this.media.source.width&&this.media.source.width>0?this.media.source.width:""},mediaHeight:function(){return this.media.source&&this.media.source.height&&this.media.source.height>0?this.media.source.height:""}}),watch:{comments:function(){var e=this;this.$nextTick((function(){e.limitReached=!!e.$refs.comments&&e.$refs.comments.scrollHeight>e.$refs.comments.clientHeight,e.limitReached&&e.comments.pop()}),0)},media:function(e,t){var s=this;x()(e,t)||(this.keyUnique=+new Date,this.$nextTick((function(){s.dispose(),s.initialize()})))}},mounted:function(){this.$root.$on("changePostMediaType",this.changePostMediaType)},beforeDestroy:function(){this.$root.$off("changePostMediaType",this.changePostMediaType),this.player&&this.dispose()},methods:A(A(A({},Object(l["S"])(["fetchStreamEvents"])),Object(l["k"])(["setIsMediaPlayed"])),{},{visibilityChanged:function(e){!this.showPlayer||e||this.isPlaying||this.setShowPlaceholder()},placeholderImageLoaded:function(){var e=this;this.$refs.videoWrapper&&this.$nextTick((function(){e.$refs.videoWrapper.style.cssText=""}))},placeholderImageError:function(){this.hasPreview=!1},mountPlayer:function(){var e=this;if(this.$refs.videoWrapper){var t=this.$refs.videoWrapper.offsetHeight;this.$refs.videoWrapper.style.cssText="height: ".concat(t,"px")}this.autoplay=!0,this.showPlayer=!0,this.showPlaceholderRunning||this.$nextTick((function(){e.initialize()})),this.showPlaceholderRunning=!0},getMediaSourceType:function(e){return this.fileType(e)},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e))+e},insertStreamPostComment:function(e){var t=this,s=this.comments.indexOf(e);-1==s&&(0==this.comments.length||this.comments[0].time<e.time)&&(e.commentTimeout&&(clearTimeout(e.commentTimeout),e.commentTimeout=null),e.commentTimeout=setTimeout((function(){e.commentTimeout=null;var s=t.comments.indexOf(e);-1!==s&&t.comments.splice(s,1)}),6e4),this.comments.unshift(e))},insertStreamPostLike:function(e){var t=this;e.left="0px",e.top="100%";var s=this.$refs.actions,i=Math.round(e.data.x*s.offsetWidth),r=Math.round(e.data.y*s.offsetHeight);i&&r&&(e.left=i-25,e.top=r+40),-1==this.likes.indexOf(e)&&(this.likes.push(e),setTimeout((function(){t.likes.shift()}),1e3))},timeUpdateThrottled:$()((function(){this.timeUpdate()}),1e3),timeUpdate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.streamId&&this.player&&!this.player.ended()){var s=this.player.currentTime(),i=this.playerTime,r=this.post.streamEvents.filter((function(e){return s-60<=e.time&&e.time<=s}));this.playerTime=s,t&&this.clearStreamComments(),r.length&&r.forEach((function(t){switch(t.type){case"comment":e.insertStreamPostComment(t);break;case"like":t.time>=i&&e.insertStreamPostLike(t);break;default:break}}))}},firstPlay:function(){this.needPreventHolder=!1,this.streamId&&this.fetchStreamEvents({streamId:this.streamId,postId:this.postId})},clearStreamComments:function(){this.comments.forEach((function(e){e.commentTimeout&&(clearTimeout(e.commentTimeout),e.commentTimeout=null)})),this.comments=[]},seekStreamComments:function(){this.timeUpdate(!0)},initialize:function(){var e=this;this.$refs.video&&(T["default"].registerComponent("PlayToggle",T["default"].extend(T["default"].getComponent("PlayToggle"),{handleClick:function(){try{this.player_.paused()?this.player_.play().catch((function(e){})):this.player_.pause()}catch(e){}}})),this.player=Object(T["default"])(this.$refs.video,{controlBar:{seekToLive:!1}},(function(){e.showPlaceholder=!1,e.$root.$emit("video:player:init",{postId:e.postId})})),this.player.controlBar.addClass("swiper-no-swiping"),this.hasQuality&&this.player.controlBar.addChild("QualitySelector"),this.needPreventHolder=!!this.messageId,this.player.on("timeupdate",this.timeUpdateThrottled),this.player.on("firstplay",this.firstPlay),this.player.on("seeked",this.seekStreamComments),this.player.on("ended",this.clearStreamComments),this.player.on("fullscreenchange",this.toggleBodyScroll),this.player.on("playing",this.setVideoPlaying),this.player.on("pause",this.setVideoPaused),this.player.on("error",this.triggerVideoError),this.player.on("touchstart",this.togglePlaying))},togglePlaying:function(e){"VIDEO"===e.target.nodeName&&(this.isPlaying?this.player.pause():this.player.play())},toggleBodyScroll:function(){this.isInFullScreenMode=!!document.fullscreenElement||!!document.webkitCurrentFullScreenElement,this.isInFullScreenMode?window.disableBodyScroll(!0):window.enableBodyScroll(!0)},setVideoPlaying:function(){this.$refs.videoWrapper&&(this.$refs.videoWrapper.style.cssText=""),this.isPlaying=!0,this.$emit("changeVideoState",this.isPlaying)},setVideoPaused:function(){this.isPlaying=!1,this.$emit("changeVideoState",this.isPlaying)},setShowPlaceholder:function(){var e,t=this;this.$refs.videoWrapper&&(e=this.$refs.videoWrapper.offsetHeight),this.player&&this.dispose(),this.showPlaceholderRunning=!1,this.showPlaceholder=!0,this.showPlayer=!1,this.keyUnique=+new Date,this.$refs.videoWrapper&&e&&this.$nextTick((function(){t.$refs.videoWrapper.style.cssText="height: ".concat(e,"px")}))},dispose:function(){this.player&&(this.player.off&&(this.player.off("timeupdate",this.timeUpdateThrottled),this.player.off("firstplay",this.firstPlay),this.player.off("seeked",this.seekStreamComments),this.player.off("ended",this.clearStreamComments),this.player.off("fullscreenchange",this.toggleBodyScroll),this.player.off("playing",this.setVideoPlaying),this.player.off("pause",this.setVideoPaused),this.player.off("error",this.triggerVideoError),this.player.off("touchstart",this.togglePlaying)),this.player.dispose(),this.player=null),this.autoplay=!1,this.needPreventHolder=!1,this.isInFullScreenMode=!1},fileType:function(e){var t=D["a"].getType(e);return"video/mpeg"!==t&&"video/quicktime"!==t&&t||(t="video/mp4"),t},onWaypoint:function(e){var t=e.going;t===this.$waypointMap.GOING_OUT&&!this.isInFullScreenMode&&this.player&&this.isPlaying&&this.player.pause()},changePostMediaType:function(e){e===this.postId&&this.player&&this.isPlaying&&this.player.pause()},clickToPlay:function(e){var t=this;this.$parent.toggleLikeMessage&&(e.stopPropagation(),e.preventDefault(),this.$parent.toggleLikeMessage(e,(function(){t.player.play(),t.setIsMediaPlayed({messageId:t.messageId,value:!0})})))},triggerVideoError:function(){if(!this.videoError){var e=this.player.error();e&&4===e.code&&(this.videoError=!0,this.$emit("videoError"))}}})},U=F,L=(s("16eb"),Object(v["a"])(U,w,y,!1,null,null,null)),N=L.exports;function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var q={name:"PostMediaItem",components:{PostGif:_,PostVideo:N},mixins:[u["a"]],props:{post:{type:Object,required:!0},mediaItem:{type:Object,required:!0},previewType:{type:String,required:!0},isLinked:{type:Boolean,default:!1},message:{type:Object,default:function(){}},template:{type:Object,default:function(){}}},data:function(){return{isMediaError:!1}},computed:B(B({},Object(l["b"])(["authUserId"])),{},{isPostUser:function(){return this.post.author===this.authUserId},isShowIconLock:function(){return this.privatePost&&this.preview.indexOf(this.mediaItem.id)>=0&&(this.isPostUser&&!this.isLinked||this.isChats)},isChats:function(){return"Chat"===this.$route.name||"SettingsMessaging"===this.$route.name||"ScheduleMessage"===this.$route.name},getPostId:function(){return this.post?Number(this.post.id):this.message?Number(this.message.id):Number(this.template.id)}}),methods:{changeVideoState:function(e){this.$emit("changeVideoState",e)},mediaError:function(){this.isMediaError||(this.isMediaError=!0,this.$emit("mediaError"))}}},H=q,W=Object(v["a"])(H,d,p,!1,null,null,null),V=W.exports,z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"switcher-media-content"},e._l(e.visibleMediaWithoutAudioByType,(function(t,i){return s("div",{key:i,staticClass:"switcher-media-content__btn",class:{"active-btn":e.currentIndex===i}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],class:{"icon-media":"photo"===t.type,"icon-video":!e.isStream&&"video"===t.type,"icon-live":e.isStream&&"video"===t.type,"icon-gif":"gif"===t.type}}),t.media.length>1?[e.currentIndex===i?s("span",{staticClass:"switcher-media-content__val"},[s("span",[e._v(e._s(e.currentMediaTypeItemNum))]),e._v(" / ")]):e._e(),s("span",{staticClass:"switcher-media-content__val-total"},[e._v(" "+e._s(t.media.length)+" ")])]:e.getDuration(i)?s("span",{staticClass:"switcher-media-content__val"},[e._v(" "+e._s(e.getDuration(i))+" ")]):e._e()],2)})),0)},Y=[],G={name:"PostContentSwitcher",mixins:[u["a"]],props:{post:{type:Object,required:!0},currentMediaTypeItemNum:{type:Number,required:!0},currentIndex:{type:Number,required:!0},isLinked:{type:Boolean,default:!1}},methods:{changeType:function(e){this.isLinked||this.$emit("changeType",e)}}},Q=G,J=Object(v["a"])(Q,z,Y,!1,null,null,null),K=J.exports,X=s("9d30"),Z=s("7618"),ee=s("ab39"),te=s("8f95"),se=s("2ef0"),ie="/theme/onlyfans/spa/faceApi/models",re=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(ee["d"].tinyFaceDetector.isLoaded){e.next=3;break}return e.next=3,ee["c"](ie);case 3:return s=512,i=new ee["a"]({inputSize:s,scoreThreshold:.4}),e.next=7,ee["b"](t,i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=Object(Z["a"])(t),"string"!==s||!/^blob/.test(t)){e.next=7;break}return i=new Image,i.src=t,e.abrupt("return",i);case 7:if(/^blob/.test(t)&&/^blob/.test(t.src)){e.next=15;break}return r="string"===s?t:t.src,e.next=11,new Promise((function(e,t){var s=new XMLHttpRequest;s.responseType="arraybuffer",s.onload=function(t){e(s.response)},s.onerror=function(e){t(e)},s.open("GET",r,!0),s.send()}));case 11:return a=e.sent,n=new Image,n.src=window.URL.createObjectURL(new Blob([a])),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=[],oe={data:function(){return{callStack:[],pointer:0,isWorking:!1}},methods:{checkFaces:function(e){var t=Object(te["a"])();return ne.push({defered:t,done:!0,img:e}),this.startCheck(),t.promise},startCheck:Object(se["debounce"])((function(){this.pointer=0,this.isWorking=!1,this.run()}),200),run:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ne[this.pointer]||this.isWorking){e.next=13;break}return this.isWorking=!0,e.next=4,ae(ne[this.pointer].img);case 4:return t=e.sent,e.next=7,re(t);case 7:if(s=e.sent,ne[this.pointer]){e.next=10;break}return e.abrupt("return");case 10:ne[this.pointer].done=!0,ne[this.pointer].defered.resolve(s.length),ne.length&&(this.pointer+=1,this.isWorking=!1,this.run());case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),stopAndClearFacesChecks:function(){ne.forEach((function(e){e&&!1===e.done&&e.defered.resolve(0)})),ne=[],this.pointer=0,this.isWorking=!1}}};function ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ce(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ue={name:"PostMedia",components:{PostMediaItem:V,Switcher:K},mixins:[u["a"],X["a"],oe],props:{post:{type:Object,required:!0},isLinked:{type:Boolean,default:!1},message:{type:Object,default:function(){}}},data:function(){return{isPlaying:!1,currentMediaTypeItemNum:1,currentContentIndex:0,player:null,mediaOptions:{autoHeight:!1,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},noSwipingClass:"swiper-no-swiping"},options:{},isVideoSlide:!1,sliderIsMoving:!1,isMediaError:!1,isBlurFoto:!1}},mounted:function(){var e=this;"Chat"===this.$route.name&&this.toggleIsBlurFoto();var t=(new Date).getTime(),s=new Date(this.post.postedAt).getTime(),i=(t-s)/1e3/60;if(!(i>5||!this.isPostUser||"Post"!==this.$route.name||this.post.linkedUsers.length>0||this.post.mentionedUsers.length>0))for(var r in this.visibleMediaWithoutAudio){var a=this.visibleMediaWithoutAudio[r];if("photo"!==a.type||!a.preview)return;this.checkFaces(a.preview).then((function(t){t<2||(e.stopAndClearFacesChecks(),e.$emit("faceDetection",t))}))}},computed:le(le(le({},Object(l["b"])(["authUser"])),Object(l["Ob"])(["getUser"])),{},{isOpen:{get:function(){return this.photoSwipeIsOpen},set:function(e){e?(this.$root.$on("closePhotoSwipe",this.hidePhotoSwipe),this.$root.$once("imgLoadErrorPhotoSwipe",this.mediaError)):(this.$root.$off("closePhotoSwipe",this.hidePhotoSwipe),this.$root.$off("imgLoadErrorPhotoSwipe",this.mediaError)),this.photoSwipeSetItems(e?this.photoSwipeItems:[]),this.photoSwipeSetOptions(e?this.options:{}),this.photoSwipeSetOpen(e)}},swiper:function(){return c()(this,"$refs.postSwiper.$swiper")},onlyVideo:function(){return this.visibleVideos.length&&!this.visiblePhotos.length&&!this.visibleGifs.length},oneVideo:function(){return this.onlyVideo&&1===this.visibleVideos.length},onlyGifs:function(){return this.visibleGifs.length&&!this.visiblePhotos.length&&!this.visibleVideos.length},oneGif:function(){return this.onlyGifs&&1===this.visibleGifs.length},photoSwipeItems:function(){var e=this;return this.visibleMediaWithoutAudio.map((function(t){if("video"===t.type||"gif"===t.type&&e.isVideo(t))return{media:t};var s=t.source||t.info||{},i=s.source;return"string"!==typeof i&&(i=t.src),{thumbnail:t.preview,src:i,w:s.width||0,h:s.height||0,postId:e.post.id}}))},isMineMessage:function(){return this.message&&this.message.fromUser===this.authUserId}}),watch:{visibleMediaWithoutAudio:{handler:function(e){e&&e.length&&(this.isVideoSlide="video"===e[0].type)},immediate:!0}},created:function(){this.setLoop()},updated:function(){this.setLoop()},beforeDestroy:function(){this.$root.$off("closePhotoSwipe",this.hidePhotoSwipe),this.$root.$off("imgLoadErrorPhotoSwipe",this.mediaError),this.$root.$off("destroyPhotoSwipe",this.gallerySlideClicked)},methods:le(le({},Object(l["S"])(["fetchPost"])),{},{setLoop:function(){this.visibleVideos.length||this.visibleGifs.length?this.mediaOptions.loop=!1:this.mediaOptions.loop=!0},gallerySlideClicked:function(){this.$root.$off("destroyPhotoSwipe",this.gallerySlideClicked);var e=c()(this,"swiper.realIndex")||0,t=c()(this,"visibleMediaWithoutAudio[".concat(e,"].type"));"video"!==t&&"gif"!==t&&this.showPhotoSwipe(e)},showPhotoSwipe:function(e){this.isBlurFoto||(this.$set(this.options,"index",e),this.isOpen=!0)},hidePhotoSwipe:function(){this.isOpen=!1},findIndex:function(e){return this.visibleMediaWithoutAudio.findIndex((function(t){return t.id===e[0].id}))},setMediaType:function(e){var t=this.visibleMediaWithoutAudioByType[e].media;if(this.currentContentIndex!==e){if(this.swiper){var s=this.mediaOptions.loop?"slideToLoop":"slideTo";this.swiper[s](this.findIndex(t))}this.currentContentIndex=e}},changeVideoState:function(e){this.isPlaying=e},mediaSource:function(e){return e.source||e.full?e.source?e.source.source:e.full:e.video&&e.video.mp4?e.video.mp4:e.src},isVideo:function(e){return e.convertedToVideo||"mp4"===this.mediaSource(e).split("?").shift().split(".").pop().toLowerCase()},slideChange:function(){var e=this;this.$root.$emit("changePostMediaType",this.post.id);var t=c()(this,"swiper.realIndex"),s=c()(this,"visibleMediaWithoutAudio[".concat(t,"].type"));this.isVideoSlide="video"===s,this.$nextTick((function(){var s=c()(e,"visibleMediaWithoutAudio[".concat(t,"].id")),i=e.visibleMediaWithoutAudioByType.findIndex((function(e){return e.media.some((function(e){return e.id===s}))})),r=c()(e,"visibleMediaWithoutAudioByType[".concat(i,"].media"));r&&r.length&&(e.currentMediaTypeItemNum=r.findIndex((function(e){return e.id===s}))+1,i!==e.currentContentIndex&&(e.currentContentIndex=i))}))},sliderMove:function(){this.sliderIsMoving=!0},touchEnd:function(){this.sliderIsMoving=!1},mediaError:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isMediaError){e.next=2;break}return e.abrupt("return");case 2:if(this.isMediaError=!0,"ScheduleMessage"!==this.$route.name&&"SettingsMessaging"!==this.$route.name){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.fetchPost({id:this.post.id});case 7:this.isOpen&&(this.$root.$once("destroyPhotoSwipe",this.gallerySlideClicked),this.isOpen=!1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),toggleIsBlurFoto:function(){var e=this.$route.params.chatId,t=this.getUser(e);this.isMineMessage||!1!==t.isRealPerformer&&t.isPerformer||(this.isBlurFoto=!0)}})},de=ue,pe=Object(v["a"])(de,i,r,!1,null,null,null);t["a"]=pe.exports},"3c15":function(e,t,s){"use strict";s("8e6e"),s("ac6a"),s("456d"),s("20d6"),s("6762"),s("2fdb"),s("7f7f");var i=s("bd86"),r=s("c1df"),a=s.n(r),n=s("6edf"),o=s.n(n),c=s("c641"),l=s.n(c),u=s("2ef0"),d=s("4623"),p=s.n(d),h=s("d634");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}p()(a.a),t["a"]={name:"PostMediaMixin",props:{post:{type:Object,required:!0},isLinked:{type:Boolean,default:!1},message:{type:Object,default:function(){}},template:{type:Object,default:function(){}}},computed:f(f({},Object(h["b"])(["authUserId"])),{},{privatePost:function(){return this.message?!!this.message.price:this.template?!!this.template.price:!!this.post.price},isPostUser:function(){return this.message?this.message.fromUser===this.authUserId:this.post.author===this.authUserId},opened:function(){return"ScheduleMessage"===this.$route.name||("SettingsMessaging"===this.$route.name||(this.message?this.isPostUser:!(this.isLinked&&this.isPostUser&&this.privatePost)&&!!this.post.isOpened))},media:function(){return this.message?this.message.media||[]:this.templates?this.templates.media||[]:this.post.media||[]},lockedText:function(){return this.message?this.message.lockedText:this.post.lockedText},visibleMedia:function(){var e=this;return this.message&&!this.message.canPurchase||"ScheduleMessage"===this.$route.name||"SettingsMessaging"===this.$route.name||this.opened?this.media:this.hasPreview?this.media.filter((function(t){return e.preview.includes(t.id)})):[]},visibleMediaWithoutAudio:function(){return this.visibleMedia.filter((function(e){return"audio"!==e.type}))},visibleMediaWithoutAudioByType:function(){var e=[],t=o()(this.visibleMediaWithoutAudio,"type");return l()(t,(function(t,s){e.push({type:s,media:t})})),e},isStream:function(){return!!this.post.streamId},videos:function(){return this.media.filter((function(e){return"video"===e.type}))},video:function(){return this.videos.length?this.videos[0]:null},gifs:function(){return this.media.filter((function(e){return"gif"===e.type}))},gif:function(){return this.gifs.length?this.gifs[0]:null},photos:function(){return this.media.filter((function(e){return"photo"===e.type}))},videoIndex:function(){return this.visibleMedia.findIndex((function(e){return"video"===e.type||"gif"===e.type}))},visiblePhotos:function(){return this.visibleMediaWithoutAudio.filter((function(e){return"photo"===e.type}))},visibleVideos:function(){return this.visibleMediaWithoutAudio.filter((function(e){return"video"===e.type}))},visibleGifs:function(){return this.visibleMediaWithoutAudio.filter((function(e){return"gif"===e.type}))},photoCount:function(){return this.photos.length},audios:function(){return this.media.filter((function(e){return"audio"===e.type}))},audio:function(){return this.audios.length?this.audios[0]:null},preview:function(){return this.message?null!==this.message.previews&&void 0!==this.message.previews?void 0!==this.message.previews.length?this.message.previews:[this.message.vc-ps-previews__label]:[]:this.post.previews?null!==this.post.previews&&void 0!==this.post.previews?void 0!==this.post.previews.length?this.post.previews:[this.post.vc-ps-previews__label]:[]:null!==this.post.preview&&void 0!==this.post.preview?void 0!==this.post.preview.length?this.post.preview:[this.post.preview]:[]},hasPreview:function(){var e=this;return this.preview.length&&this.media.filter((function(t){return e.preview.includes(t.id)})).length},hasMedia:function(){return this.message?this.message.media&&this.message.media.length:this.post.media&&this.post.media.length},hasGif:function(){return!!this.gif},hasVideo:function(){return!!this.video},hasPhoto:function(){return!!this.photoCount},hasAudio:function(){return!!this.audio},hasAudioVisible:function(){return!!this.visibleMedia.filter((function(e){return"audio"===e.type})).length},hasPoll:function(){return!this.message&&0!==this.post.voting.length},hasLockedPoll:function(){return!this.message&&(0===this.post.voting.length&&this.post.hasVoting)},hasAny:function(){return this.hasPhoto||this.hasVideo||this.hasAudio||this.hasPoll||this.hasGif||this.lockedText||this.hasLockedPoll},hasLockedText:function(){return this.lockedText},hasVideoDuration:function(){return this.video&&this.video.source&&this.video.source.duration},hasLockedVideoDuration:function(){return this.video&&this.video.source&&this.video.source.duration},hasGifDuration:function(){return this.gif&&this.gif.source&&this.gif.source.duration},hasAudioDuration:function(){return this.audio&&this.audio.source&&this.audio.source.duration},videoDuration:function(){return this.hasVideoDuration?a.a.duration(this.video.source.duration,"seconds").format():0},gifDuration:function(){return this.hasGifDuration?a.a.duration(this.gif.source.duration,"seconds").format():0},audioDuration:function(){return this.hasAudioDuration?a.a.duration(this.audio.source.duration,"seconds").format():0},mediaPreviewType:function(){var e=this;return this.visiblePhotos.length<2?"preview":this.visiblePhotos.some((function(t,s){var i=t.info&&t.info.source||{},r=i.width,a=i.height,n=e.visiblePhotos[0].info&&e.visiblePhotos[0].info.source||{};return!r||!a||!n||!n.width||!n.height||s&&(r/a).toFixed(2)!==(n.width/n.height).toFixed(2)}))?"squarePreview":"preview"}}),data:function(){return{videoLockedDuration:null,gifLockedDuration:null,audioLockedDuration:null}},methods:{getDuration:function(e){var t=this.visibleMediaWithoutAudioByType[e].media;return t&&t[0]&&t[0].source&&t[0].source.duration?a.a.duration(t[0].source.duration,"seconds").format():0},postLockedMedia:function(e){var t=u["filter"](this.media,{type:e,canView:!1}),s=["video","gifs","audio"],i=t.length;if(i){this["".concat(e,"LockedCount")]=i;var r=-1!==u["indexOf"](s,e);if(1===+i&&r){var n=u["get"](t[0],this.message?"duration":"source.duration",!1);if(n){var o=a.a.duration(this.message?t[0].duration:t[0].source.duration,"seconds").format();this["".concat(e,"LockedDuration")]=o}}return!0}return!1}}}},4:function(e,t){},"415f":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.changelog_profile_title"))+" ")])]),s("div",{staticClass:"b-faq-item m-active changelog-wrapper"},[e._l(e.groupedByMonth,(function(t,i){return[s("div",{key:i+"label",staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.getMonthSeparator(i))+" ")])]),s("div",{key:i,staticClass:"b-faq__item__content"},e._l(t,(function(t){return s("div",{key:t.id,staticClass:"r-toggle r-toggle_expanded",class:{"changelog-readed":!t.isNew}},[s("div",{staticClass:"r-toggle__heading"},[s("UtilsTime",{attrs:{date:t.date,type:"date-only"}})],1),s("div",{staticClass:"r-toggle__body",domProps:{innerHTML:e._s(t.content)}})])})),0)]})),e.changelog.length?s("infinite-loading",{attrs:{identifier:e.infiniteId},on:{infinite:e.infiniteHandler}},[s("div",{staticClass:"b-posts_preloader_container show_more_container",attrs:{slot:"spinner"},slot:"spinner"},[s("spinner-loader")],1),s("div",{attrs:{slot:"no-more"},slot:"no-more"}),s("div",{attrs:{slot:"no-results"},slot:"no-results"})]):e._e()],2)])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("75fc")),n=(s("a481"),s("96cf"),s("3b8d")),o=s("bd86"),c=s("e166"),l=s.n(c),u=s("6edf"),d=s.n(u),p=s("c1df"),h=s.n(p),m=s("d634"),f=s("e528"),g=s("33a44"),v=s("34b7");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={name:"SettingsChangelog",components:{InfiniteLoading:l.a,SpinnerLoader:f["a"],UtilsTime:g["a"]},data:function(){return{infiniteId:+new Date,changelog:[]}},computed:_(_({},Object(m["gb"])(["changelogUpdates"])),{},{groupedByMonth:function(){var e=d()(this.changelog,(function(e){return h()(e.date).startOf("month").format()}));return e}}),watch:{changelogUpdates:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t>0)){e.next=9;break}return e.prev=1,e.next=4,this.fetchChangelog();case 4:this.setChangelogUpdates(0),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("sm"!==this.$mq){e.next=3;break}return this.$router.replace({name:"SettingsProfile"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,this.fetchChangelog();case 6:this.setChangelogUpdates(0),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](3);case 11:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(){return e.apply(this,arguments)}return t}(),methods:_(_({},Object(m["fb"])(["setChangelogUpdates"])),{},{getMonthSeparator:function(e){return h()(e).format("MMMM")},fetchChangelog:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},s=t.limit,i=t.offset,e.prev=1,e.next=4,Object(v["g"])({limit:s,offset:i});case 4:r=e.sent,i&&i>0?this.changelog=[].concat(Object(a["a"])(this.changelog),Object(a["a"])(r)):(this.changelog=r,this.infiniteId+=1),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](1),e.t0;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),infiniteHandler:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchChangelog({offset:this.changelog.length});case 2:s=e.sent,s&&s.length&&10===s.length?t.loaded():t.complete();case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},y=w,k=s("2877"),C=Object(k["a"])(y,i,r,!1,null,null,null);t["default"]=C.exports},"418f":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-offer-wrapper"},[s("div",{staticClass:"b-offer-join"},[s("div",{staticClass:"b-offer-join__content"},[s("span",{staticClass:"g-icon-info m-icon-sm m-with-round-hover"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:e.$t("message.normal_subscription_price",{PRICE:e.priceHuman(e.user.subscribePrice)}),expression:"$t('message.normal_subscription_price', {PRICE: priceHuman(user.subscribePrice)})",modifiers:{enabled:!0}}],staticClass:"icon-info"})]),s("div",{staticClass:"b-offer-join__details"},[e.bundle.discount?[e._v(e._s(e.bundle.discount)+"% "+e._s(e.$t("message.discount_bundle_off"))+" ")]:e._e(),s("span",{staticClass:"b-amount-price m-num",class:{"big-space":!!e.bundle.discount}},[e._v(" $"+e._s(e.bundle.price.toFixed(2).replace(".00",""))+" ")]),e._v(" for "+e._s(e.bundle.duration)+" "+e._s(1===e.bundle.duration?"month":"months")+" ")],2)]),e.isAuthUser?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"b-btn-remove",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),function(t){e.doDeleteBundle(e.bundle.id,t)}(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close",attrs:{"extra-class":"m-aligned-top"}})]):e._e(),e.isAuthUser?e._e():s("div",{staticClass:"b-offer-join__btn"},[s("div",{staticClass:"g-btn m-rounded m-uppercase m-block",attrs:{role:"button"},on:{click:function(t){return e.bundleClickHandler(e.bundle)}}},[s("span",{domProps:{innerHTML:e._s(e.subscribeText)}})])])]),s("modal-confirm",{attrs:{"modal-show":e.buyBundleConfirmShowFirst,title:e.$t("message.buy_bundle_confirm_title"),text:e.$t("message.buy_bundle_confirm_desc",{DATE:e.expiredDateHuman}),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.buyBundleConfirmShowFirst=t},"update:modal-show":function(t){e.buyBundleConfirmShowFirst=t},"on-agree":function(t){e.buyBundleConfirmShowSecond=!0}}}),s("modal-confirm",{attrs:{"modal-show":e.buyBundleConfirmShowSecond,title:e.$t("message.buy_bundle_confirm_title"),text:e.$t("message.are_you_sure"),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.buyBundleConfirmShowSecond=t},"update:modal-show":function(t){e.buyBundleConfirmShowSecond=t},"on-agree":e.buyBundle}}),e.isAuthUser?s("modal-confirm",{attrs:{"modal-show":e.deleteBundleConfirmShow,title:e.$t("message.delete_subscription_bundle"),text:e.$t("message.are_you_sure"),"agree-btn":this.$i18n.t("message.confirm_yes_button"),"close-on-cancel":"","close-on-agree":""},on:{"update:modalShow":function(t){e.deleteBundleConfirmShow=t},"update:modal-show":function(t){e.deleteBundleConfirmShow=t},"on-agree":e.agreeDeleteBundle}}):e._e()],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("a481"),s("bd86")),o=s("c1df"),c=s.n(o),l=s("9df8"),u=(s("9b02"),s("d634")),d=s("313e"),p=s("8b3f"),h=s("e057"),m=s("ce23"),f=s("d075"),g=s("1db1"),v=s("30ba");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var w={name:"Bundle",components:{ModalBundle:d["a"],ModalConfirm:p["a"]},props:{bundle:{required:!0}},mixins:[h["a"],m["a"],g["a"],v["a"],l["c"]],data:function(){return{disable:!1,bundleId:void 0,bundleDiscount:void 0,bundleDuration:void 0,deleteBundleConfirmShow:!1,buyBundleConfirmShowFirst:!1,buyBundleConfirmShowSecond:!1,collapsed:!1}},computed:_(_(_(_({},Object(u["Ob"])(["userId","user"])),Object(u["b"])(["authUser"])),Object(u["Jb"])(["getSubscribe"])),{},{expiredDateHuman:function(){return this.subscribe?c()(this.subscribe.expiredAt).format("MMM D, YYYY"):""},subscribe:function(){return this.getSubscribe(this.userId)},subscribeText:function(){return this.user.subscribedBy?this.$i18n.t("message.bundle_label_btn",{AMOUNT:this.bundle.price.toFixed(2).replace(".00","")}):this.$i18n.t("message.subscription_promo_subscribe_price_full_button_new_formatted_ed2",{PRICE:"$"+this.bundle.price.toFixed(2).replace(".00","")})}}),mounted:function(){this.$root.$on("buyBundle",this.buyBundle);try{this.collapsed=!(this.bundles.length||this.isAuthUser)||null!==localStorage.getItem("collapsedBundle")&&"true"===localStorage.getItem("collapsedBundle")}catch(e){}},beforeDestroy:function(){this.$root.$off("buyBundle",this.buyBundle)},methods:_(_(_(_(_({},Object(u["g"])(["deleteBundle"])),Object(u["Ib"])(["updateSubscribe"])),Object(u["Nb"])(["fetchSubscriptionsCount"])),Object(u["Sb"])(["setModalUser"])),{},{openModalBundle:function(e){var t=this;this.setModalUser({userId:this.userId}),this.$nextTick((function(){t.$root.$emit("bv::show::modal:ModalBundle:setBundle",e),t.$root.$emit("bv::show::modal","ModalBundle")}))},doDeleteBundle:function(e,t){t.preventDefault(),t.stopPropagation(),this.disable||this.isAuthUser&&(this.bundleId=e,this.deleteBundleConfirmShow=!0)},agreeDeleteBundle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.bundleId,this.bundleId=void 0,!this.disable){e.next=4;break}return e.abrupt("return");case 4:return this.disable=!0,e.next=7,this.deleteBundle(t);case 7:this.disable=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),bundleClickHandler:function(e){var t=this;this.bundleId=e.id,this.isAuthUser?this.openModalBundle(e):this.canPayToUser?this.user.subscribedBy?this.buyBundleConfirmShowFirst=!0:(this.setModalUser({userId:this.userId}),this.$nextTick((function(){t.$root.$emit("bv::show::modal","ModalSubscribe"),t.$nextTick((function(){t.$root.$emit("ModalSubscribeBundleShow",e)}))}))):this.$router.push({name:"Payments"})},buyBundle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$root.$emit("bv::hide::modal","ModalSubscribe"),this.bundleId){e.next=3;break}return e.abrupt("return");case 3:return t=this.user.id,s=Object(f["b"])(t),e.next=7,this.makePayments({paymentType:"subscribe",userId:t,bundleId:this.bundleId,recommender:s,amount:this.bundle.price},this.buyBundle);case 7:if(i=e.sent,!i||!i.id){e.next=16;break}return t&&Object(f["c"])(t),this.updateSubscribe(i),this.fetchSubscriptionsCount(),e.next=14,this.fetchProfileData(t);case 14:this.$bvToast.toast(this.$root.$i18n.t("message.bundle_paid_thankful_toast",{DATE:c()(i.subscribedByData.renewedAt).format("MMM D, YYYY")}),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}),this.$root.$emit("bundle:was:bought");case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},y=w,k=s("2877"),C=Object(k["a"])(y,i,r,!1,null,null,null);t["a"]=C.exports},4683:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return void 0!==e.user.payerRating&&null!==e.user.payerRating?s("span",{directives:[{name:"b-popover",rawName:"v-b-popover",value:{content:e.content,placement:e.place,html:!0,trigger:"hover focus",customClass:"m-payer-rating"},expression:"{\n    content,\n    placement: place,\n    html: true,\n    trigger: 'hover focus',\n    customClass: 'm-payer-rating',\n  }"}],staticClass:"g-user__rating",attrs:{tabindex:"0"},on:{click:[function(e){e.preventDefault()},function(e){e.stopPropagation()}]}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],class:"icon-star"+(parseFloat(e.user.payerRating)+1)})]):e._e()},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("a481"),s("bd86")),n=s("d634");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={name:"PayerRating",props:{user:{type:Object,required:!0},placement:{type:String}},data:function(){return{place:this.placement||"topright"}},computed:c(c({},Object(n["b"])(["authUserId"])),{},{content:function(){return this.authUserId===this.user.id?"".concat(this.$i18n.t("message.user_rating_title_new").replace(/\.$/,""),". ").concat(this.$i18n.t("message.user_rating_title_can_turn_off",{URL:"/my/settings"})):this.user.subscribedOnDuration?this.$i18n.t("message.user_rating_title_subscribed",{DURATION:this.user.subscribedOnDuration}):this.$i18n.t("message.user_rating_title_new")}})},u=l,d=s("2877"),p=Object(d["a"])(u,i,r,!1,null,null,null);t["a"]=p.exports},"47f3":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content m-helpers"},[e.authUser.canAddHelper?[s("div",{staticClass:"g-section__header m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_helpers_title"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.openSearch}},[e._v(" "+e._s(e.$t("message.add_helper_btn_label"))+" ")])]),s("modal-search-users",{on:{selectUser:e.selectUser}}),s("div",{staticClass:"b-users__list"},e._l(e.helpersIds,(function(e){return s("helpers-item",{key:e,attrs:{"user-id":e}})})),1)]:e._e(),e.authUser.helperAccess&&e.authUser.helperAccess.length?[s("div",{staticClass:"g-section__header m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_login_as_helper"))+" ")])]),s("div",{staticClass:"b-users__list"},e._l(e.authUser.helperAccess,(function(e){return s("model-item",{key:e,attrs:{"user-id":e}})})),1)]:e._e()],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("d634"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:"ModalSearchUsers",attrs:{id:"ModalSearchUsers","modal-class":"m-search-users",centered:"","hide-footer":!0},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("template",{slot:"modal-header"},[s("button",{staticClass:"b-modal__close",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),s("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("message.search_users"))+" ")])]),s("form",{staticClass:"b-search-form b-form",on:{submit:function(t){return t.preventDefault(),e.searchSubmit(t)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"b-search-form__input form-control",attrs:{name:"search",placeholder:e.$t("message.search_users"),type:"search",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},domProps:{value:e.query},on:{input:[function(t){t.target.composing||(e.query=t.target.value)},e.sanitize]}}),s("button",{staticClass:"g-page__header__btn",attrs:{type:"submit"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.search_button"),expression:"$t('message.search_button')"}],staticClass:"icon-search"})])]),e.user||e.searchUsers.length?s("div",{staticClass:"b-users"},[s("div",{ref:"UsersList",staticClass:"b-users__list m-native-custom-scrollbar"},[e._l(e.users,(function(t){return s("search-users-item",{key:t,attrs:{"user-id":t,"prevent-click":!0},on:{click:e.selectUser}})})),e.hasMore?s("div",{directives:[{name:"waypoint",rawName:"v-waypoint",value:{active:!0,callback:e.infiniteHandler,options:e.intersectionOptions},expression:"{ active: true, callback: infiniteHandler, options: intersectionOptions }"}],staticClass:"b-posts_preloader_container show_more_container"},[s("spinner-loader")],1):e._e()],2)]):e.loading?s("div",{staticClass:"b-posts_preloader_container show_more_container"},[s("spinner-loader")],1):s("p",{staticClass:"empty-message"},[e._v(" "+e._s(e.$t("message.no_users_found_message"))+" ")])],2)},l=[],u=(s("a481"),s("5df3"),s("4f7f"),s("75fc")),d=s("1686"),p=s.n(d),h=s("b047c"),m=s.n(h),f=s("9029"),g=s("5e23"),v=s("559d"),b=s("2612"),_=s("e528"),w=s("e166"),y=s.n(w),k=s("39a7");function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var S={name:"ModalSearchUsers",components:{SpinnerLoader:_["a"],SearchUsersItem:k["a"],InfiniteLoading:y.a},data:function(){return{show:!1,loading:!1,query:"",infiniteId:+new Date,offset:0,limit:10,intersectionOptions:{root:this.$refs.UsersList},hasMore:!1,user:0}},computed:O(O(O({},Object(o["Ob"])(["searchUsers"])),Object(o["b"])(["authUserId"])),{},{users:function(){var e=this,t=this.searchUsers.filter((function(t){return t!==e.authUserId}));return this.user&&(t=Object(u["a"])(new Set([this.user].concat(Object(u["a"])(t))))),t},scrollBar:function(){return f["isMobile"]?"div":"perfect-scrollbar"}}),watch:{query:{handler:m()((function(e,t){e!==t&&(e.length<3||this.searchSubmit())}),500)},show:function(){this.query="",this.setSearchUsers()}},methods:O(O(O({},Object(o["Nb"])(["fetchSearchUsers"])),Object(o["Sb"])(["setSearchUsers"])),{},{infiniteHandler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.going,s!==this.$waypointMap.GOING_IN||!this.hasMore){e.next=4;break}return e.next=4,this.getSearchUsers({more:!0});case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSearchUsers:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,a,n,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},s=t.more,i=void 0!==s&&s,!this.loading){e.next=3;break}return e.abrupt("return");case 3:if(this.loading=!0,this.offset=i?this.offset+this.limit:0,i){e.next=16;break}return this.user=0,e.prev=7,e.next=10,Object(b["L"])(this.query);case 10:r=e.sent,r&&r.id&&(a=Object(g["a"])(r,v["y"]),this.$store.commit("set",a,{root:!0}),r.id!==this.authUserId&&(this.user=r.id)),e.next=16;break;case 14:e.prev=14,e.t0=e["catch"](7);case 16:return e.next=18,this.fetchSearchUsers({more:i,query:this.query,offset:this.offset,limit:this.limit,all_users:1});case 18:n=e.sent,this.loading=!1,this.hasMore=!!n.length;case 21:case"end":return e.stop()}}),e,this,[[7,14]])})));function t(){return e.apply(this,arguments)}return t}(),searchSubmit:function(){this.getSearchUsers()},sanitize:function(e){this.searchField=p()(e.target.value).replace(/[%#@]/gm,"")},selectUser:function(e){this.$emit("selectUser",e),this.show=!1}})},P=S,x=s("2877"),j=Object(x["a"])(P,c,l,!1,null,null,null),$=j.exports,T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-users__item m-fans"},[s("div",{staticClass:"b-users__item__inner"},[s("div",{staticClass:"b-fans__item__header"},[s("router-link",{ref:"profileUrl",staticClass:"g-avatar online_status_class m-w36",class:{online:e.user.isOnline},attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[s("image-thumb",{attrs:{user:e.user,size:"c50"}})],1),s("div",{staticClass:"b-username-row"},[s("router-link",{ref:"profileUrl",staticClass:"b-username",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[s("div",{staticClass:"g-user-name",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.displayName||e.user.name))+" "),e.user.isVerified?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])])],1),s("div",{staticClass:"b-username-row"},[s("router-link",{ref:"profileUrl",staticClass:"g-user-realname__wrapper m-nowrap-text",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[e.user.displayName&&e.user.name!==""+e.userLoginPrefix+e.user.id?s("div",{staticClass:"g-user-realname"},[e._v(" "+e._s(e.user.name)+" ")]):e._e(),s("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1),s("button",{staticClass:"g-btn m-icon b-fans__btn-expand",attrs:{type:"button"},on:{click:e.deleteHelper}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],1),e._l(e.permissions,(function(t,i){return s("div",{key:i,staticClass:"g-select__wrapper"},[s("checkbox-toggle",{attrs:{name:i+"_"+e.userId,disabled:e.disabledPermission,label:t,value:e.helper&&e.helper.permissions.includes(i)},on:{input:function(t){return e.saveUserPermission(i,t)}}})],1)}))],2)])},D=[],I=(s("c5f6"),s("e66b")),E=s("1569");function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var F={name:"PerformerHelpersItem",components:{ImageThumb:I["a"],CheckboxToggle:E["a"]},props:{userId:{type:Number,required:!0}},data:function(){return{disabledPermission:!1}},computed:A(A(A(A({},Object(o["Ob"])(["getUser"])),Object(o["J"])(["helpersIds","permissions","getHelper"])),Object(o["eb"])(["userLoginPrefix"])),{},{user:function(){return this.getUser(this.userId)},helper:function(){return this.getHelper(this.userId)}}),methods:A(A(A({},Object(o["I"])(["setPerformerHelper"])),Object(o["K"])(["removeHelper"])),{},{saveUserPermission:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledPermission=!0,i=this.helper||{permissions:[]},r=i.permissions,s?r.push(t):r=r.filter((function(e){return e!==t})),e.next=5,this.setPerformerHelper({userId:this.userId,permissions:r});case 5:try{this.disabledPermission=!1,this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3})}catch(a){}case 6:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),deleteHelper:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.helper){e.next=7;break}return this.disabledPermission=!0,e.next=4,this.setPerformerHelper({userId:this.userId,permissions:[]});case 4:this.disabledPermission=!1,e.next=8;break;case 7:this.removeHelper(this.userId);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},U=F,L=Object(x["a"])(U,T,D,!1,null,null,null),N=L.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-users__item m-subscriptions"},[s("div",{staticClass:"b-users__item__inner"},[s("router-link",{attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[s("div",{staticClass:"b-users__item__cover__wrapper"},[s("img",{staticClass:"b-users__item__cover",attrs:{src:e.thumbSrcLink(e.user.header,e.user.headerThumbs,"w480","header"),alt:e.user.name},on:{error:function(t){return e.errorCover(t)}}})])]),s("div",{staticClass:"b-profile__header__user b-profile__user"},[s("router-link",{attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}},[s("span",{staticClass:"g-avatar online_status_class m-w150",class:{online:(!e.user.hasStream||e.user.isMuted)&&e.user.isOnline,"m-muted-by-me":e.user.isMuted}},[s("image-thumb",{attrs:{user:e.user,size:"c144"}}),e.user.hasStream&&!e.user.isMuted?s("span",{staticClass:"g-avatar__live-label"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-live"})]):e._e()],1)]),s("div",{staticClass:"b-profile__user__info"},[s("div",{staticClass:"b-profile__user__status"},[s("div",{staticClass:"b-profile__user__status__text"},[e.user.isOnline?[e._v(" "+e._s(e.$t("message.profile_available_now_label"))+" ")]:null!==e.user.lastSeen?[e._v(" "+e._s(e.$t("message.profile_last_seen_label"))+" "),e.user.lastSeen?s("utils-time",{attrs:{date:e.user.lastSeen,type:"feed"}}):[e._v(" "+e._s(e.$t("message.days_ago"))+" ")]]:e._e()],2)]),s("div",{staticClass:"b-profile__wrapper-name"},[s("div",{staticClass:"b-profile__names"},[s("div",{staticClass:"b-username-row"},[s("router-link",{staticClass:"b-username",attrs:{id:"profileUrl",to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[s("div",{staticClass:"g-user-name m-lg-size",class:{"m-verified":e.user.isVerified}},[e._v(" "+e._s(e._f("encodeHtml")(e.user.displayName||e.user.name))+" "),e.user.isVerified?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-verified",attrs:{"extra-class":"m-verified"}}):e._e()])]),e.authUser.isPerformer&&(e.user.subscribedOn||e.user.subscribedOnExpiredNow)?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.edit"),expression:"$t('message.edit')"}],staticClass:"g-btn m-flat m-gray b-user-name__btn-edit",class:{"m-active":e.user.displayName},attrs:{type:"button"},on:{click:function(t){return e.openCustomNamePopup(e.user.id)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-edit"})]):e._e()],1),s("div",{staticClass:"b-username-row"},[s("router-link",{staticClass:"g-user-realname__wrapper",attrs:{to:{name:"Profile",params:{userId:e.user.username}},"active-class":"","exact-active-class":""}},[e.user.displayName&&e.user.name!==""+e.userLoginPrefix+e.user.id?s("div",{staticClass:"g-user-realname"},[e._v(" "+e._s(e.user.name)+" ")]):e._e(),s("div",{staticClass:"g-user-username"},[e._v(" @"+e._s(e.user.username)+" ")])])],1)]),s("div",{staticClass:"b-group-profile-btns"},[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.copy_link_to_profile_btn"),expression:"$t('message.copy_link_to_profile_btn')"}],staticClass:"g-btn m-rounded m-border m-icon m-icon-only m-profile",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.doCopyProfileLink(t)}}},[s("router-link",{ref:"profileUrl",staticClass:"g-hidden",attrs:{"active-class":"","exact-active-class":"",to:{name:"Profile",params:{userId:e.user.username}}}}),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-share"})],1)])])])],1),s("div",{staticClass:"g-btn__group"},e._l(e.access.permissions,(function(t){return s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:function(s){return e.loginAsHelper(t)}}},[e._v(" "+e._s(e.$t("message.settings_login_as_helper_"+t))+" ")])})),0)],1)])},B=[],q=(s("7f7f"),s("1960")),H=s("33a44"),W=s("925c"),V=s("7e35");function z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var G={name:"PerformerHelpersItem",components:{ImageThumb:I["a"],UtilsTime:H["a"]},mixins:[W["a"],V["a"]],props:{userId:{type:Number,required:!0}},data:function(){return{disabledPermission:!1}},computed:Y(Y(Y(Y(Y({},Object(o["Ob"])(["getUser"])),Object(o["J"])(["helperAccess"])),Object(o["eb"])(["userLoginPrefix"])),Object(o["b"])(["authUser"])),{},{user:function(){return this.getUser(this.userId)},access:function(){return this.helperAccess(this.userId)}}),methods:{doCopyProfileLink:function(){var e=this,t=this.$refs.profileUrl.$el.href;this.user&&this.user.id!==this.authUser.id&&(this.user.subscribedBy||this.user.subscribedIsExpiredNow)&&(t+="?rec=".concat(this.authUser.id)),navigator.share?navigator.share({title:this.user.name,url:t}).catch(console.log):this.$copyText(t).then((function(){e.$bvToast.toast(e.$i18n.t("message.copy_link_to_profile_btn_copied"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"})}))},loginAsHelper:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=t,e.next="chats"===e.t0?3:"posts"===e.t0?5:7;break;case 3:return this.$router.push("/my/chats"),e.abrupt("break",8);case 5:return this.$router.push("/posts/create"),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:return e.next=10,Object(q["d"])(this.userId);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Q=G,J=Object(x["a"])(Q,R,B,!1,null,null,null),K=J.exports;function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var ee={name:"PerformerHelpers",components:{ModalSearchUsers:$,HelpersItem:N,ModelItem:K},computed:Z(Z({},Object(o["J"])(["helpersIds"])),Object(o["b"])(["authUser"])),mounted:function(){this.authUser.canAddHelper&&(this.getPerformerHelpers(),this.getPerformerHelpersPermissions())},methods:Z(Z(Z({},Object(o["I"])(["getPerformerHelpers","getPerformerHelper","getPerformerHelpersPermissions"])),Object(o["K"])(["setHelpers"])),{},{openSearch:function(){this.$root.$emit("bv::show::modal","ModalSearchUsers")},selectUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPerformerHelper(t);case 2:this.setHelpers({itemIds:[t],more:!0});case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()})},te=ee,se=Object(x["a"])(te,i,r,!1,null,null,null);t["default"]=se.exports},"4db7":function(e,t,s){"use strict";(function(e){s("c5f6"),s("7f7f"),s("6b54");t["a"]=function(t){var s=function(e){return document.querySelectorAll(e)[0]},i=function(e,t){return e&&e[t]||""},r=function(e,t){if(e)for(var s=e.length,i=0;i<s;i++)t(i,e[i])},a=function(e,t,s){var i=[t.toLowerCase(),"webkit".concat(t),"MS".concat(t),"o".concat(t)];r(i,(function(t,i){e[i]=s}))},n=function(e,t,s){var i=[s.toLowerCase(),"webkit".concat(s),"MS".concat(s),"o".concat(s)];r(i,(function(s,i){e.addEventListener(i,t,!1)}))},o=function(e,t){n(e,t,"AnimationEnd")},c=function(e,t){e.transitionEndEvent||(e.transitionEndEvent=!0,n(e,t,"TransitionEnd"))},l=function(e,t){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},u=function(){return"stories-"+Math.random().toString(36).substr(2,9)},d=function(e,n){var d=this,p=function(e,t){var s=function(e){return"undefined"!==typeof e};return t?s(n[e])&&s(n[e][t])?n[e][t]:b[e][t]:s(n[e])?n[e]:b[e]},h=function(e,t){var s="RequestFullScreen",i="requestFullScreen";try{t?(document.fullscreenElement||document["webkitFullscreenElement"]||document["mozFullScreenElement"]||document["msFullscreenElement"])&&(document.exitFullscreen?document.exitFullscreen().catch((function(){})):(document["mozCancelFullScreen"]||document["mozCancelFullScreen"])&&document["mozCancelFullScreen"]().catch((function(){}))):e[i]?e[i]():e["ms".concat(s)]?e["ms".concat(s)]():e["moz".concat(s)]?e["moz".concat(s)]():e["webkit".concat(s)]&&e["webkit".concat(s)]()}catch(r){console.warn("[Zuck.js] Can't access fullscreen")}},m=function(e,t,i,r){var n=t>0?1:-1,o=Math.abs(t)/s("#zuck-modal").offsetWidth*90*n;if(p("cubeEffect")){var c=0===o?"scale(0.95)":"scale(0.930,0.930)";if(a(s("#zuck-modal-content").style,"Transform",c),o<-90||o>90)return!1}var l=p("cubeEffect")?"rotateY(".concat(o,"deg)"):"translate3d(".concat(t,"px, 0, 0)");e&&(a(e.style,"TransitionTimingFunction",r),a(e.style,"TransitionDuration","".concat(i,"ms")),a(e.style,"Transform",l))},f=function(e,t,s,i){var r=0,a=0;if(e){if(e.offsetParent)do{if(r+=e.offsetLeft,a+=e.offsetTop,e===i)break}while(e=e.offsetParent);t&&(a-=t),s&&(r-=s)}return[r,a]};"string"===typeof e&&(e=document.getElementById(e)),e.id||e.setAttribute("id",u());var g=function(e){e=1e3*Number(e);var t=new Date(e),s=t.getTime(),i=((new Date).getTime()-s)/1e3,r=p("language","time"),a=[[60," ".concat(r["seconds"]),1],[120,"1 ".concat(r["minute"]),""],[3600," ".concat(r["minutes"]),60],[7200,"1 ".concat(r["hour"]),""],[86400," ".concat(r["hours"]),3600],[172800," ".concat(r["yesterday"]),""],[604800," ".concat(r["days"]),86400]],n=1;i<0&&(i=Math.abs(i),n=2);var o=0,c=void 0;while(c=a[o++])if(i<c[0])return"string"===typeof c[2]?c[n]:Math.floor(i/c[2])+c[1];var l=t.getDate(),u=t.getMonth(),d=t.getFullYear();return"".concat(l,"/").concat(u+1,"/").concat(d)},v=e.id,b={skin:"snapgram",avatars:!0,stories:[],backButton:!0,backNative:!1,paginationArrows:!1,previousTap:!0,autoFullScreen:!1,openEffect:!0,cubeEffect:!1,list:!1,localStorage:!0,callbacks:{onOpen:function(e,t){t()},onView:function(e){},onEnd:function(e,t){t()},onClose:function(e,t){t()},onNextItem:function(e,t,s){s()},onNavigateItem:function(e,t,s){s()}},template:{timelineItem:function(e){return'\n            <div class="story '.concat(!0===i(e,"seen")?"seen":"",'">\n              <a class="item-link" href="').concat(i(e,"link"),'">\n                <span class="item-preview">\n                  <img lazy="eager" src="').concat(p("avatars")||!i(e,"currentPreview")?i(e,"photo"):i(e,"currentPreview"),'" />\n                </span>\n                <span class="info" itemProp="author" itemScope itemType="http://schema.org/Person">\n                  <strong class="name" itemProp="name">').concat(i(e,"name"),'</strong>\n                  <span class="time">').concat(i(e,"lastUpdatedAgo"),'</span>\n                </span>\n              </a>\n\n              <ul class="items"></ul>\n            </div>')},timelineStoryItem:function(e){return'<a href="'.concat(i(e,"src"),'"\n                      data-link="').concat(i(e,"link"),'"\n                      data-linkText="').concat(i(e,"linkText"),'"\n                      data-time="').concat(i(e,"time"),'"\n                      data-type="').concat(i(e,"type"),'"\n                      data-loop="').concat(i(e,"loop"),'"\n                      data-length="').concat(i(e,"length"),'">\n                    <img loading="auto" src="').concat(i(e,"preview"),'" />\n                  </a>')},viewerItem:function(e,t){var s=i(e,"photo"),r='<img lazy="eager" class="profilePhoto" src="'.concat(s,'" />'),a='<div class="g-avatar__placeholder">\n            <svg class="g-icon" aria-hidden="true">\n              <use xlink:href="#icon-profile" href="#icon-profile"></use>\n            </svg>\n          </div>',n=s?r:a;return'<div class="story-viewer">\n                    <div class="head">\n                      <div class="left">\n                        '.concat(p("backButton")?'<a class="back">&lsaquo;</a>':"",'\n\n                        <span class="item-preview">\n                          ').concat(n,'\n                        </span>\n\n                        <div class="info">\n                          <strong class="name">').concat(i(e,"name"),'</strong>\n                          <span class="time">').concat(i(e,"timeAgo"),'</span>\n                        </div>\n                      </div>\n\n                      <div class="right">\n                        <span class="time">').concat(i(t,"timeAgo"),'</span>\n                        <span class="loading"></span>\n                        <a class="close" tabIndex="2">&times;</a>\n                      </div>\n                    </div>\n\n                    <div class="slides-pointers">\n                      <div class="wrap"></div>\n                    </div>\n\n                    ').concat(p("paginationArrows")?'<div class="slides-pagination">\n                          <span class="previous">&lsaquo;</span>\n                          <span class="next">&rsaquo;</span>\n                        </div>':"","\n                  </div>")},viewerItemPointer:function(e,t,s){return'<span\n                    class="'.concat(t===e?"active":""," ").concat(!0===i(s,"seen")?"seen":"",'"\n                    data-index="').concat(e,'" data-item-id="').concat(i(s,"id"),'">\n                      <b style="animation-duration:').concat(""===i(s,"length")?"3":i(s,"length"),'s"></b>\n                  </span>')},viewerItemBody:function(e,t,s){return'<div\n                    class="item '.concat(!0===i(s,"seen")?"seen":""," ").concat(t===e?"active":"",'"\n                    data-time="').concat(i(s,"time"),'" data-type="').concat(i(s,"type"),'" data-index="').concat(e,'" data-item-id="').concat(i(s,"id"),'">\n                    ').concat("video"===i(s,"type")?'<video data-length="'.concat(s.length,'" ').concat(s.loop?"loop":"",' class="media" muted webkit-playsinline playsinline preload="auto" src="').concat(i(s,"src"),'" ').concat(i(s,"type"),'></video>\n                        <b class="tip muted">').concat(p("language","unmute"),"</b>"):'<img loading="auto" class="media" src="'.concat(i(s,"src"),'" ').concat(i(s,"type")," />\n                    "),"\n\n                    ").concat(i(s,"link")?'<a class="tip link" href="'.concat(i(s,"link"),'" rel="noopener" target="_blank">\n                            ').concat(i(s,"linkText")&&""!==i(s,"linkText")?i(s,"linkText"):p("language","visitLink"),"\n                          </a>"):"","\n                  </div>")}},language:{unmute:"Touch to unmute",keyboardTip:"Press space to see next",visitLink:"Visit link",time:{ago:"ago",hour:"hour ago",hours:"hours ago",minute:"minute ago",minutes:"minutes ago",fromnow:"from now",seconds:"seconds ago",yesterday:"yesterday",tomorrow:"tomorrow",days:"days ago"}}},_=function(){var e=s("#zuck-modal");e||d.hasModal||(d.hasModal=!0,e=document.createElement("div"),e.id="zuck-modal",p("cubeEffect")&&(e.className="with-cube"),e.innerHTML='<div id="zuck-modal-content"></div>',e.style.display="none",e.setAttribute("tabIndex","1"),e.onkeyup=function(e){var t=e.keyCode,s=t;27===s?w.close():13!==s&&32!==s||w.next()},p("openEffect")&&e.classList.add("with-effects"),c(e,(function(){e.classList.contains("closed")&&(a.innerHTML="",e.style.display="none",e.classList.remove("closed"),e.classList.remove("animated"))})),document.body.appendChild(e));var a=s("#zuck-modal-content"),n=function(e){var t=s("#zuck-modal"),i="",r="",a=0,n=s("#zuck-modal-slider-".concat(v)),c={previous:s("#zuck-modal .story-viewer.previous"),next:s("#zuck-modal .story-viewer.next"),viewing:s("#zuck-modal .story-viewer.viewing")};if(!c["previous"]&&!e||!c["next"]&&e)return!1;e?(i="next",r="previous"):(i="previous",r="next");var l=600;p("cubeEffect")?"previous"===i?a=t.slideWidth:"next"===i&&(a=-1*t.slideWidth):a=-1*f(c[i])[0],m(n,a,l,null),setTimeout((function(){if(""!==i&&c[i]&&""!==r){var e=c[i].getAttribute("data-story-id");d.internalData["currentStory"]=e;var t=s("#zuck-modal .story-viewer.".concat(r));t&&t.parentNode.removeChild(t),c["viewing"]&&(c["viewing"].classList.add("stopped"),c["viewing"].classList.add(r),c["viewing"].classList.remove("viewing")),c[i]&&(c[i].classList.remove("stopped"),c[i].classList.remove(i),c[i].classList.add("viewing"));var a=C(i);a&&u(a,i);var l=d.internalData["currentStory"],h=s('#zuck-modal [data-story-id="'.concat(l,'"]'));if(h){h=h.querySelectorAll("[data-index].active");var f=h[0].firstElementChild;d.data[l]["currentItem"]=parseInt(h[0].getAttribute("data-index"),10),h[0].innerHTML='<b style="'.concat(f.style.cssText,'"></b>'),o(h[0].firstElementChild,(function(){d.nextItem(!1)}))}if(m(n,"0",0,null),h){var g=s('#zuck-modal .story-viewer[data-story-id="'.concat(e,'"]'));S(g,[h[0],h[1]],!0)}p("callbacks","onView")(d.internalData["currentStory"])}}),l+50)},u=function(e,t,a){var n=s("#zuck-modal-slider-".concat(v)),c=i(e,"items");e.timeAgo=c&&c[0]?g(i(c[0],"time")):"";var u="",h="",m=i(e,"id"),f=document.createElement("div"),b=i(e,"currentItem")||0,_=s('#zuck-modal .story-viewer[data-story-id="'.concat(m,'"]'));if(_)return!1;f.className="slides",r(c,(function(t,s){s.timeAgo=g(i(s,"time")),b>t&&(e["items"][t]["timeAgo"]=s.timeAgo,e["items"][t]["seen"]=!0,s["seen"]=!0),b===t&&s.timeAgo,h+=p("template","viewerItemPointer")(t,b,s),u+=p("template","viewerItemBody")(t,b,s)})),f.innerHTML=u;f.querySelector("video");var y=document.createElement("div");y.innerHTML=p("template","viewerItem")(e,b);var k=y.firstElementChild;k.className="story-viewer muted ".concat(t," ").concat(a?"":"stopped"," ").concat(p("backButton")?"with-back-button":""),k.setAttribute("data-story-id",m),k.querySelector(".slides-pointers .wrap").innerHTML=h,r(k.querySelectorAll(".close, .back"),(function(e,t){t.onclick=function(e){e.preventDefault(),w.close()}})),k.appendChild(f),"viewing"===t&&S(k,k.querySelectorAll('[data-index="'.concat(b,'"].active')),!1),r(k.querySelectorAll(".slides-pointers [data-index] > b"),(function(e,t){o(t,(function(){d.nextItem(!1)}))})),"previous"===t?l(n,k):n.appendChild(k)},b=function(e){var i=s("#zuck-modal"),r=!0,a=e,o={},c=void 0,l=void 0,u=void 0,h=void 0,g=void 0,v=function(e){if(e.target.classList.contains("tip")||e.target.classList.contains("muted")){var t=d.internalData["currentVideoElement"],i=s("#zuck-modal .viewing");i&&t&&x(t,i)}};a.addEventListener("click",v);var b=function(e){var t=s("#zuck-modal .viewing");if("A"!==e.target.nodeName){var n=e.touches?e.touches[0]:e,d=f(s("#zuck-modal .story-viewer.viewing"));i.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,i.slideHeight=s("#zuck-modal .story-viewer").offsetHeight,o={x:d[0],y:d[1]};var p=n.clientX,m=n.clientY;c={x:p,y:m,time:Date.now(),valid:!0},m<80||m>i.slideHeight-80?c.valid=!1:(e.preventDefault(),l=void 0,u={},r&&(a.addEventListener("mousemove",_),a.addEventListener("mouseup",w),a.addEventListener("mouseleave",w)),a.addEventListener("touchmove",_),a.addEventListener("touchend",w),t&&t.classList.add("paused"),P(),h=setTimeout((function(){t.classList.add("longPress")}),600),g=setTimeout((function(){clearInterval(g),g=!1}),250))}},_=function(e){var t=e.touches?e.touches[0]:e,s=t.clientX,i=t.clientY;c&&c.valid&&(u={x:s-c.x,y:i-c.y},"undefined"===typeof l&&(l=!!(l||Math.abs(u.x)<Math.abs(u.y))),!l&&c&&(e.preventDefault(),m(a,o.x+u.x,0,null)))},w=function e(f){if("tip muted"!==f.target.classList.value){var v=s("#zuck-modal .viewing"),b=c,w=c?Date.now()-c.time:void 0,y=Number(w)<300&&Math.abs(u.x)>25||Math.abs(u.x)>i.slideWidth/3,k=u.x<0,C=s(k?"#zuck-modal .story-viewer.next":"#zuck-modal .story-viewer.previous"),O=k&&!C||!k&&!C;if(!c||c.valid){u&&(l||(y&&!O?n(k):m(a,o.x,300)),c=void 0,r&&(a.removeEventListener("mousemove",_),a.removeEventListener("mouseup",e),a.removeEventListener("mouseleave",e)),a.removeEventListener("touchmove",_),a.removeEventListener("touchend",e));var P=d.internalData["currentVideoElement"];if(h&&clearInterval(h),v&&(S(v,v.querySelectorAll(".active"),!1),v.classList.remove("longPress"),v.classList.remove("paused")),g){clearInterval(g),g=!1;var j=function(){k||(b.x>t.screen.width/3||!p("previousTap")?d.navigateItem("next"):d.navigateItem("previous"))},$=s("#zuck-modal .viewing");if(!$||!P)return j(),!1;var T=P.clientWidth/2,D=.4*P.clientWidth,I=b.x>T-D&&b.x<T+D;$.classList.contains("muted")&&!P.loop&&I?x(P,$):j()}}}};a.addEventListener("touchstart",b),r&&a.addEventListener("mousedown",b)};return{show:function(e,i){var r=s("#zuck-modal"),n=function(){a.innerHTML='<div id="zuck-modal-slider-'.concat(v,'" class="slider"></div>');var i=d.data[e],n=i["currentItem"]||0,o=s("#zuck-modal-slider-".concat(v));b(o),d.internalData["currentStory"]=e,i["currentItem"]=n,p("backNative")&&(t.location.hash="#!".concat(v));var c=C("previous");c&&u(c,"previous"),u(i,"viewing",!0);var l=C("next");l&&u(l,"next"),p("autoFullScreen")&&r.classList.add("fullscreen");var m=function(){r.classList.contains("fullscreen")&&p("autoFullScreen")&&t.screen.width<=1024&&h(r),r.focus()};if(p("openEffect")){var g=s("#".concat(v,' [data-id="').concat(e,'"] .item-preview')),_=f(g);r.style.marginLeft="".concat(_[0]+g.offsetWidth/2,"px"),r.style.marginTop="".concat(_[1]+g.offsetHeight/2,"px"),r.style.display="block",r.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,setTimeout((function(){r.classList.add("animated")}),10),setTimeout((function(){m()}),300)}else r.style.display="block",r.slideWidth=s("#zuck-modal .story-viewer").offsetWidth,m();p("callbacks","onView")(e)};p("callbacks","onOpen")(e,n)},next:function(e){var t=function(){var e=d.internalData["currentStory"],t=s("#".concat(v,' [data-id="').concat(e,'"]'));t&&(t.classList.add("seen"),d.data[e]["seen"]=!0,d.internalData["seenItems"][e]=!0,j("seenItems",d.internalData["seenItems"]),O());var i=s("#zuck-modal .story-viewer.next");i?n(!0):w.close()};p("callbacks","onEnd")(d.internalData["currentStory"],t)},close:function(){var e=s("#zuck-modal"),i=function(){p("backNative")&&(t.location.hash=""),h(e,!0),p("openEffect")?e.classList.add("closed"):(a.innerHTML="",e.style.display="none")};p("callbacks","onClose")(d.internalData["currentStory"],i)}}},w=_(),y=function(e,t){var s=e.getAttribute("data-id"),i=document.querySelectorAll("#".concat(v,' [data-id="').concat(s,'"] .items > li')),a=[];if(!p("reactive")||t){r(i,(function(e,t){var s=t.firstElementChild,i=s,r=i.firstElementChild;a.push({id:i.getAttribute("data-id"),src:i.getAttribute("href"),length:i.getAttribute("data-length"),loop:i.getAttribute("data-loop"),type:i.getAttribute("data-type"),time:i.getAttribute("data-time"),link:i.getAttribute("data-link"),linkText:i.getAttribute("data-linkText"),preview:r.getAttribute("src")})})),d.data[s].items=a;var n=p("callbacks","onDataUpdate");n&&n(d.data,(function(){}))}},k=function(e,t){var s=e.getAttribute("data-id"),i=!1;d.internalData["seenItems"][s]&&(i=!0);try{d.data[s]||(d.data[s]={}),d.data[s].id=s,d.data[s].photo=e.getAttribute("data-photo"),d.data[s].name=e.querySelector(".name").innerText,d.data[s].link=e.querySelector(".item-link").getAttribute("href"),d.data[s].lastUpdated=e.getAttribute("data-last-updated"),d.data[s].seen=i,d.data[s].items||(d.data[s].items=[],d.data[s].noItems=!0)}catch(a){d.data[s]={items:[]}}e.onclick=function(e){e.preventDefault(),w.show(s)};var r=p("callbacks","onDataUpdate");r&&r(d.data,(function(){}))},C=function(e){var t=d.internalData["currentStory"],i="".concat(e,"ElementSibling");if(t){var r=s("#".concat(v,' [data-id="').concat(t,'"]'))[i];if(r){var a=r.getAttribute("data-id"),n=d.data[a]||!1;return n}}return!1},O=function(){r(document.querySelectorAll("#".concat(v," .story.seen")),(function(e,t){var s=d.data[t.getAttribute("data-id")],i=t.parentNode;p("reactive")||i.removeChild(t),d.update(s,!0)}))},S=function(e,t,s){var i=t[1],r=t[0];if(!i||!r)return!1;var n=d.internalData["currentVideoElement"];if(n&&n.pause(),"video"===i.getAttribute("data-type")){var o=i.getElementsByTagName("video")[0];if(!o)return d.internalData["currentVideoElement"]=!1,!1;var c=function(){var e=o.duration;+o.dataset.length&&(e=o.dataset.length),e&&a(r.getElementsByTagName("b")[0].style,"AnimationDuration","".concat(e,"s"))};c(),o.addEventListener("loadedmetadata",c),d.internalData["currentVideoElement"]=o,o.play().catch((function(){}))}else d.internalData["currentVideoElement"]=!1},P=function(){var e=d.internalData["currentVideoElement"];if(e)try{e.pause().catch((function(){}))}catch(t){}},x=function(e,t){e.muted&&t.querySelector(".item.active .tip.muted").remove(),e.muted=!1,e.volume=1,e.removeAttribute("muted"),e.play().catch((function(){})),e.paused&&(e.muted=!0,e.play().catch((function(){}))),t&&t.classList.remove("paused")},j=function(e,s){try{if(p("localStorage")){var i="zuck-".concat(v,"-").concat(e);t.localStorage[i]=JSON.stringify(s)}}catch(r){}},$=function(e){if(p("localStorage")){var s="zuck-".concat(v,"-").concat(e);return!!t.localStorage[s]&&JSON.parse(t.localStorage[s])}return!1};d.data=p("stories")||{},d.internalData={},d.internalData["seenItems"]=$("seenItems")||{},d.add=d.update=function(t,a){var n=i(t,"id"),o=s("#".concat(v,' [data-id="').concat(n,'"]')),c=i(t,"items"),u=void 0,h=!1;if(c[0]&&(h=c[0]["preview"]||""),!0===d.internalData["seenItems"][n]&&(t.seen=!0),t.currentPreview=h,o)u=o;else{var m=document.createElement("div");m.innerHTML=p("template","timelineItem")(t),u=m.firstElementChild}!1===t["seen"]&&(d.internalData["seenItems"][n]=!1,j("seenItems",d.internalData["seenItems"])),u.setAttribute("data-id",n),u.setAttribute("data-photo",i(t,"photo")),u.setAttribute("data-last-updated",i(t,"lastUpdated")),k(u),o||p("reactive")||(a?e.appendChild(u):l(e,u)),r(c,(function(e,t){d.addItem(n,t,a)})),a||O()},d.next=function(){w.next()},d.remove=function(e){var t=s("#".concat(v,' > [data-id="').concat(e,'"]'));t.parentNode.removeChild(t)},d.addItem=function(e,t,r){var a=s("#".concat(v,' > [data-id="').concat(e,'"]'));if(!p("reactive")){var n=document.createElement("li"),o=a.querySelectorAll(".items")[0];n.className=i(t,"seen")?"seen":"",n.setAttribute("data-id",i(t,"id")),n.innerHTML=p("template","timelineStoryItem")(t),r?o.appendChild(n):l(o,n)}y(a)},d.removeItem=function(t,i){var r=s("#".concat(v,' > [data-id="').concat(t,'"] [data-id="').concat(i,'"]'));p("reactive")||e.parentNode.removeChild(r)},d.navigateItem=d.nextItem=function(e,t){var i=d.internalData["currentStory"],a=d.data[i]["currentItem"],n=s('#zuck-modal .story-viewer[data-story-id="'.concat(i,'"]')),o="previous"===e?-1:1;if(!n||1===n.touchMove)return!1;var c=n.querySelectorAll('[data-index="'.concat(a,'"]')),l=c[0],u=c[1],h=a+o,m=n.querySelectorAll('[data-index="'.concat(h,'"]')),f=m[0],v=m[1];if(n&&f&&v){var b=function(){"previous"===e?(l.classList.remove("seen"),u.classList.remove("seen")):(l.classList.add("seen"),u.classList.add("seen")),l.classList.remove("active"),u.classList.remove("active"),f.classList.remove("seen"),f.classList.add("active"),v.classList.remove("seen"),v.classList.add("active"),r(n.querySelectorAll(".time"),(function(e,t){t.innerText=g(v.getAttribute("data-time"))})),d.data[i]["currentItem"]=d.data[i]["currentItem"]+o,S(n,m,t)},_=p("callbacks","onNavigateItem");_=p("callbacks",_?"onNavigateItem":"onNextItem"),_(i,v.getAttribute("data-story-id"),b)}else n&&"previous"!==e&&w.next(t)};var T=function(){if(e&&e.querySelector(".story")&&r(e.querySelectorAll(".story"),(function(e,t){k(t)})),p("backNative")&&(t.location.hash==="#!".concat(v)&&(t.location.hash=""),t.addEventListener("popstate",(function(e){t.location.hash!=="#!".concat(v)&&(t.location.hash="")}),!1)),!p("reactive")){var s=$("seenItems");for(var i in s)s.hasOwnProperty(i)&&d.data[i]&&(d.data[i].seen=s[i])}r(p("stories"),(function(e,t){d.add(t,!0)})),O();var a=p("avatars")?"user-icon":"story-preview",n=p("list")?"list":"carousel";return e.className+=" stories ".concat(a," ").concat(n," ").concat("".concat(p("skin")).toLowerCase()),d};return T()};return d.buildTimelineItem=function(e,t,s,i,a,n){var o={id:e,photo:t,name:s,link:i,lastUpdated:a,items:[]};return r(n,(function(e,t){o.items.push(d.buildStoryItem.apply(d,t))})),o},d.buildStoryItem=function(e,t,s,i,r,a,n,o,c,l){return{id:e,type:t,length:s,loop:i,src:r,preview:a,link:n,linkText:o,seen:c,time:l}},d.buildItem=d.buildStoryItem,"undefined"!==typeof exports?(e.exports&&(exports=e.exports=d),exports.ZuckJS=d):t["ZuckitaDaGalera"]=t["Zuck"]=d,d}(window||{})}).call(this,s("dd40")(e))},5:function(e,t){},5144:function(e,t,s){"use strict";var i=s("eacb"),r=s.n(i);r.a},"546d":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_title"))+" ")]),s("button",{staticClass:"g-btn m-rounded m-sm",attrs:{disabled:e.disabledSendArtists},on:{click:e.sendArtists}},[e._v(" "+e._s(e.$t("message.button_done"))+" ")])]),s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_my_top_artists"))+" ")]),e.noSpotifyTopArtists?e._e():s("button",{staticClass:"g-btn m-border m-rounded m-sm",on:{click:e.selectArtistsBtn}},[e._v(" "+e._s(e.selectArtistsTitle)+" ")])]),e.noSpotifyTopArtists?s("div",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.settings_spotify_no_artists"))+" ")]):e._e(),s("div",{staticClass:"b-chats__available-users__list spotify__list"},e._l(e.spotifyTopArtists,(function(t){return s("button",{key:t.id,staticClass:"b-chats__available-users__item spotify__list__item",class:{selected:e.isChecked(t.id)},on:{click:function(s){return s.preventDefault(),e.selectArtists(t.id)}}},[s("div",[e._v(e._s(t.name))]),s("span",{staticClass:"b-input-radio__icon b-chats__available-users__item__checkbox spotify__list__item__checkbox"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])])})),0)])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("6762"),s("2fdb"),s("bd86")),o=s("d634"),c=s("76db"),l=s("1560");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"SpotifyArtists",components:{Checkbox:c["a"]},mixins:[l["a"]],data:function(){return{disabledSendArtists:!1}},computed:d(d({},Object(o["eb"])(["spotifyTopArtists","spotifyBioTopArtists","spotifyBioTopArtistsIds","isSpotifyArtistsEquals"])),{},{noSpotifyTopArtists:function(){return!this.spotifyTopArtists.length},selectArtistsTitle:function(){return this.isSpotifyArtistsEquals?this.$i18n.t("message.deselect_all"):this.$i18n.t("message.select_all")}}),mounted:function(){this.spotifyTopArtists.length||this.fetchSpotifyTopArtists(),this.spotifyBioTopArtists.length||this.fetchSpotifyBio()},methods:d(d(d({},Object(o["fb"])(["addSpotifyBioTopArtists","removeSpotifyBioTopArtists","selectAllSpotifyBioTopArtists"])),Object(o["db"])(["fetchSpotifyTopArtists","fetchSpotifyBio","sendSpotifyArtists"])),{},{selectArtistsBtn:function(){this.isSpotifyArtistsEquals?this.selectAllSpotifyBioTopArtists(!1):this.selectAllSpotifyBioTopArtists()},selectArtists:function(e){this.isChecked(e)?this.removeSpotifyBioTopArtists(e):this.addSpotifyBioTopArtists(e)},isChecked:function(e){return this.spotifyBioTopArtistsIds.includes(e)},returnBack:function(){this.goBack({name:"SettingsProfile"})},sendArtists:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.noSpotifyTopArtists&&this.returnBack(),this.disabledSendArtists=!0,e.next=4,this.sendSpotifyArtists();case 4:this.disabledSendArtists=!1,this.returnBack();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},h=p,m=s("2877"),f=Object(m["a"])(h,i,r,!1,null,null,null);t["default"]=f.exports},"55a7":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("settings-header"),s("div",{staticClass:"b-settings__wrapper"},[s("settings-menu"),s("router-view")],1)],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("d634"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"b-tabs__nav b-settings__nav"},[s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsProfile"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.profile_settings_tab"))+" ")])]),s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsAdvanced"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-account"}),e._v(" "+e._s(e.$t("message.account_settings_tab"))+" ")])]),e.authUser.isPerformer?s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsMessaging"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-messages-sm"}),e._v(" "+e._s(e.$t("message.messaging_settings_button"))+" ")])]):e._e(),s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsNotifications"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-notification"}),e._v(" "+e._s(e.$t("message.notifications_settings_button"))+" ")])]),s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsSecurity"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-security"}),e._v(" "+e._s(e.$t("message.security_settings_button"))+" ")])]),e.authUser.canAddStory?s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsStory"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"}),e._v(" "+e._s(e.$t("message.other_settings_story"))+" ")])]):e._e(),e.authUser.isPerformer&&(e.authUser.canStreaming||e.activityHubAllowed)?s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsOther"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-link"}),e._v(" "+e._s(e.$t("message.other_settings_button"))+" ")])]):e._e(),e.authUser.canAddHelper||e.authUser.helperAccess&&e.authUser.helperAccess.length?s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"PerformerHelpers"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-profile"}),e._v(" "+e._s(e.$t("message.settings_helpers_title"))+" ")])]):e._e(),"sm"!==this.$mq?s("router-link",{staticClass:"b-tabs__nav__item",attrs:{to:{name:"SettingsChangelog"},"active-class":"","exact-active-class":"m-current",tag:"li",replace:""}},[s("a",{class:{new:e.changelogUpdates>0}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-announcement"}),e._v(" "+e._s(e.$t("message.changelog_settings_button"))+" ")])]):e._e()],1)},c=[];function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var d={name:"SettingsMenu",computed:u(u(u({},Object(n["b"])(["authUser"])),Object(n["eb"])(["activityHubAllowed"])),Object(n["gb"])(["changelogUpdates"]))},p=d,h=s("2877"),m=Object(h["a"])(p,o,c,!1,null,null,null),f=m.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"g-page__header m-with-tabs"},[s("go-back"),s("h1",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.personal_settings"))+" ")]),s("page-title",{attrs:{title:e.$t("message.personal_settings")}})],1)},v=[],b=s("b6ee"),_={name:"SettingsHeader",components:{GoBack:b["a"]}},w=_,y=Object(h["a"])(w,g,v,!1,null,"5165606e",null),k=y.exports;function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var S={name:"Settings",components:{SettingsMenu:f,SettingsHeader:k},computed:O({},Object(n["b"])(["authUserId"])),mounted:function(){this.fetchUserSettings(),this.setCurrentUser(this.authUserId)},methods:O(O({},Object(n["db"])(["fetchUserSettings"])),Object(n["Sb"])(["setCurrentUser"]))},P=S,x=Object(h["a"])(P,i,r,!1,null,null,null);t["default"]=x.exports},"55e8":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("div",{staticClass:"g-section__header connect_twitter m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.twitter_account_title"))+" ")]),e.authUser.isTwitterConnected?s("button",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{disabled:e.disabledTwitter},on:{click:e.doDisableTwitter}},[e._v(" "+e._s(e.$t("message.disconnect_twitter_account_button"))+" ")]):s("a",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{href:"/twitter/auth"+e.csrf}},[e._v(" "+e._s(e.$t("message.connect_twitter_button"))+" ")])]),e.authUser.isTwitterConnected?s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.twitter_connected_label")))]),s("div",{staticClass:"connected-twitter-link"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-of-twitter"}),s("a",{attrs:{href:"//twitter.com/"+e.authUser.twitterUsername,target:"_blank",rel:"noopener noreferrer"}},[e._v(" @"+e._s(e.authUser.twitterUsername)+" ")])])]):e._e(),s("div",{staticClass:"g-section__header connect_twitter m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.google_account_title"))+" ")]),e.goolgeAccount?s("div",{staticClass:"g-btn__group"},[e.disabledGoogle?s("spinner-loader"):e._e(),s("button",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{disabled:e.disabledGoogle},on:{click:e.doDisableGoogle}},[e._v(" "+e._s(e.$t("message.disconnect_twitter_account_button"))+" ")])],1):s("a",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{href:"/auth/google"+e.csrf}},[e._v(" "+e._s(e.$t("message.connect_twitter_button"))+" ")])]),e.goolgeAccount?s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.twitter_connected_label")))]),s("div",{staticClass:"connected-twitter-link"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-google-color"}),e._v(" "+e._s(e.goolgeAccount.email)+" ")])]):e._e(),s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.account_info_title"))+" ")])]),s("form",{staticClass:"b-settings__form",attrs:{"data-vv-scope":"action-info-form"}},[s("div",{staticClass:"g-input__fieldset"},[s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:e.usernameValidate,expression:"usernameValidate"}],attrs:{id:"input-login","data-vv-delay":"1000","data-vv-as":"Username",name:"username",type:"text",label:e.$t("message.username_label"),"help-text":e.usernameHelpText,error:e.errors.first("action-info-form.username"),trim:!0,"to-lower-case":!0,maxlength:24},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[s("template",{slot:"afterInput"},[s("span",{staticClass:"new_login_state",class:{"m-bad":e.errors.first("action-info-form.username")}},[e.errors.first("action-info-form.username")?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"usernameIconCloseAdv",staticClass:"icon-close"}):s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"usernameIconDoneAdv",staticClass:"icon-done"})])])],2)],1),s("ButtonOF",{attrs:{text:e.$t("message.save_changes_button"),loading:e.loading},on:{click:e.saveAccountInfo}})],1),s("div",{staticClass:"b-settings__form pt-0"},[e.authUser.email?s("div",{staticClass:"g-input__fieldset"},[s("InputOF",{attrs:{value:e.authUser.email,label:e.$t("message.email_label"),readonly:""}},[e.authUser.isEmailChecked?s("template",{slot:"help-text"},[s("span",{staticClass:"d-block"},[e._v(e._s(e.emailCheckedHelpText))])]):s("template",{slot:"help-text"},[s("span",{staticClass:"g-danger-text"},[e._v(" "+e._s(e.$t("message.email_not_verified_message",{EMAIL:e.authUser.email}))+" ")])])],2)],1):s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.email_label"))+" ")])]),s("div",{staticClass:"g-btn__wrapper"},[s("div",{staticClass:"g-input__label empty-email-title"},[e._v(" "+e._s(e.$t("message.not_set_email_title"))+" ")]),e.authUser.email&&!e.authUser.isEmailChecked?s("router-link",{staticClass:"g-btn m-rounded",attrs:{to:{name:"SettingsEmail"}}},[e._v(" "+e._s(e.$t("message.confirm_email_button_label"))+" ")]):e._e(),s("router-link",{staticClass:"g-btn m-rounded",attrs:{to:{name:"SettingsChangeEmail"}}},[e._v(" "+e._s(e.authUser.email?e.$t("message.change_email_label"):e.$t("message.set_email_label"))+" ")])],1)]),s("connected-accounts"),s("div",{staticClass:"r-toggle",attrs:{id:"sessions"}},[s("div",{staticClass:"r-toggle__heading",on:{click:function(t){e.showCollapseLoginSession=!e.showCollapseLoginSession}}},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.login_session_title"))+" ")]),e.showCollapseLoginSession?e._e():s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"loginSessionIconDown",staticClass:"icon-arrow-down"}),e.showCollapseLoginSession?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"loginSessionIconUp",staticClass:"icon-arrow-up"}):e._e()]),s("b-collapse",{attrs:{id:"login-session"},model:{value:e.showCollapseLoginSession,callback:function(t){e.showCollapseLoginSession=t},expression:"showCollapseLoginSession"}},[s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"b-sessions-list"},e._l(e.sessions,(function(t){return s("div",{key:t.sessionId,staticClass:"b-session-row"},[s("div",{staticClass:"b-session-row__el"},[s("strong",[e._v(e._s(t.client))]),e._v(", "+e._s(t.os)+e._s(t.brand?", "+t.brand:"")+" "),s("div",{staticClass:"b-session-location gray-text"},[e._v(" "+e._s(t.ipAddress)+" - "+e._s(t.countryName?t.countryName:"")+" ")])]),s("div",{staticClass:"b-session-row__el m-session-actions"},[t.isCurrent?s("div",{staticClass:"session-online"},[e._v(" "+e._s(e.$t("message.online"))+" ")]):e._e(),t.isCurrent?e._e():s("div",{staticClass:"session-time gray-text"},[s("utils-time",{attrs:{date:1e3*t.lastActivity,type:"setting-sessions"}})],1)])])})),0)]),s("ButtonOF",{attrs:{text:e.$t("message.close_all_button"),loading:e.loadingSessions,bordered:!0,disabled:!e.sessions.length},on:{click:e.closeAllSessions}})],1)],1),e.authUser.email?s("div",{staticClass:"r-toggle",attrs:{id:"password"}},[s("div",{staticClass:"r-toggle__heading",on:{click:function(t){e.showCollapsePassword=!e.showCollapsePassword}}},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.change_password_title"))+" ")]),e.showCollapsePassword?e._e():s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"passwordIconDown",staticClass:"icon-arrow-down"}),e.showCollapsePassword?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"passwordIconUp",staticClass:"icon-arrow-up"}):e._e()]),s("b-collapse",{attrs:{id:"password-collapse"},model:{value:e.showCollapsePassword,callback:function(t){e.showCollapsePassword=t},expression:"showCollapsePassword"}},[s("form",{attrs:{"data-vv-scope":"change-password-form"}},[s("div",{staticClass:"g-input__fieldset"},[e.authUser.hasPassword?s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"old_password_input",name:"old_password_input","data-vv-delay":"100","data-vv-as":e.$t("message.old_password"),type:"password",required:!0,label:e.$t("message.old_password"),error:e.errors.first("change-password-form.old_password_input")},model:{value:e.old_password,callback:function(t){e.old_password=t},expression:"old_password"}},[s("template",{slot:"help-text"},[s("button",{staticClass:"g-btn m-flat",on:{click:function(t){return t.preventDefault(),e.openRestoreModal(t)}}},[e._v(" "+e._s(e.forgotPasswordLinkTitle)+" ")])])],2):e._e(),s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|checkPassword",expression:"'required|min:6|checkPassword'"}],ref:"new_password",attrs:{id:"new_password_input","data-vv-delay":"100","data-vv-as":e.$t("message.new_password"),name:"new_password",type:"password",required:!0,label:e.$t("message.new_password"),error:e.errors.first("change-password-form.new_password")},model:{value:e.new_password,callback:function(t){e.new_password=t},expression:"new_password"}}),s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmPassword:new_password",expression:"'required|confirmPassword:new_password'"}],ref:"new_password2",attrs:{id:"new_password2_input","data-vv-delay":"100","data-vv-as":e.$t("message.confirm_new_password"),name:"new_password2",type:"password",required:!0,label:e.$t("message.confirm_new_password"),error:e.errors.first("change-password-form.new_password2")},model:{value:e.new_password2,callback:function(t){e.new_password2=t},expression:"new_password2"}})],1),s("ButtonOF",{attrs:{text:e.$t("message.change_password_button"),loading:e.loadingChangePassword,bordered:!0},on:{click:e.changePassword}})],1)])],1):e._e(),s("div",{staticClass:"r-toggle",attrs:{id:"delete-account-section"}},[s("div",{staticClass:"r-toggle__heading",on:{click:e.toggleCollapseDeleteAccount}},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.delete_account_title"))+" ")]),e.showCollapseDeleteAccount?e._e():s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"deleteAccountIconDown",staticClass:"icon-arrow-down"}),e.showCollapseDeleteAccount?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"deleteAccountIconUp",staticClass:"icon-arrow-up"}):e._e()]),s("b-collapse",{attrs:{id:"delete-account"},model:{value:e.showCollapseDeleteAccount,callback:function(t){e.showCollapseDeleteAccount=t},expression:"showCollapseDeleteAccount"}},[e.isDeleteInitiated?[e.allSettings.lastSubscriptionExpiredAt?s("i18n",{attrs:{path:"message.delete_account_description_with_sub",tag:"span"},scopedSlots:e._u([{key:"CANCEL",fn:function(){return[s("button",{staticClass:"g-btn m-flat",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.cancelDeleteAccount(t)}}},[e._v(' "'+e._s(e.$t("message.cancel_button"))+'" ')])]},proxy:!0},{key:"EXPIRE_AT",fn:function(){return[e._v(" "+e._s(e.allSettings.lastSubscriptionExpiredAt)+" ")]},proxy:!0}],null,!1,1838615726)}):s("i18n",{attrs:{path:"message.delete_account_description_without_sub",tag:"span"},scopedSlots:e._u([{key:"CANCEL",fn:function(){return[s("button",{staticClass:"g-btn m-flat",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.cancelDeleteAccount(t)}}},[e._v(' "'+e._s(e.$t("message.cancel_button"))+'" ')])]},proxy:!0}],null,!1,482654415)})]:e._e(),e.isDeleteInitiated?e._e():s("form",[s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label",attrs:{for:"captcha-code"}},[e._v(" "+e._s(e.$t("message.personal_settings_advanced_captcha_code"))+" ")]),s("div",{staticClass:"g-input__row"},[e.captchaUrl?s("img",{attrs:{alt:"Captcha",src:e.captchaUrl,width:"100",height:"32"}}):e._e(),s("input",{directives:[{name:"model",rawName:"v-model",value:e.captchaCode,expression:"captchaCode"}],staticClass:"form-control",attrs:{id:"captcha-code",type:"text",name:"code",required:""},domProps:{value:e.captchaCode},on:{input:function(t){t.target.composing||(e.captchaCode=t.target.value)}}})]),s("p",{staticClass:"g-input__help"},[s("span",{staticClass:"g-danger-text"},[e._v(e._s(e.$t("message.delete_account_help")))])])])]),s("ButtonOF",{attrs:{text:e.$t("message.delete_account_button"),loading:e.loadingDeleting,danger:!0,disabled:!e.captchaCode.length},on:{click:function(t){e.isDeleteConfirmShow=!0}}}),s("modal-confirm",{attrs:{"modal-show":e.isDeleteConfirmShow,title:this.$i18n.t("message.delete_account_button"),text:this.$i18n.t("message.dialog_comment_delete_desc"),"agree-btn":this.$i18n.t("message.dialog_delete_post_button"),"close-on-cancel":""},on:{"update:modalShow":function(t){e.isDeleteConfirmShow=t},"update:modal-show":function(t){e.isDeleteConfirmShow=t},"on-agree":e.deleteAccount}})],1)],2)],1),e.authUser.email?s("ModalRestore",{attrs:{"current-email":e.authUser.email}}):e._e()],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("d634"),c=s("b775"),l=s("09e4"),u=function(){var e="".concat(c["b"],"/sessions");return c["d"].get(e).then((function(e){return e.data}))},d=function(){var e="".concat(c["b"],"/sessions");return c["d"].delete(e).then((function(e){return e.data}))},p=s("2612"),h=s("13ca"),m=s("0fc7"),f=s("33a44"),g=s("8b3f"),v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.showComponent?s("div",{staticClass:"connected-accounts-container"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_connect_account_title"))+" ")])]),e.connectedOfAccounts&&e.connectedOfAccounts.length?s("ul",{staticClass:"connected-accounts-list"},e._l(e.connectedOfAccounts,(function(t){return s("li",{key:t.id,staticClass:"connected-accounts-item"},[s("router-link",{staticClass:"connected-accounts-info",attrs:{to:{name:"Profile",params:{userId:t.username}}}},[s("span",{staticClass:"connected-accounts-profile-avatar g-avatar m-w36"},[s("image-thumb",{attrs:{user:t,size:"c50"}})],1),s("span",{staticClass:"connected-accounts-profile-link"},[s("div",{staticClass:"b-username-row"},[s("div",{staticClass:"b-username"},[s("div",{staticClass:"g-user-name"},[e._v(e._s(t.name))])])]),s("div",{staticClass:"b-username-row"},[s("div",{staticClass:"b-username"},[s("div",{staticClass:"g-user-username"},[e._v("@"+e._s(t.username))])])])])]),s("div",{staticClass:"connected-accounts-actions"},[t.id===e.authUser.id?s("span",{staticClass:"m-success"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})]):s("button",{staticClass:"g-btn m-rounded m-sm",on:{click:function(s){return e.deleteConnectedAccount(t.id)}}},[e._v(" "+e._s(e.$t("message.uploaded_media_delete_btn_title"))+" ")])])],1)})),0):e._e(),e.authUser.canConnectOfAccount?s("form",{staticClass:"b-settings__form",on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[s("div",{staticClass:"g-input__fieldset"},[s("InputOF",{attrs:{type:"text",placeholder:e.$t("message.settings_connect_account_placeholder"),label:e.$t("message.settings_connect_account_label"),required:!0},model:{value:e.login,callback:function(t){e.login=t},expression:"login"}})],1),s("div",{staticClass:"g-btn__wrapper"},[s("button",{staticClass:"g-btn m-rounded",attrs:{type:"submit",disabled:e.submitDisabled||!e.login.length}},[e._v(" "+e._s(e.$t("message.connect_twitter_button"))+" ")])])]):e._e(),s("b-modal",{attrs:{centered:"",size:"sm","hide-header":!0,"hide-footer":!0,"modal-class":"connected-accounts-modal"},on:{hidden:e.hiddenModal},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e.modalTitle?s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.modalTitle)+" ")]):e._e(),s("form",{staticClass:"b-loginreg__form",on:{submit:function(t){return t.preventDefault(),e.submitLoginForm(t)}}},["auth"===e.modalComponent?[s("div",{staticClass:"g-input__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.login,expression:"login"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"g-input form-control",attrs:{name:"login",readonly:!0,placeholder:this.$i18n.t("message.username_label")},domProps:{value:e.login},on:{input:function(t){t.target.composing||(e.login=t.target.value)}}}),s("div",{staticClass:"g-input__help m-danger error_place error_place_for_email"},[e._v(" "+e._s(e.errors.first("login"))+" ")])]),s("div",{staticClass:"g-input__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"g-input form-control",attrs:{type:"password",name:"password",placeholder:this.$i18n.t("message.password_placeholder")},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),s("div",{staticClass:"g-input__help m-danger error_place error_place_for_password"},[e._v(" "+e._s(e.errors.first("password"))+" ")])])]:e._e(),"otp"===e.modalComponent?s("div",{staticClass:"g-input__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.otpCode,expression:"otpCode"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"g-input form-control",attrs:{name:"otpcode",placeholder:this.$i18n.t("message.enter_otp_code_title")},domProps:{value:e.otpCode},on:{input:function(t){t.target.composing||(e.otpCode=t.target.value)}}}),s("div",{staticClass:"g-input__help m-danger error_place error_place_for_email"},[e._v(" "+e._s(e.errors.first("otpcode"))+" ")])]):e._e(),"verification"===e.modalComponent?s("div",{staticClass:"g-input__wrapper"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.verificationCode,expression:"verificationCode"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"g-input form-control",attrs:{name:"verification",placeholder:this.$i18n.t("message.enter_otp_code_in_email")},domProps:{value:e.verificationCode},on:{input:function(t){t.target.composing||(e.verificationCode=t.target.value)}}}),s("div",{staticClass:"g-input__help m-danger error_place error_place_for_email"},[e._v(" "+e._s(e.errors.first("verification"))+" ")])]):e._e(),s("div",{staticClass:"g-input__wrapper"},[s("div",{staticClass:"captcha_wrapper",attrs:{id:"captcha_login_wrapper"}})]),e.errorMsg?s("div",{staticClass:"g-input__help m-danger error_place error_place_form"},[e._v(" "+e._s(e.errorMsg)+" ")]):e._e(),s("button",{staticClass:"g-btn m-rounded m-flex m-lg",attrs:{type:"submit",disabled:e.modalFormSubmitDisabled}},[e._v(" "+e._s(e.buttonText)+" ")])],2)])],1):e._e()},b=[],_=s("e66b"),w=s("fece");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"ConnectedAccounts",components:{InputOF:h["a"],ImageThumb:_["a"]},mixins:[w["a"]],data:function(){return{submitDisabled:!1,modalSubmitDisabled:!1,modalShow:!1,login:"",password:"",otpCode:"",authToken:void 0,otpToken:void 0,verificationCode:void 0,captchaWrapperId:"captcha_login_wrapper",errorMsg:"",errorTextCode:"",needToLoadRecaptcha:!0}},computed:k(k(k({},Object(o["b"])(["authUser"])),Object(o["Ob"])(["getUser"])),{},{connectedOfAccounts:function(){var e=this;return this.authUser.connectedOfAccounts.map((function(t){return e.getUser(t)}))},showComponent:function(){return this.authUser.canConnectOfAccount||this.authUser.connectedOfAccounts&&this.authUser.connectedOfAccounts.length},buttonText:function(){switch(this.errorTextCode){case"auth_required":case"invalid_auth":return this.$i18n.t("message.sign_in_button");default:return this.$i18n.t("message.send_button")}},modalComponent:function(){switch(this.errorTextCode){case"auth_required":case"invalid_auth":return"auth";case"otp_required":case"invalid_otp":return"otp";case"verification_code_required":case"verification_code_sent":case"invalid_verification_code":return"verification";default:return""}},modalTitle:function(){switch(this.modalComponent){case"auth":return this.$i18n.t("message.connect_other_account");case"otp":return"otp";case"verification":return"E-mail verification";default:return""}},modalFormSubmitDisabled:function(){var e=this;return Object.keys(this.fields).some((function(t){return e.fields[t].invalid}))||this.modalSubmitDisabled}}),methods:k(k(k({},Object(o["Sb"])(["removeConnectedAccount"])),Object(o["Nb"])(["addConnectedAccount"])),{},{submitForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.submitDisabled=!0,this.login.length){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,Object(p["f"])({login:this.login,authToken:this.authToken,otpToken:this.otpToken,verificationCode:this.verificationCode});case 6:t=e.sent,this.addConnectedAccount({userData:t}),this.submitDisabled=!1,this.modalShow=!1,this.resetData(),e.next=21;break;case 13:if(e.prev=13,e.t0=e["catch"](3),!e.t0.data||!e.t0.data.error){e.next=21;break}if(e.t0.data.error.payload){e.next=20;break}return Object(l["b"])(e.t0),this.submitDisabled=!1,e.abrupt("return");case 20:e.t0.data.error.payload&&e.t0.data.error.payload.textCode&&(e.t0.data.error.message&&(this.errorMsg=e.t0.data.error.message),this.errorTextCode=e.t0.data.error.payload.textCode,this.modalShow=!0,this.modalSubmitDisabled=!1);case 21:case"end":return e.stop()}}),e,this,[[3,13]])})));function t(){return e.apply(this,arguments)}return t}(),submitLoginForm:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.modalSubmitDisabled=!0,this.errorMsg="",s={"v3-recaptcha-response":this["v3-recaptcha-response"],"g-recaptcha-response":this["g-recaptcha-response"]},"verification"!==this.modalComponent){e.next=6;break}return this.submitForm(),e.abrupt("return");case 6:if("auth"!==this.modalComponent){e.next=12;break}if(this.login.length||this.password.length){e.next=11;break}return this.errorMsg="Fields are required",this.modalSubmitDisabled=!1,e.abrupt("return");case 11:s=k({login:this.login,password:this.password},s);case 12:if("otp"===this.modalComponent&&(s=k({code:this.otpCode,authToken:this.authToken},s)),e.prev=13,"auth"!==this.modalComponent){e.next=18;break}return e.next=17,Object(p["g"])(s);case 17:t=e.sent;case 18:if("otp"!==this.modalComponent){e.next=22;break}return e.next=21,Object(p["h"])(s);case 21:t=e.sent;case 22:e.next=35;break;case 24:if(e.prev=24,e.t0=e["catch"](13),!(e.t0&&e.t0.data&&e.t0.data.error)){e.next=34;break}if(this.maybeInitV3Captcha(),102!==e.t0.data.error.code){e.next=32;break}return this.modalSubmitDisabled=!1,this.initV2Captcha(),e.abrupt("return");case 32:this.V2rendered&&this.initV2Captcha(),e.t0.data.error.message&&(this.errorMsg=e.t0.data.error.message);case 34:this.modalSubmitDisabled=!1;case 35:t&&(t.authToken&&(this.authToken=t.authToken),t.otpToken&&(this.otpToken=t.otpToken),this.submitForm(),this.modalShow=!1),this.modalSubmitDisabled=!1;case 37:case"end":return e.stop()}}),e,this,[[13,24]])})));function t(){return e.apply(this,arguments)}return t}(),deleteConnectedAccount:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["l"])(t);case 3:s=e.sent,s&&this.removeConnectedAccount({userId:this.authUser.id,accountId:t,userData:s}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),Object(l["b"])(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}(),hiddenModal:function(){this.submitDisabled=!1},resetData:function(){this.login="",this.password="",this.otpCode="",this.authToken=void 0,this.otpToken=void 0,this.verificationCode=void 0}})},O=C,S=s("2877"),P=Object(S["a"])(O,v,b,!1,null,null,null),x=P.exports,j=s("00a0"),$=s("e528"),T=s("8c16");function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function I(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var E={name:"SettingsAdvanced",components:{InputOF:h["a"],ButtonOF:m["a"],UtilsTime:f["a"],ModalConfirm:g["a"],ConnectedAccounts:x,ModalRestore:j["a"],SpinnerLoader:$["a"]},mixins:[T["g"],T["b"],T["c"]],data:function(){return{loading:!1,loadingChangePassword:!1,loadingDeleting:!1,loadingSessions:!1,showCollapseLoginSession:"#sessions"===this.$route.hash,sessions:[],showCollapsePassword:"#password"===this.$route.hash,old_password:"",new_password:"",new_password2:"",showCollapseDeleteAccount:"#delete-account-section"===this.$route.hash,isDeleteConfirmShow:!1,captchaCode:"",disabledTwitter:!1,disabledGoogle:!1,captchaUrl:"#delete-account-section"===this.$route.hash?"".concat(c["a"],"/captcha/default"):"",usernameProxy:null,isBeforeDestroyed:!1}},computed:I(I(I(I({},Object(o["b"])(["authUser","authUserId"])),Object(o["eb"])(["allSettings","userLoginPrefix"])),Object(o["q"])(["getInit"])),{},{csrf:function(){return this.getInit.csrf?"?csrf=".concat(this.getInit.csrf):""},forgotPasswordLinkTitle:function(){var e=this.$t("message.forgot_password_link_title");return e.charAt(0).toUpperCase()+e.slice(1)},usernameHelpText:function(){return"".concat(window.location.origin,"/").concat(this.authUser.username)},emailCheckedHelpText:function(){return this.authUser.isEmailChecked?this.$i18n.t("message.email_verified_message",{EMAIL:this.authUser.email}):""},isDeleteInitiated:function(){return this.allSettings.isDeleteInitiated},username:{get:function(){return null!==this.usernameProxy?this.usernameProxy:this.authUser.username},set:function(e){this.usernameProxy=e}},goolgeAccount:function(){if(this.allSettings&&this.allSettings.socialsConnects&&this.allSettings.socialsConnects.length)return this.allSettings.socialsConnects.filter((function(e){return"google"===e.provider}))[0]}}),mounted:function(){this.fetchSessions(),this.$route.hash&&this.$scrollTo(this.$route.hash)},beforeDestroy:function(){this.isBeforeDestroyed=!0,this.$validator.pause()},methods:I(I(I(I(I(I(I({},Object(o["Nb"])(["patchUser","disableTwitter"])),Object(o["Sb"])(["setUserField"])),Object(o["a"])(["fetchUserMe"])),Object(o["db"])(["fetchUserSettings","disableGoogle"])),Object(o["r"])(["setInitAuth"])),Object(o["fb"])(["setExistedUsernames"])),{},{doDisableTwitter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.authUser.isEmailChecked&&this.authUser.hasPassword){e.next=3;break}return alert(this.$i18n.t("message.disconnect_twitter_error")),e.abrupt("return");case 3:return this.disabledTwitter=!0,e.next=6,this.disableTwitter();case 6:this.disabledTwitter=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doDisableGoogle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.authUser.isEmailChecked&&this.authUser.hasPassword){e.next=3;break}return alert(this.$i18n.t("message.disconnect_twitter_error")),e.abrupt("return");case 3:return this.disabledGoogle=!0,e.next=6,this.disableGoogle();case 6:this.disabledGoogle=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveAccountInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$validator.validateAll("action-info-form");case 3:if(t=e.sent,!t){e.next=11;break}return this.setExistedUsernames(),s=this.username?this.username:"".concat(this.userLoginPrefix).concat(this.authUser.id),e.next=9,this.patchUser({username:s});case 9:i=e.sent,i&&i.success&&(this.isBeforeDestroyed||this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}),this.setUserField({userId:this.authUser.id,field:"username",status:s}),this.usernameProxy=null);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchSessions:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u();case 3:this.sessions=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(){return e.apply(this,arguments)}return t}(),closeAllSessions:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingSessions=!0,e.prev=1,e.next=4,d();case 4:t=e.sent,t&&t.success&&(this.sessions=[],this.setInitAuth(!1),this.$router.push("/")),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:this.loadingSessions=!1;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),changePassword:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingChangePassword=!0,e.next=3,this.$validator.validateAll("change-password-form");case 3:if(t=e.sent,!t){e.next=23;break}return e.prev=5,e.next=8,Object(p["b"])({oldPassword:this.old_password,newPassword:this.new_password,checkPassword:this.new_password2});case 8:if(s=e.sent,!s||!s.success){e.next=18;break}return this.authUser.hasPassword||this.setUserField({userId:this.authUser.id,field:"hasPassword",status:!0}),this.old_password="",this.new_password="",this.new_password2="",this.showCollapsePassword=!1,alert(this.$i18n.t("message.change_password_success_message")),e.next=18,this.$validator.reset();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](5),Object(l["b"])(e.t0);case 23:this.loadingChangePassword=!1;case 24:case"end":return e.stop()}}),e,this,[[5,20]])})));function t(){return e.apply(this,arguments)}return t}(),deleteAccount:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDeleting=!0,e.prev=1,e.next=4,Object(p["bb"])(this.captchaCode);case 4:if(t=e.sent,!t||!t.success){e.next=10;break}return e.next=8,this.fetchUserSettings();case 8:this.isDeleteConfirmShow=!1,this.isDeleteInitiated||(window.location="/");case 10:e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),this.isDeleteConfirmShow=!1,Object(l["b"])(e.t0);case 16:this.loadingDeleting=!1;case 17:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),cancelDeleteAccount:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDeleting=!0,e.prev=1,e.next=4,Object(p["X"])();case 4:if(t=e.sent,!t||!t.success){e.next=8;break}return e.next=8,this.fetchUserSettings();case 8:e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](1);case 12:this.loadingDeleting=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),openRestoreModal:function(){this.$root.$emit("bv::show::modal","ModalRestore")},getCaptchaUrl:function(){this.captchaUrl="".concat(c["a"],"/captcha/default")},toggleCollapseDeleteAccount:function(){this.showCollapseDeleteAccount||this.getCaptchaUrl(),this.showCollapseDeleteAccount=!this.showCollapseDeleteAccount}})},M=E,A=Object(S["a"])(M,i,r,!1,null,null,null);t["default"]=A.exports},5648:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[e.authUser.isEmailChecked?s("form",{staticClass:"b-settings__form m-reset-pt"},[s("checkbox-toggle",{staticClass:"m-size-lg-text m-gap-first",attrs:{name:"push-notifications",disabled:e.pushNotifications_disabled,label:e.$t("message.push_notifications_block_title")},model:{value:e.pushNotifications_checked,callback:function(t){e.pushNotifications_checked=t},expression:"pushNotifications_checked"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.pushNotifications_checked,expression:"pushNotifications_checked"}],staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-input__wrapper m-only-label m-reset-tg"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.push_notifications_block_title_new")))])]),e._l(e.notifications.webpush,(function(t){return[s("checkbox",{key:t.code,attrs:{label:t.title,disabled:t.disabled},on:{input:function(s){return e.sendCurrent(t,"webpush")}},model:{value:t.isEnabled,callback:function(s){e.$set(t,"isEnabled",s)},expression:"webpush.isEnabled"}})]}))],2),s("checkbox-toggle",{staticClass:"m-size-lg-text m-gap-section-header",attrs:{name:"email-notifications",disabled:e.disabledEmailNotifications,label:e.$t("message.email_notifications_block_title")},on:{input:function(t){return e.sendCurrent(e.isEmailNotificationsEnabled,"isEmailNotificationsEnabled","disabledEmailNotifications")}},model:{value:e.isEmailNotificationsEnabled,callback:function(t){e.isEmailNotificationsEnabled=t},expression:"isEmailNotificationsEnabled"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmailNotificationsEnabled,expression:"isEmailNotificationsEnabled"}],staticClass:"g-input__fieldset for_email_notifications_enabled"},[s("checkbox-toggle",{directives:[{name:"show",rawName:"v-show",value:e.isEmailNotificationsEnabled,expression:"isEmailNotificationsEnabled"}],staticClass:"m-size-lg-text",attrs:{name:"showFullText",disabled:e.disabledFullTextInEmailNotify,label:e.$t("message.show_full_text_of_the_message")},on:{input:function(t){return e.sendCurrent(e.showFullTextInEmailNotify,"showFullTextInEmailNotify","disabledFullTextInEmailNotify")}},model:{value:e.showFullTextInEmailNotify,callback:function(t){e.showFullTextInEmailNotify=t},expression:"showFullTextInEmailNotify"}}),s("checkbox-toggle",{directives:[{name:"show",rawName:"v-show",value:e.isEmailNotificationsEnabled,expression:"isEmailNotificationsEnabled"}],staticClass:"m-size-lg-text",attrs:{name:"isMonthlyNewsletters",disabled:e.disabledMonthlyNewsletter,label:e.$t("message.monthly_newsletter")},on:{input:function(t){return e.sendCurrent(e.isMonthlyNewsletters,"isMonthlyNewsletters","disabledMonthlyNewsletter")}},model:{value:e.isMonthlyNewsletters,callback:function(t){e.isMonthlyNewsletters=t},expression:"isMonthlyNewsletters"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmailNotificationsEnabled,expression:"isEmailNotificationsEnabled"}],staticClass:"g-input__fieldset for_email_notifications_enabled"},[s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.email_notifications_block_title_new")))])]),e._l(e.notificationsEmail,(function(t){return[s("checkbox",{key:t.code,attrs:{label:t.title,disabled:t.disabled},on:{input:function(s){return e.sendCurrent(t,"email")}},model:{value:t.isEnabled,callback:function(s){e.$set(t,"isEnabled",s)},expression:"email.isEnabled"}})]})),s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.notifications_new_likes_summary")))]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.emailNewLikesSummaryOptions,searchable:!1},on:{input:function(t){return e.sendCurrent({code:"new_likes_digest",value:e.emailNewLikesSummary},"email")}},model:{value:e.emailNewLikesSummary,callback:function(t){e.emailNewLikesSummary=t},expression:"emailNewLikesSummary"}})],1)]),s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.notifications_new_posts_summary")))]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.emailNewPostsSummaryOptions,searchable:!1},on:{input:function(t){return e.sendCurrent({code:"new_posts_digest",value:e.emailNewPostsSummary},"email")}},model:{value:e.emailNewPostsSummary,callback:function(t){e.emailNewPostsSummary=t},expression:"emailNewPostsSummary"}})],1)]),s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.email_notifications_chat_summary_title")))]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.emailNewPrivateSummaryOptions,searchable:!1},on:{input:function(t){return e.sendCurrent({code:"new_unread_chats_messages_digest",value:e.emailNewPrivateSummary},"email")}},model:{value:e.emailNewPrivateSummary,callback:function(t){e.emailNewPrivateSummary=t},expression:"emailNewPrivateSummary"}})],1)]),s("checkbox",{attrs:{label:e.$t("message.receive_less_notifications_title"),disabled:e.disabledShouldReceiveLessNotifications},model:{value:e.shouldReceiveLessNotifications,callback:function(t){e.shouldReceiveLessNotifications=t},expression:"shouldReceiveLessNotifications"}})],2),s("div",{staticClass:"g-section__header m-telegram-bot"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.notifications_telegram_title"))+" ")]),s("button",{staticClass:"g-btn m-rounded m-border m-sm m-bold",attrs:{type:"button"},on:{click:e.doShowTelegramBotLink}},[e._v(" "+e._s(e.$t("message.get_link"))+" ")])]),s("p",{staticClass:"g-input__help m-danger"},[e._v(" "+e._s(e.$t("message.do_not_share_link"))+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.authUser.isTelegramConnected,expression:"authUser.isTelegramConnected"}],staticClass:"g-input__fieldset for_telegram_notifications_enabled"},[s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.telegram_notifications_block_title_new")))])]),e._l(e.notifications.telegram,(function(t){return[s("checkbox",{key:t.code,attrs:{label:t.title,disabled:t.disabled},on:{input:function(s){return e.sendCurrent(t,"telegram")}},model:{value:t.isEnabled,callback:function(s){e.$set(t,"isEnabled",s)},expression:"telegram.isEnabled"}})]}))],2),s("modal-security-check",{on:{confirm:e.doShowTelegramBotLink},model:{value:e.showTelegramBotLink,callback:function(t){e.showTelegramBotLink=t},expression:"showTelegramBotLink"}}),s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.message_notifications_block_title"))+" ")])]),s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.message_notifications_block_title_new")))])]),e._l(e.notifications.message,(function(t){return[s("checkbox",{key:t.code,attrs:{label:t.title,disabled:t.disabled},on:{input:function(s){return e.sendCurrent(t,"message")}},model:{value:t.isEnabled,callback:function(s){e.$set(t,"isEnabled",s)},expression:"message.isEnabled"}})]}))],2),s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.toast_notifications_block_title"))+" ")])]),s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.toast_notifications_block_title_new")))])]),e._l(e.notifications.toast,(function(t){return[s("checkbox",{key:t.code,attrs:{label:t.title,disabled:t.disabled},on:{input:function(s){return e.sendCurrent(t,"toast")}},model:{value:t.isEnabled,callback:function(s){e.$set(t,"isEnabled",s)},expression:"toast.isEnabled"}})]}))],2)],1):s("change-email",{staticClass:"w-100"})],1)},r=[],a=(s("8e6e"),s("96cf"),s("3b8d")),n=(s("456d"),s("ac6a"),s("c5f6"),s("7514"),s("bd86")),o=s("9b02"),c=s.n(o),l=s("d634"),u=s("2612"),d=s("194ea"),p=s("76db"),h=s("1569"),m=s("d1e5"),f=s("fa5d"),g=(s("7f7f"),s("34ef"),s("a481"),s("14b9"),s("09e4"));function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={watch:{pushNotifications_checked:function(e){this.pushNotifications_disabled=!0,e?this.pushNotifications_isSubscribed?this.pushNotifications_disabled=!1:this.$_pushNotifications_subscribeUser():this.$_pushNotifications_unsubscribeUser()}},data:function(){return{pushNotifications_swRegistration:null,pushNotifications_isSubscribed:!1,pushNotifications_checked:!1,pushNotifications_disabled:!1}},mounted:function(){this.$_pushNotifications_init()},computed:b({},Object(l["q"])(["getInit"])),methods:{$_pushNotifications_updateBtn:function(){if("denied"===Notification.permission)return this.pushNotifications_checked=!1,void(this.pushNotifications_disabled=!0);this.pushNotifications_checked=this.pushNotifications_isSubscribed,this.pushNotifications_disabled=!1},$_pushNotifications_init:function(){var e=this;"serviceWorker"in navigator&&"PushManager"in window?(navigator.serviceWorker.register("/sw.js"),navigator.serviceWorker.ready.then((function(t){e.pushNotifications_swRegistration=t,e.$_pushNotifications_initializeUI()})).catch((function(e){Sentry.captureException(e),console.log("$_pushNotifications_init error",e)}))):(this.pushNotifications_checked=!1,this.pushNotifications_disabled=!0)},$_pushNotifications_initializeUI:function(){var e=this;this.pushNotifications_swRegistration.pushManager.getSubscription().then((function(t){e.pushNotifications_isSubscribed=!(null===t),e.$_pushNotifications_updateBtn()}))},$_pushNotifications_urlB64ToUint8Array:function(e){if(!e)return null;for(var t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=window.atob(s),r=new Uint8Array(i.length),a=0;a<i.length;a+=1)r[a]=i.charCodeAt(a);return r},$_pushNotifications_subscribeUser:function(){var e=this,t=this.$_pushNotifications_urlB64ToUint8Array(this.getInit.pwaPublicKey);this.pushNotifications_swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t}).then((function(t){var s=JSON.parse(JSON.stringify(t));try{Object(u["nb"])({subscription:s})}catch(i){Object(g["b"])(i)}e.pushNotifications_isSubscribed=!0,e.$_pushNotifications_updateBtn()})).catch((function(t){e.$_pushNotifications_updateBtn(),"NotAllowedError"!==t.name&&"Registration failed - permission denied"!==t.message&&20!==t.code&&Sentry.captureException(t)}))},$_pushNotifications_unsubscribeUser:function(){var e=this;this.pushNotifications_swRegistration.pushManager.getSubscription().then((function(e){if(e)return e.unsubscribe()})).catch((function(e){Sentry.captureException(e)})).then((function(){e.pushNotifications_isSubscribed=!1,e.$_pushNotifications_updateBtn()}))}}},w=s("29d7");function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var C={name:"SettingsNotifications",components:{Checkbox:p["a"],CheckboxToggle:h["a"],ChangeEmail:d["default"],CustomSelect:m["a"],ModalSecurityCheck:f["a"]},mixins:[_,w["a"]],data:function(){return{loading:!1,notifications:{},pushNotifications_checked:!1,pushNotifications_disabled:!1,isEmailNotificationsEnabled:!1,disabledEmailNotifications:!1,showTelegramBotLink:!1,telegramAlertShow:!1,disabledShouldReceiveLessNotifications:!1,showFullTextInEmailNotify:!1,isMonthlyNewsletters:!1,disabledFullTextInEmailNotify:!1,disabledMonthlyNewsletter:!1,emailNewLikesSummaryOptions:[{code:"0",name:this.$i18n.t("message.option_disabled")},{code:"1",name:this.$i18n.t("message.option_hour_digest")},{code:"3",name:this.$i18n.t("message.option_hours_digest",{HOURS:3})},{code:"6",name:this.$i18n.t("message.option_hours_digest",{HOURS:6})},{code:"12",name:this.$i18n.t("message.option_hours_digest",{HOURS:24})},{code:"24",name:this.$i18n.t("message.option_hours_digest",{HOURS:24})}],emailNewPostsSummaryOptions:[{code:"0",name:this.$i18n.t("message.option_disabled")},{code:"1",name:this.$i18n.t("message.option_hour_digest")},{code:"3",name:this.$i18n.t("message.option_hours_digest",{HOURS:3})},{code:"6",name:this.$i18n.t("message.option_hours_digest",{HOURS:6})},{code:"12",name:this.$i18n.t("message.option_hours_digest",{HOURS:12})},{code:"24",name:this.$i18n.t("message.option_hours_digest",{HOURS:24})}],emailNewPrivateSummaryOptions:[{code:"-1",name:this.$i18n.t("message.option_instantly")},{code:"0",name:this.$i18n.t("message.option_disabled")},{code:"1",name:this.$i18n.t("message.option_hour_digest")},{code:"3",name:this.$i18n.t("message.option_hours_digest",{HOURS:3})},{code:"6",name:this.$i18n.t("message.option_hours_digest",{HOURS:6})},{code:"12",name:this.$i18n.t("message.option_hours_digest",{HOURS:12})},{code:"24",name:this.$i18n.t("message.option_hours_digest",{HOURS:24})}]}},computed:k(k(k(k({},Object(l["Ob"])(["user","hasUser","userId"])),Object(l["b"])(["authUser"])),Object(l["eb"])(["allSettings"])),{},{notificationsEmail:function(){return this.notifications.email?this.notifications.email.filter((function(e){return!("new_likes_digest"===e.code||"new_posts_digest"===e.code||"new_unread_chats_messages_digest"===e.code)})):[]},emailNewLikesSummary:{get:function(){return this.notifications.email?this.notifications.email.find((function(e){return"new_likes_digest"===e.code})).value:""},set:function(e){this.notifications.email.find((function(e){return"new_likes_digest"===e.code})).value=Number(e)}},emailNewPostsSummary:{get:function(){return this.notifications.email?this.notifications.email.find((function(e){return"new_posts_digest"===e.code})).value:""},set:function(e){this.notifications.email.find((function(e){return"new_posts_digest"===e.code})).value=Number(e)}},emailNewPrivateSummary:{get:function(){return this.notifications.email?this.notifications.email.find((function(e){return"new_unread_chats_messages_digest"===e.code})).value:""},set:function(e){this.notifications.email.find((function(e){return"new_unread_chats_messages_digest"===e.code})).value=Number(e)}},preparedRequest:function(){return{isEmailNotificationsEnabled:this.isEmailNotificationsEnabled,notifications:this.preparedNotifications,showFullTextInEmailNotify:this.showFullTextInEmailNotify,isMonthlyNewsletters:this.isMonthlyNewsletters}},preparedNotifications:function(){var e=this,t={};return Object.keys(this.notifications).forEach((function(s){t[s]=e.notifications[s].map((function(e){var t={code:e.code};return"new_likes_digest"===e.code||"new_posts_digest"===e.code||"new_unread_chats_messages_digest"===e.code?t.value=e.value:t.value=e.isEnabled,t}))})),t},shouldReceiveLessNotifications:{get:function(){return this.authUser.shouldReceiveLessNotifications},set:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.sendCurrentUserField(t,"shouldReceiveLessNotifications","disabledShouldReceiveLessNotifications");case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}),watch:{allSettings:{handler:function(e){this.setDataFromSettingsStore(e)},deep:!0}},mounted:function(){this.fetchData(),this.setDataFromSettingsStore()},beforeDestroy:function(){this.$validator.pause()},methods:k(k(k({},Object(l["Sb"])(["setUserField"])),Object(l["fb"])(["setSettings"])),{},{fetchData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["F"])();case 3:t=e.sent,Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.disabled=!1}))})),this.notifications=t,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("e - ",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),doShowTelegramBotLink:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["J"])();case 3:t=e.sent,s=this.$i18n.t("message.telegram_bot_link_alert",{URL:t.url}),alert(s,!0),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),105===c()(e.t0,"data.error.code")&&(this.showTelegramBotLink=!0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:this.preparedRequest,s=a.length>1?a[1]:void 0,i=a.length>2?a[2]:void 0,this.loading=!0,e.prev=4,e.next=7,Object(u["W"])(t);case 7:this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}),e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](4),e.next=14,this.fetchData();case 14:this.loading=!1,void 0!==i?(r={isEmailNotificationsEnabled:this.isEmailNotificationsEnabled,showFullTextInEmailNotify:!!this.isEmailNotificationsEnabled&&this.showFullTextInEmailNotify,isMonthlyNewsletters:!!this.isEmailNotificationsEnabled&&this.isMonthlyNewsletters},this.setSettings(r),this[i]=!this[i]):s.disabled=!1;case 16:case"end":return e.stop()}}),e,this,[[4,10]])})));function t(){return e.apply(this,arguments)}return t}(),sendCurrent:function(e,t,s){var i={};if(void 0!==s?this[s]=!this[s]:e.disabled=!0,"isEmailNotificationsEnabled"===t)i.isEmailNotificationsEnabled=e,i.isEmailNotificationsEnabled||(i.showFullTextInEmailNotify=!1,i.isMonthlyNewsletters=!1);else if("isMonthlyNewsletters"===t)i.isMonthlyNewsletters=this.isMonthlyNewsletters;else if("showFullTextInEmailNotify"===t)i.showFullTextInEmailNotify=e;else{i.notifications={},i.notifications[t]=[];var r=e.hasOwnProperty("isEnabled")?e.isEnabled:e.value;i.notifications[t].push({code:e.code,value:r})}this.save(i,e,s)},setDataFromSettingsStore:function(){this.showFullTextInEmailNotify=this.allSettings.showFullTextInEmailNotify,this.isEmailNotificationsEnabled=this.allSettings.isEmailNotificationsEnabled,this.isMonthlyNewsletters=this.allSettings.isMonthlyNewsletters}})},O=C,S=s("2877"),P=Object(S["a"])(O,i,r,!1,null,null,null);t["default"]=P.exports},"5e34":function(e,t,s){"use strict";s("8e6e"),s("456d"),s("a481"),s("ac6a"),s("7f7f"),s("6762"),s("2fdb");var i=s("bd86"),r=s("a9ee"),a=s.n(r),n=s("c1df"),o=s.n(n),c=s("4623"),l=s.n(c),u=s("ad97"),d=s("d634");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={mixins:[u["a"]],created:function(){l()(o.a)},data:function(){return{mimeType:"audio/mpeg",recorderType:r["MediaStreamRecorder"],btn:null,recStopBtn:null,closeBtn:null,audioMessagePanel:null,limit:60,isRecording:!1,firstRun:null,audioDeviceId:"",USERID:null,state:"",recorder:null,hasBeforeunloadAudiorecorderEvent:!1,beforeEachAudiorecorderFunc:null,microphone:null}},computed:h(h({},Object(d["b"])(["authUser"])),{},{checkLeaveAudiorecorder:function(){return"recording"===this.state},checkLeaveTextAudiorecorder:function(){return this.$i18n.t("message.audiorecorder_leave_msg")},routerCheckLeaveComponent:function(){return["ChatsSend","Chat"].includes(this.$route.name)?"chat":""}}),mounted:function(){this.beforeEachAudiorecorderFunc=this.routerCheckLeave({conditionField:"checkLeaveAudiorecorder",textField:"checkLeaveTextAudiorecorder",component:this.routerCheckLeaveComponent}),this.beforeunloadCheckLeave({watchField:"checkLeaveAudiorecorder",conditionField:"checkLeaveAudiorecorder",eventField:"hasBeforeunloadAudiorecorderEvent",funcField:"handleBeforeUnloadAudiorecorder"}),this.$root.$once("removeAllBeforeUnloadListeners",this.removeListeners)},beforeDestroy:function(){document.body.classList.contains("open-panel")&&document.body.classList.remove("open-panel");var e=document.getElementById("attach_file_photo");e&&e.removeAttribute("disabled"),this.$root.$off("removeAllBeforeUnloadListeners",this.removeListeners),this.beforeEachAudiorecorderFunc&&this.beforeEachAudiorecorderFunc(),this.hasBeforeunloadAudiorecorderEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnloadAudiorecorder),this.hasBeforeunloadAudiorecorderEvent=!1)},methods:{handleBeforeUnloadAudiorecorder:function(e){if(this.hasBeforeunloadAudiorecorderEvent){var t=this.checkLeaveTextChat;return e=e||window.event,e&&(e.returnValue=t),t}},isMimeTypeSupported:function(e){return"undefined"!==typeof MediaRecorder&&"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported(e)},blobtoFile:function(e,t){var s="";switch(e.type){case"audio/ogg":s="ogg";break;case"audio/webm":s="webm";break;case"video/webm":case"video/mp4":s="mp4";break;case"audio/wav":s="wav";break;default:s="mp3";break}try{return new File([e],"".concat(t,".").concat(s),{type:e.type})}catch(r){var i=new Blob([e],{type:e.type});return i.name="".concat(t,".").concat(s),Sentry.captureException(r),i}},fillDevicesList:function(e){var t=!0,s=!0;e.forEach((function(e,i){var r,a,n="";if("videoinput"===e.kind)r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Camera ".concat(i),a=document.querySelectorAll(".js-video-menu ul"),t&&(t=!1,n="m-active");else{if("audioinput"!==e.kind)return;r=e.label?e.label.replace(/ *\([^)]*\) */g,""):"Microphone ".concat(i),a=document.querySelectorAll(".js-audio-menu ul"),s&&(s=!1,n="m-active")}var o=document.createElement("li"),c=document.createElement("a");c.dataset.id=i,c.classList.add("b-streaming__mic-select__option"),n&&c.classList.add(n),c.innerHTML='<span class="b-dropdown__icon"><svg aria-hidden="true" class="g-icon"><use xlink:href="#icon-done"></use></svg></span>'.concat(r),o.appendChild(c),a.forEach((function(e){e.appendChild(o)}))}))},updateRecordProgressBar:function(e,t,s){var i=2*Math.PI*28,r=s.querySelector(".progress__value"),a=Math.round(e/t*100);r.style.strokeDashoffset=i*(1-a/100),r.style.strokeDasharray=i},setChatSendBtnState:function(){var e=!1;if(e&&"true"===e.dataset.can_send){var t=document.querySelector(".js-chat__audio-record-btn");t&&"recording"===t.dataset.state?e.disabled=!0:document.querySelector(".b-dropzone__preview.m-tip")?e.disabled=!1:this.authUser.canChat&&(e.disabled=!(document.querySelector(".b-chat__message-input").value.trim().replace(/(\r\n|\n|\r)/gm,"").length&&document.querySelectorAll(".b-dropzone__preview").length===document.querySelectorAll(".b-dropzone__preview input").length||document.querySelectorAll(".b-dropzone__preview").length&&document.querySelectorAll(".b-dropzone__preview").length===document.querySelectorAll(".b-dropzone__preview input").length))}},showHidePanel:function(e){this.audioMessagePanel.classList.toggle("m-hidden",!e),document.body.classList.toggle("open-panel",e);var t=document.getElementById("attach_file_photo"),s=!this.audioMessagePanel.classList.contains("m-hidden");t&&(s?t.setAttribute("disabled",!0):t.removeAttribute("disabled"));var i=document.querySelector(".b-chat__footer");i&&i.classList.toggle("m-panel-shown",e)},audiorecorderInit:function(e){var t=this,s=e.btn,i=e.recStopBtn,a=e.closeBtn,n=e.userId,o=e.audioMessagePanel,c=e.firstRun,l=e.inputId,u=void 0===l?"fileupload_photo":l,d=e.context;this.btn=document.getElementById(s),this.recStopBtn=i,this.closeBtn=a,this.audioMessagePanel=o,this.USERID=n,this.firstRun=c,this.audioDeviceId=!1,this.inputId=u,this.isPostContext="post"===d,!1===this.isMimeTypeSupported(this.mimeType)&&(this.mimeType="audio/ogg",!1===this.isMimeTypeSupported(this.mimeType)&&(this.mimeType="audio/wav",this.recorderType=r["StereoAudioRecorder"])),this.btn&&this.btn.addEventListener("click",(function(){t.showHidePanel(!0),t.firstRun&&(t.firstRun=!1,navigator.mediaDevices.enumerateDevices().then((function(e){var s=e.filter((function(e){return"default"!==e.deviceId&&!e.label.includes("default")})),i={allDevices:s,audioDevices:s.filter((function(e){return"audioinput"===e.kind}))};0===i.audioDevices.length&&(alert(t.$i18n.t("message.audiorecorder_no_mic")),document.querySelector(".b-streaming__mic-select__btn").disabled=!0,document.querySelector(".b-streaming__mic-select__btn .g-icon use").setAttribute("xlink:href","#icon-voice-off")),1===i.audioDevices.length&&(document.querySelector(".b-streaming__mic-select__btn").disabled=!0),i.audioDevices.length&&(t.audioDeviceId=i.audioDevices[0].deviceId,t.fillDevicesList(i.audioDevices),t.audioMessagePanel.querySelectorAll(".js-audio-menu .b-streaming__mic-select__option").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var s=e.target;s.dataset.id&&i.audioDevices[s.dataset.id]&&(t.audioDeviceId=i.audioDevices[s.dataset.id].deviceId),t.audioMessagePanel.querySelector(".js-audio-menu .m-active").classList.remove("m-active"),s.classList.add("m-active")}))})))})).catch((function(e){console.log("".concat(e.name,": ").concat(e.message)),Sentry.captureException(e)}))),t.audioMessagePanel.querySelector(".b-streaming__mic-select").classList.remove("g-hidden")})),this.recStopBtn&&this.recStopBtn.addEventListener("click",(function(){"recording"===t.state?t.stopRec():t.rec()})),this.closeBtn&&this.closeBtn.addEventListener("click",(function(){t.showHidePanel(!1),"recording"===t.state&&t.stopRec(!1)}))},rec:function(){var e=this,t=!0;this.audioDeviceId&&(t={deviceId:{exact:this.audioDeviceId}}),navigator.mediaDevices.getUserMedia({audio:t}).then((function(t){e.microphone=t;var s=document.querySelector("#fileupload_photo");s&&(s.disabled=!0),e.audioMessagePanel.querySelector(".b-streaming__mic-select").classList.add("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-stop").classList.remove("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-rec").classList.add("g-hidden"),e.btn.dataset.state="recording",e.state="recording",e.setChatSendBtnState(),e.recorder=a()(e.microphone,{type:"audio",disableLogs:!0,mimeType:e.mimeType,recorderType:e.recorderType}),e.recorder.startRecording();var i=(new Date).getTime(),r=setInterval((function(){"recording"===e.state?(e.duration=Math.round(((new Date).getTime()-i)/1e3),e.updateRecordProgressBar(e.duration,e.limit,e.audioMessagePanel),e.duration&&(e.audioMessagePanel.querySelector(".js-chat__audio-record-timer").textContent=o.a.duration(e.duration,"seconds").format()),e.duration>=e.limit&&e.stopRec()):clearInterval(r)}),250)})).catch((function(t){e.btn.dataset.state="",e.state="",e.setChatSendBtnState(),alert(e.$i18n.t("message.audiomessage_mic_restricted_error")),"NotAllowedError"!==t.name&&Sentry.captureException(t)}))},stopRec:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.recorder.stopRecording((function(s){e.showHidePanel(!1),e.audioMessagePanel.querySelector(".progress__value").removeAttribute("style"),e.recStopBtn.querySelector(".js-chat__audio-record-state-stop").classList.add("g-hidden"),e.recStopBtn.querySelector(".js-chat__audio-record-state-rec").classList.remove("g-hidden"),e.audioMessagePanel.querySelector(".js-chat__audio-record-timer").textContent="0:00",e.btn.dataset.state=null;var i=document.querySelector("#".concat(e.inputId));if(t){e.isPostContext||(e.btn.disabled=!0);var r,a=e.recorder.getBlob(),n=e.blobtoFile(a,"audiorecord_".concat(e.USERID,"_").concat(o()().format("YYYYMMDDHHmmss")));window.CustomEvent?r=new CustomEvent("selectFile",{detail:{file:n}}):(r=document.createEvent("CustomEvent"),r.initCustomEvent("selectFile",!0,!0,{file:n})),i.dispatchEvent(r)}i.disabled=!1,e.recorder.destroy(),e.recorder=null,e.microphone&&(e.microphone.stop(),e.microphone=null)})),this.state="recorded"},removeListeners:function(){window.removeEventListener("beforeunload",this.handleBeforeUnloadAudiorecorder)}}}},6:function(e,t){},"60b3":function(e,t,s){"use strict";s("7f7f"),s("ac6a"),s("456d");t["a"]={data:function(){return{savingErrors:{}}},methods:{focusOnSavingError:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=Object.keys(e),i=s[0];i&&(t?this.$scrollTo("[name=".concat(i,"]")):this.$scrollTo("#".concat(i)))},deleteSavingErrorsOnInput:function(e){delete this.savingErrors[e]}}}},6344:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.authUser.isPerformer&&e.isGetUserMediaAvailable?s("div",{ref:"audioMessagePanel",staticClass:"b-chat__panel js-chat__audiorecord-panel"},[s("div",{staticClass:"container"},[s("span",{staticClass:"b-chat__panel__title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice",attrs:{"extra-class":"b-chat__panel__icon"}}),e._v(" "+e._s(e.$t("message.chat_recording_audio_title"))+" ")]),s("div",{staticClass:"b-chat__panel__rec-wrapper"},[s("div",{staticClass:"b-chat__panel__rec-timer js-chat__audio-record-timer"},[e._v(" 0:00 ")]),s("button",{ref:"audioStopRecordBtn",staticClass:"b-chat__audio-record-btn-stop js-chat__audio-record-btn-rec",attrs:{type:"button"}},[s("span",{staticClass:"js-chat__audio-record-state-stop"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-stop"})]),s("span",{staticClass:"b-chat__videorec-btn__icon-rec js-chat__audio-record-state-rec"}),s("svg",{staticClass:"svg-progress",attrs:{width:"60",height:"60",viewBox:"0 0 60 60"}},[s("circle",{staticClass:"progress__meter",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}}),s("circle",{staticClass:"progress__value",attrs:{cx:"30",cy:"30",r:"28","stroke-width":"4"}})])]),s("b-dropdown",{staticClass:"b-volume-btn m-btn-round b-streaming__mic-select",attrs:{left:"","toggle-class":"b-volume-btn__el b-streaming__mic-select__btn","menu-class":"m-list-switcher"}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice"})]),s("div",{staticClass:"js-audio-menu"},[s("ul")])],2),s("button",{ref:"closeMessageAudioBtn",staticClass:"g-btn-close js-audio-message-close",attrs:{type:"button"},on:{click:e.toggleRecordPanel}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],1)])]):e._e()},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("d634"),o=(s("16d9"),s("5e34"));function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={mixins:[o["a"]],data:function(){return{isShowRecordPanel:!1}},computed:l(l({},Object(n["b"])(["authUser"])),{},{isGetUserMediaAvailable:function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia}}),props:{toggleRecordPanel:{type:Function,required:!0}},methods:{},mounted:function(){var e=this,t=document.getElementById("js-audioRecordBtn");t&&this.$refs.audioStopRecordBtn&&this.isGetUserMediaAvailable&&this.$nextTick((function(){e.audiorecorderInit({btn:"js-audioRecordBtn",recStopBtn:e.$refs.audioStopRecordBtn,closeBtn:e.$refs.closeMessageAudioBtn,audioMessagePanel:e.$refs.audioMessagePanel,userId:e.authUser.id,firstRun:!0,inputId:"fileupload_photo",context:"post"})}))}},d=u,p=s("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);t["a"]=h.exports},"673f":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"b-settings__content":e.$route.meta.isPage}},[e.authUser.isEmailChecked?e._e():[s("div",{staticClass:"g-section"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.need_confirm_email_title"))+" ")]),e.noEmailDescription?s("p",[e._v(" "+e._s(e.noEmailDescription)+" ")]):e._e()]),s("form",{staticClass:"b-settings__form"},[s("InputOF",{attrs:{value:e.authUser.email,label:e.$t("message.email_label"),readonly:""}},[s("template",{slot:"help-text"},[s("span",{staticClass:"g-danger-text"},[e._v(" "+e._s(e.$t("message.email_not_verified_message",{EMAIL:e.authUser.email}))+" ")]),s("router-link",{staticClass:"g-btn m-flat",attrs:{to:{name:"SettingsChangeEmail"}}},[e._v(" "+e._s(e.$t("message.change_email_label"))+" ")])],1)],2),s("div",{staticClass:"g-btn__wrapper"},[s("ButtonOF",{staticClass:"g-btn__wrapper__small",attrs:{type:"button",text:e.$t("message.back_button"),bordered:!0},on:{click:e.goBack}}),s("ButtonOF",{staticClass:"g-btn__wrapper__small",attrs:{text:e.$t("message.send_confirmation_button"),disabled:e.disabled},on:{click:e.sendEmailConfirmation}})],1)],1)]],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("a481"),s("bd86")),o=s("c1df"),c=s.n(o),l=s("d634"),u=s("13ca"),d=s("0fc7"),p=s("1560");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={name:"SettingsEmail",components:{InputOF:u["a"],ButtonOF:d["a"]},mixins:[p["a"]],props:{noEmailDescription:{type:String,default:""}},data:function(){return{disabled:!1}},computed:m(m({},Object(l["b"])(["authUser"])),Object(l["eb"])(["allSettings"])),watch:{$route:{handler:function(e,t){!e||!e.query.send||t&&e.query.send===t.query.send||(this.sendEmailConfirmation(),this.$router.replace(m(m({},this.$route),{},{query:{}})))},immediate:!0}},mounted:function(){this.fetchUserSettings()},methods:m(m({},Object(l["db"])(["fetchUserSettings","createConfirmEmail"])),{},{timeLeft:function(e){var t=c()()-c()(e);return 60-Math.round(t/1e3/60)},sendEmailConfirmation:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.disabled=!0,!(this.allSettings.confirmEmailSentAt&&this.timeLeft(this.allSettings.confirmEmailSentAt)>0&&this.timeLeft(this.allSettings.confirmEmailSentAt)<=60)){e.next=5;break}return alert(this.$i18n.t("message.send_confirm_email_time",{MINUTES:this.timeLeft(this.allSettings.confirmEmailSentAt)})),this.disabled=!1,e.abrupt("return");case 5:return e.next=7,this.createConfirmEmail();case 7:t=e.sent,this.disabled=!1,t&&t.success&&alert(this.$i18n.t("message.send_confirm_email"));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},g=f,v=s("2877"),b=Object(v["a"])(g,i,r,!1,null,null,null);t["default"]=b.exports},"6f05":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[e._e(),e.enableSettingsCallingSection?s("div",{staticClass:"b-settings_calling"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_messaging_calling_title"))+" ")])]),s("div",{staticClass:"b-settings__form"},[s("div",{staticClass:"g-input__fieldset"},[s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:e.callPriceValidationRules,expression:"callPriceValidationRules"}],attrs:{id:"input-call-price","data-vv-as":"Call price",name:"callPrice",type:"price",min:e.callMinPrice,max:e.callMaxPrice,step:.01,"wrapper-classes":"b-settings__subscription-price__wrapper b-input__wrapper m-with-clear-btn",label:e.$t("message.call_price_label"),placeholder:e.$t("message.free_placeholder"),disabled:!e.authUser.canEarn,error:e.errors.first("callPrice")},model:{value:e.localCallPrice,callback:function(t){e.localCallPrice=t},expression:"localCallPrice"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"b-settings__subscription-price__curr-sign"},[e._v("$")])]),s("template",{slot:"afterInput"},[s("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.$t("message.settings_messaging_call_price_info"))}})])],2),s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.settings_messaging_allow_incoming_calls"))+" ")]),s("div",{staticClass:"g-select__wrapper"},[s("custom-select",{attrs:{options:e.allowIncomingCallOptions,searchable:!1,required:!0},model:{value:e.localAllowIncomingCall,callback:function(t){e.localAllowIncomingCall=t},expression:"localAllowIncomingCall"}}),s("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.$t("message.settings_messaging_allow_incoming_calls_info_1"))}})],1)])],1)])]):e._e(),e.enableSettingsCallingSection&&e.serverValidationError?s("div",{staticClass:"g-input__error"},[e._v(" "+e._s(e.serverValidationError)+" ")]):e._e(),e.enableSettingsCallingSection?s("ButtonOF",{attrs:{text:e.$t("message.save_changes_button"),loading:e.loading},on:{click:e.save}}):e._e(),s("form",{staticClass:"m-mb-20",class:{"b-welcome-section-first":!e.enableSettingsCallingSection}},[s("checkbox-toggle",{staticClass:"m-size-lg-text",attrs:{name:"autoMessage",disabled:e.disabledreplyOnSubscribe,label:e.$t("message.welcome_chat_message")},on:{input:function(t){return e.changeSendAutoMessage(e.replyOnSubscribe,"replyOnSubscribe")}},model:{value:e.replyOnSubscribe,callback:function(t){e.replyOnSubscribe=t},expression:"replyOnSubscribe"}}),s("div",[e.isShowForm?s("auto-message",{attrs:{templates:e.getAutoMessage},on:{"send-form":function(){e.isShowForm=!e.isShowForm,e.isShowSaveBtn=!e.isShowSaveBtn}}}):e._e()],1)],1),e.tempateLoaded?[s("div",{staticClass:"text-center"},[s("spinner-loader")],1)]:e._e(),e.getAutoMessage&&!e.isShowForm?s("auto-message-item",{attrs:{templates:e.getAutoMessage}}):e._e(),e.getAutoMessage&&!e.isShowForm?s("div",{staticClass:"g-btn__wrapper"},[s("button",{staticClass:"g-btn m-border m-rounded",attrs:{type:"button"},on:{click:e.editMessage}},[e._v(" "+e._s(e.$t("message.edit"))+" ")]),s("button",{staticClass:"g-btn m-border m-rounded",attrs:{type:"button"},on:{click:function(t){return e.confirmRemoveTemplate("reply_on_subscribe")}}},[e._v(" "+e._s(e.$t("message.delete_card_button_new"))+" ")])]):e._e(),s("form",{staticClass:"b-checkbox-hint"},[s("checkbox-toggle",{staticClass:"m-size-lg-text m-mb-20",attrs:{name:"hideMessages",disabled:e.disabledAfterMessages,label:e.$t("message.settings_messaging_hide_outgoing")},on:{input:function(t){return e.toggleHideAfterMassMessages(e.hideAfterMassMessages)}},model:{value:e.hideAfterMassMessages,callback:function(t){e.hideAfterMassMessages=t},expression:"hideAfterMassMessages"}}),s("span",{staticClass:"g-icon-info m-icon-lg m-with-round-hover"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:e.$t("message.hide_mass_message_tooltip"),expression:"$t('message.hide_mass_message_tooltip')",modifiers:{enabled:!0}}],staticClass:"icon-info"})])],1),e.authUser.subscribePrice?e._e():s("form",[s("checkbox-toggle",{staticClass:"m-size-lg-text m-mb-20",attrs:{name:"messageOnlyFromFriends",disabled:e.disabledAcceptMessage,label:e.$t("message.dont_accept_messages_without_a_tip")},on:{input:function(t){return e.toggleCanAcceptMessageOnlyFromFriends(e.canAcceptMessageOnlyFromFriends)}},model:{value:e.canAcceptMessageOnlyFromFriends,callback:function(t){e.canAcceptMessageOnlyFromFriends=t},expression:"canAcceptMessageOnlyFromFriends"}})],1),s("modal-confirm",{attrs:{"modal-show":e.isShowModalConfirmAutoMessage,title:this.$i18n.t("message.delete_auto_message_templates"),text:this.$i18n.t("message.dialog_delete_auto_message_templates"),"agree-btn":this.$i18n.t("message.dialog_delete_post_button"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isShowModalConfirmAutoMessage=t},"update:modal-show":function(t){e.isShowModalConfirmAutoMessage=t},"on-agree":e.removeTemplate}})],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("9b02"),c=s.n(o),l=s("09e4"),u=s("13ca"),d=s("0fc7"),p=s("d1e5"),h=s("8b3f"),m=s("1569"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[[s("make-post",{ref:"makePost",staticStyle:{"border-top":"1px solid rgba(138,150,163,0.2)"},attrs:{"is-template":!0,"show-more-btn":!1,template:e.templates},on:{canSave:e.changeSaveBtnState}}),s("div",{staticClass:"g-btn__wrapper"},[s("button",{staticClass:"g-btn m-rounded m-border mr-1",attrs:{type:"button","data-can_send":"true",disabled:e.disabledSubmit},on:{click:e.cancelEditForm}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button","data-can_send":"true",disabled:e.disabledSubmit},on:{click:e.submitMessage}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])]],2)},g=[],v=s("d634"),b=s("f108");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={name:"AutoMessage",components:{MakePost:b["a"]},props:{templates:{type:Object,default:function(){}}},data:function(){return{disabledSubmit:!0}},computed:w(w({},Object(v["b"])(["authUser"])),{},{isGetUserMediaAvailable:function(){return void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia&&null!==navigator.mediaDevices.getUserMedia}}),methods:{submitMessage:function(){this.$refs.makePost.makeSubmitMessage(),this.$emit("send-form")},cancelEditForm:function(){this.$emit("send-form")},changeSaveBtnState:function(e){this.disabledSubmit=e}}},k=y,C=s("2877"),O=Object(C["a"])(k,f,g,!1,null,null,null),S=O.exports,P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"message",staticClass:"b-chat__message m-from-me",class:{"m-has-media":e.templates.mediaCount>0||e.templates.media.length,"m-photo":!!e.templates.media[0]&&"photo"===e.templates.media[0].type},staticStyle:{display:"flex","flex-direction":"column"}},[[e.templates.media.length?s("div",{staticClass:"b-chat__message__media w-100",class:{"m-audio":"audio"===e.templates.media[0].type,"m-photo":"photo"===e.templates.media[0].type,"m-video":"video"===e.templates.media[0].type&&e.templates.isMediaReady,"m-gif":"gif"===e.templates.media[0].type},style:{width:e.previewMediaWidth(e.currentMedia,!0)}},[s("div",{staticClass:"b-chat__message__media-wrapper"},[[s("div",{staticClass:"b-chat__message__media"},[e.visibleMediaWithoutAudio.length?s("post-media",{attrs:{templates:e.templates,post:e.templates,message:e.templates}}):e._e()],1),e.hasAudioVisible&&e.templates.isMediaReady?s("div",{staticClass:"chat-audio"},[s("audio",{ref:"audio",attrs:{controlslist:"nodownload"}},[s("source",{attrs:{type:e.fileType(e.audio.src),src:e.audio.src}})])]):e._e()],e.templates.isMediaReady?e._e():[e.templates.media.length&&!e.templates.media[0].src?s("div",{staticClass:"b-chat__message__media post_media m-processing mt-1"},[s("div",{staticClass:"b-processing-content"},[s("spinner-loader",{staticClass:"b-spinner-processing"}),e._v(" "+e._s(e.$t("message.media_currently_processing"))+" ")],1)]):e._e()]],2)]):e._e()],e.templates.text.length?s("div",{staticClass:"b-chat__message__text",domProps:{innerHTML:e._s(e.templates.text)}}):e._e(),s("span",{staticClass:"b-chat__message__time"},[e.templates.price>0?s("span",{attrs:{templates:"b-chat__message__payment-state"}},[e._v("$"+e._s(e.templates.price.toFixed(2).replace(".00","")))]):e._e()])],2)},x=[],j=s("25ac"),$=s("25e7"),T=s("ebdc"),D=s("3bc9"),I=s("3c15"),E=s("e528"),M={name:"TemplatessItem",components:{PostMedia:D["a"],SpinnerLoader:E["a"]},mixins:[j["a"],$["a"],I["a"]],props:{templates:{type:Object,required:!0},post:{type:Object,default:function(){}}},data:function(){return{confirmPay:!1,token:"",currentMediaIndex:0,swiperOptions:{autoHeight:!0,loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}},computed:{galleryMedia:function(){return this.templates.media.map((function(e){if("photo"===e.type)return e.src}))},currentMedia:function(){return this.templates.media[this.currentMediaIndex]},mediaPreviewType:function(){var e=this;return this.templates.media.length<2?"preview":this.templates.media.some((function(t,s){return!t.info||!t.info.preview||!t.info.preview.width||!t.info.preview.height||!e.templates.media[0].info||!e.templates.media[0].info.preview||!e.templates.media[0].info.preview.width||!e.templates.media[0].info.preview.height||s&&(t.info.preview.width/t.info.preview.height).toFixed(2)!==(e.templates.media[0].info.preview.width/e.templates.media[0].info.preview.height).toFixed(2)}))?"squarePreview":"preview"}},mounted:function(){this.updatePlayers()},updated:function(){this.updatePlayers()},methods:{updatePlayers:function(){this.$refs.audio&&T["a"].init(this.$refs.audio)},previewMediaWidth:function(e,t){var s,i;if(e&&e.info&&e.info.preview){var r=e.info.preview;s=r.width,i=r.height}if(!s||!i)return"";var a,n="squarePreview"===this.mediaPreviewType?1:i/s;a="squarePreview"===this.mediaPreviewType?"(min-width: ".concat(parseInt(s,10)+104,"px) and (min-height: ").concat(parseInt(s,10)+144,"px)"):"(min-width: ".concat(parseInt(s,10)+104,"px) and (min-height: ").concat(parseInt(i,10)+144,"px)");var o=window.matchMedia(a);return t&&o.matches?"".concat(s,"px"):"calc((100vh - 144px) / ".concat(n,")")}}},A=M,F=Object(C["a"])(A,P,x,!1,null,null,null),U=F.exports;function L(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function N(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?L(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):L(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var R={name:"SettingsMessaging",components:{ButtonOF:d["a"],InputOF:u["a"],CustomSelect:p["a"],ModalConfirm:h["a"],CheckboxToggle:m["a"],AutoMessage:S,AutoMessageItem:U,SpinnerLoader:E["a"]},data:function(){return{tempateLoaded:!1,loading:!1,messagePrice:"",localCallPrice:"",localAllowIncomingCall:"",replyOnSubscribe:!1,hideAfterMassMessages:!1,templateForRemove:"",isShowModalConfirmAutoMessage:!1,isShowForm:!1,isShowSaveBtn:!1,serverValidationError:"",disabledAfterMessages:!1,disabledreplyOnSubscribe:!1,canAcceptMessageOnlyFromFriends:!1,disabledAcceptMessage:!1,allowIncomingCallOptions:[{code:"all_subscribers",name:"All active subscribers"},{code:"paying_subscribers",name:"Users I'm Subscribed to"},{code:"follow",name:"Users I'm Following"},{code:"nobody",name:"Nobody"}]}},computed:N(N(N(N({},Object(v["Ob"])(["user","hasUser","userId"])),Object(v["b"])(["isAuth","authUserId","authUser"])),Object(v["eb"])(["callPrice","allowIncomingCall","callMinPrice","callMaxPrice","getHideAfterMassMessages","getAutoMessage","getCanAcceptMessageOnlyFromFriends"])),{},{callPriceValidationRules:function(){return"max_value:".concat(this.callMaxPrice,"|min_value:").concat(this.callMinPrice)},enableSettingsCallingSection:function(e){return!1}}),watch:{authUser:function(e){this.setDataFromStore(e)},localCallPrice:function(e){e||(this.localCallPrice="")},callPrice:function(e){this.localCallPrice=e},allowIncomingCall:function(e){this.localAllowIncomingCall=e||"nobody"},getHideAfterMassMessages:function(e){this.hideAfterMassMessages=e},getCanAcceptMessageOnlyFromFriends:function(e){this.canAcceptMessageOnlyFromFriends=e}},mounted:function(){this.setDataFromStore(this.authUser),this.setDataFromSettingsStore(),this.loadAutoMessageTemplate()},beforeDestroy:function(){this.$validator.pause()},methods:N(N(N(N({},Object(v["Nb"])(["patchUser"])),Object(v["db"])(["updateUserSettingsMessages","fetchAutoMessageTemplate","deleteAutoMessageTemplate"])),Object(v["Sb"])(["setUserField"])),{},{setDataFromStore:function(e){this.replyOnSubscribe=e.replyOnSubscribe},setDataFromSettingsStore:function(){this.localCallPrice=this.callPrice,this.localAllowIncomingCall=this.allowIncomingCall||"nobody",this.hideAfterMassMessages=this.getHideAfterMassMessages,this.canAcceptMessageOnlyFromFriends=this.getCanAcceptMessageOnlyFromFriends},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.serverValidationError="",this.loading=!0,e.next=4,this.$validator.validateAll();case 4:if(t=e.sent,!t){e.next=18;break}return s={},this.authUser.canEarn&&(s.messagePriceFromFreeSubscribers=this.messagePrice),this.authUser.isPerformer&&(s.callPrice=this.localCallPrice,s.allowIncomingCall=this.localAllowIncomingCall),e.prev=9,e.next=12,this.updateUserSettingsMessages(s);case 12:alert(this.$i18n.t("message.changes_saved_toast")),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](9),c()(e.t0,"data.error.message")&&(this.serverValidationError=e.t0.data.error.message);case 18:this.loading=!1;case 19:case"end":return e.stop()}}),e,this,[[9,15]])})));function t(){return e.apply(this,arguments)}return t}(),changeSendAutoMessage:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledreplyOnSubscribe=!0,e.next=3,this.patchUser({replyOnSubscribe:t});case 3:s=e.sent,s&&s.success&&(this.disabledreplyOnSubscribe=!1,this.setUserField({userId:this.authUser.id,field:"replyOnSubscribe",status:t}),this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleHideAfterMassMessages:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledAfterMessages=!0,e.next=3,this.updateUserSettingsMessages({hideAfterMassMessages:t});case 3:s=e.sent,s&&(this.disabledAfterMessages=!1,this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),toggleCanAcceptMessageOnlyFromFriends:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledAcceptMessage=!0,e.next=3,this.updateUserSettingsMessages({canAcceptMessageOnlyFromFriends:t});case 3:s=e.sent,s&&(this.disabledAcceptMessage=!1,this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadAutoMessageTemplate:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tempateLoaded=!0,e.prev=1,e.next=4,this.fetchAutoMessageTemplate();case 4:t=e.sent,t&&t.length?this.isShowForm=!1:this.isShowForm=!0,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),Object(l["b"])(e.t0);case 11:this.tempateLoaded=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),removeTemplate:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.templateForRemove){e.next=5;break}return e.next=3,this.deleteAutoMessageTemplate("reply_on_subscribe");case 3:t=e.sent,t&&t.success&&(this.isShowForm=!1,this.templateForRemove="");case 5:this.isShowForm=!0;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),confirmRemoveTemplate:function(e){this.isShowModalConfirmAutoMessage=!0,this.templateForRemove=e},editMessage:function(){this.isShowForm=!this.isShowForm,this.isShowSaveBtn=!this.isShowSaveBtn},cancelEditTemlate:function(){this.isShowForm=!this.isShowForm,this.isShowSaveBtn=!this.isShowSaveBtn}})},B=R,q=Object(C["a"])(B,i,r,!1,null,null,null);t["default"]=q.exports},"792a":function(e,t,s){"use strict";s("7f7f");t["a"]={computed:{uploadedFilesUrl:function(){var e=this;return this.uploadedFiles.map((function(t){return t.videoUploadHost&&t.previewUrl?{url:t.url,thumbId:t.thumbId,previewUrl:t.previewUrl,videoUploadHost:t.videoUploadHost}:t.processId?{processId:t.processId,host:t.host,thumbId:t.thumbId,name:t.name}:t.id?"video"===t.mediaType&&"ChatsSend"!==e.$route.name?{id:t.id,thumbId:t.thumbId}:t.id:t.url}))}}}},"7e35":function(e,t,s){"use strict";s("8e6e"),s("ac6a"),s("456d");var i=s("bd86"),r=s("8247"),a=s.n(r),n=s("964f"),o=s.n(n),c=s("0591"),l=s.n(c),u=s("d634");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={computed:p({},Object(u["eb"])(["isDarkMode"])),methods:{errorAvatar:function(e){var t;if(t=e.target?e.target:e,t){var s=t.src;-1===s.indexOf("/default_avatar.png")?t.src=a.a:t.onerror=null}},errorCover:function(e){var t=e.target,s=t.src;-1===s.indexOf("/default_header_image.png")&&-1===s.indexOf("/default_header_image_dark.png")?(this.isDarkMode?t.src=l.a:t.src=o.a,t.srcset="",t.sizes=""):t.onerror=null}}}},"8aaea":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-offer-wrapper"},[s("div",{staticClass:"b-offer-join"},[s("div",{staticClass:"b-offer-join__title"},[e._v(" "+e._s(e.$t("message.bundles_block_title"))+" "),e.isAuthUser?s("span",{staticClass:"g-icon-info m-icon-sm m-with-round-hover"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:e.$t("message.bundles_author_description"),expression:"$t('message.bundles_author_description')",modifiers:{enabled:!0}}],staticClass:"icon-info"})]):e._e()]),e.isAuthUser&&e.user.canAddSubscriberByBundle?s("div",{staticClass:"b-offer-join__btn"},[s("button",{staticClass:"g-btn m-uppercase m-block m-rounded",attrs:{type:"button"},on:{click:e.addNewBundle}},[e._v(" "+e._s(e.$t("message.bundles_add_btn_label"))+" ")]),s("modal-bundle",{attrs:{id:e.bundleId,"bundle-discount":e.bundleDiscount,"bundle-duration":e.bundleDuration}})],1):e._e()])])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=s("d634"),o=s("313e"),c=s("e057"),l=s("1db1");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"BundlesCard",components:{ModalBundle:o["a"]},mixins:[c["a"],l["a"]],data:function(){return{bundleId:void 0,bundleDiscount:void 0,bundleDuration:void 0}},computed:d(d({},Object(n["Ob"])(["userId","user"])),Object(n["b"])(["authUser"])),methods:d(d({},Object(n["Sb"])(["setModalUser"])),{},{openModalBundle:function(){var e=this;this.setModalUser({userId:this.userId}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalBundle")}))},addNewBundle:function(){this.bundleId=void 0,this.bundleDiscount=void 0,this.bundleDuration=void 0,this.openModalBundle()}}),mounted:function(){var e=this;this.$root.$on("bv::show::modal:ModalBundle:setBundle",(function(t){e.bundleId=t.id,e.bundleDiscount=t.discount,e.bundleDuration=t.duration}))},beforeDestroy:function(){this.$root.$off("bv::show::modal:ModalBundle:setBundle")}},h=p,m=s("2877"),f=Object(m["a"])(h,i,r,!1,null,null,null);t["a"]=f.exports},"912b":function(e,t,s){"use strict";s("8e6e"),s("456d"),s("ac6a"),s("96cf");var i=s("3b8d"),r=(s("7514"),s("bd86")),a=s("2b0e"),n=s("9b02"),o=s.n(n),c=s("4db7"),l=(s("fc2f"),s("8e34"),s("d634")),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-action-panel m-shadow-gradient"},[e.isVideo?s("div",{staticClass:"story-back-btn",on:{click:e.hardBack}}):e._e(),e.isVideo?s("div",{staticClass:"story-next-btn",on:{click:e.hardForward}}):e._e(),[s("span",{staticClass:"b-action-panel__item m-free-size"},[s("button",{staticClass:"b-action-panel__el m-likes js-streaming__btn-likes__viewer m-fluid-width",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_like"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_like'), classes: 'm-tooltip-light' }"}],staticClass:"icon-like"}),s("span",{staticClass:"b-action-panel__el__text"},[e._v(" "+e._s(e.currentStory.likesCount)+" ")])])]),s("span",{staticClass:"b-action-panel__item m-free-size"},[s("button",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer m-fluid-width",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_tips"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_tips'), classes: 'm-tooltip-light' }"}],staticClass:"icon-funds"}),s("span",{staticClass:"b-action-panel__el__text"},[e._v(" "+e._s(e.currentStory.tipsAmount)+" ")])])])],s("span",{staticClass:"b-action-panel__item  m-space-distance m-right-part m-free-size m-online js-streaming__online",on:{click:e.showStats}},[s("span",{staticClass:"b-action-panel__el m-fluid-width"},[s("span",{staticClass:"b-action-panel__el__text js-streaming__actions__count__value"},[e._v(" "+e._s(e.currentStory.viewersCount)+" ")]),e.currentStory.viewers&&e.currentStory.viewers.length?e._e():s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_viewers"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_viewers'), classes: 'm-tooltip-light' }"}],staticClass:"icon-eye"}),s("span",{staticClass:"group-avatars"},e._l(e.viewers,(function(e){return s("span",{key:e.id,staticClass:"g-avatar m-w24 m-border-line"},[s("image-thumb",{attrs:{user:e,size:"c50"}})],1)})),0)])]),s("div",{staticClass:"b-action-panel__item m-free-size m-right-part m-dots-btn"},["currentHighlights"===e.type?s("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),s("b-dropdown-item-button",{on:{click:e.editHighlight}},[e._v(" "+e._s(e.$t("message.edit_highlight"))+" ")]),s("b-dropdown-item-button",{on:{click:e.removeHighlight}},[e._v(" "+e._s(e.$t("message.remove_highlight"))+" ")])],2):s("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),s("b-dropdown-item-button",{on:{click:e.remove}},[e._v(" "+e._s(e.$t("message.uploaded_media_delete_btn_title"))+" ")]),s("b-dropdown-item-button",{on:{click:function(t){return e.addStoryToHighlight(e.realStoryId)}}},[e._v(" "+e._s(e.$t("message.add_to_highlight"))+" ")])],2)],1),e.title?s("div",{staticClass:"b-story-name"},[e._v(" "+e._s(e.title)+" ")]):e._e(),s("modal-confirm",{attrs:{"modal-show":e.deleteStoryConfirm.show,title:"hightlight"===e.deleteStoryConfirm.type?e.$t("message.story_remove_confirm"):e.$t("message.story_remove_confirm_cover"),"agree-btn":e.$t("message.remove"),text:e.$t("message.are_you_sure"),"close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){return e.$set(e.deleteStoryConfirm,"show",t)},"update:modal-show":function(t){return e.$set(e.deleteStoryConfirm,"show",t)},"on-agree":e.agreeConfirm,"on-hide":e.onConfirmClose}}),s("AddStoryToHighlightModal")],2)},d=[],p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"hide-header":!0,"hide-footer":!0,scrollable:"lg"!==e.$mq,centered:"lg"===e.$mq,id:"add-story-to-highlight-modal","modal-class":"story-highlights","dialog-class":"story-highlights-dialog","content-class":"story-highlights-content"},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("div",{staticClass:"g-page__header"},[s("button",{staticClass:"g-page__header__btn m-with-round-hover",on:{click:e.backBtnClick}},[s("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-back"}})])]),s("div",{staticClass:"g-page-title"},[e._v(" "+e._s(e.$t("message.add_to_highlight"))+" ")]),s("div",{staticClass:"btns-highlights"},[s("button",{staticClass:"g-btn m-rounded",attrs:{disabled:0===e.selected&&!e.title},on:{click:e.save}},[e._v(" "+e._s(e.$t("message.save"))+" ")])])]),s("div",{staticClass:"modal-body"},[0===e.selected?s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{name:"name",maxlength:"70",placeholder:"Highlight"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.highlight_input_maxlength"))+" ")])]):e._e(),s("div",{staticClass:"b-wrapper-highlights m-native-custom-scrollbar"},[s("div",{staticClass:"b-photos m-highlights-wrapper"},[s("div",{staticClass:"b-photos__item m-highlight m-checkbox-control b-story-item m-create selected",class:{checked:0===e.selected},on:{click:function(t){e.selected=0}}},[s("div",{staticClass:"b-story-item__inside"},[s("span",{staticClass:"b-plus m-style-color b-story-item__pos-avatar"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-highlights"})]),s("div",{staticClass:"b-story-item__text"},[e._v(" "+e._s(e.$t("message.new_highlight"))+" ")])])]),e._l(e.highlights,(function(t){return s("div",{key:t.id,staticClass:"b-photos__item m-highlight m-checkbox-control b-story-item m-gradient-overlay selected",class:{checked:e.selected===t.id},on:{click:function(s){e.selected=t.id}}},[s("div",{staticClass:"b-story-item__inside"},[s("div",{staticClass:"b-story-item__text online_status_class"},[s("div",{staticClass:"b-story-item__text-name"},[e._v(" "+e._s(t.title)+" ")])]),s("img",{staticClass:"img-responsive",attrs:{src:t.cover,draggable:"false"}})])])}))],2)])])])},h=[],m=(s("c1df"),s("e528")),f=s("b304"),g=s("ee41");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var _={mixins:[g["a"]],components:{SpinnerLoader:m["a"],BackToTopBtn:f["a"]},data:function(){return{show:!1,selected:0,title:"",storyId:void 0}},computed:b(b({},Object(l["qb"])(["highlights"])),Object(l["b"])(["authUser"])),methods:b(b({},Object(l["pb"])(["fetchUserHighlights","saveHighlights","patchHighlight"])),{},{backBtnClick:function(){this.show=!1},save:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$window.showPreloader(),0!==this.selected){e.next=9;break}return e.next=4,this.saveHighlights({title:this.title,storyIds:[this.storyId],coverStoryId:this.storyId});case 4:return t=this.$i18n.t("message.highlight_was_created"),e.next=7,this.fetchUserHighlights(this.authUser.id);case 7:e.next=12;break;case 9:return e.next=11,this.patchHighlight({highlightId:this.selected,storyIds:[this.storyId]});case 11:t=this.$i18n.t("message.story_added_to_highlight");case 12:this.$bvToast.toast(t,{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}),this.show=!1,this.$window.hidePreloader();case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setSelected:function(e){this.stories=this.stories.map((function(t){return t.id!==e.id?t:b(b({},t),{},{selected:!t.selected})}))}}),mounted:function(){var e=this;this.$root.$on("show-add-story-to-highlight-modal",(function(t){var s=t.storyId;e.show=!0,e.storyId=s,e.fetchUserHighlights(e.authUser.id)}))},watch:{show:function(){var e=this;setTimeout((function(){e.show?e.pauseStory():e.playStory()}),300)}}},w=_,y=s("2877"),k=Object(y["a"])(w,p,h,!1,null,null,null),C=k.exports,O=s("e66b"),S=s("8b3f");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var j={mixins:[g["a"]],data:function(){return{deleteStoryConfirm:{show:!1,type:"highlight",story:{}}}},components:{ImageThumb:O["a"],ModalConfirm:S["a"],AddStoryToHighlightModal:C},props:{realStoryId:{type:String,required:!0},removeStory:{type:Function,required:!0},removeHighlight:{type:Function,required:!0},showStats:{type:Function,required:!0},editHighlight:{type:Function,required:!0},type:{type:String,required:!0},title:{type:String,default:void 0},hardForward:{type:Function,required:!0},hardBack:{type:Function,required:!0},removePanel:{type:Function,required:!0}},computed:x(x({},Object(l["qb"])(["myStories","currentHighlights","storyFromArchive"])),{},{currentStory:function(){var e=this;return"currentHighlights"===this.type&&this.currentHighlights.stories?this.currentHighlights.stories.find((function(t){return t.id==e.realStoryId}))||{}:"stories"===this.type?this.myStories.find((function(t){return t.id==e.realStoryId}))||{}:"archive"===this.type&&this.storyFromArchive||{}},viewers:function(){return this.currentStory.viewers&&this.currentStory.viewers.length?this.currentStory.viewers.filter((function(e,t){return t<3})):[]},isVideo:function(){var e=o()(this,"currentStory.media[0].type");return"video"===e}}),methods:{remove:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.currentStory,s=t.isHighlightCover,i=t.isLastInHighlight,t.id,!s&&!i){e.next=7;break}this.deleteStoryConfirm.show=!0,this.deleteStoryConfirm.type=i?"highlight":"cover",setTimeout((function(){r.pauseStory()}),300),e.next=9;break;case 7:return e.next=9,this.removeStory();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),agreeConfirm:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.removeStory();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onConfirmClose:function(){this.deleteStoryConfirm.type=null,this.playStory()},menuShow:function(){this.pauseStory()},menuHide:function(){this.playStory()},addStoryToHighlight:function(e){this.$root.$emit("show-add-story-to-highlight-modal",{storyId:e})},checkOpen:function(){var e=this;setTimeout((function(){var t=document.getElementById("zuck-modal-content");t&&t.innerHTML?e.checkOpen():e.removePanel()}),99)}},mounted:function(){this.checkOpen()}},$=j,T=Object(y["a"])($,u,d,!1,null,null,null),D=T.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-action-panel m-shadow-gradient",class:{"m-comment-form-visible":e.showComment}},[s("div",{staticClass:"b-streaming__actions__overlay"}),e.isVideo?s("div",{staticClass:"story-back-btn",on:{click:e.hardBack}}):e._e(),e.isVideo?s("div",{staticClass:"story-next-btn",on:{click:e.hardForward}}):e._e(),s("span",{staticClass:"b-action-panel__item m-free-size m-visible-desk",class:{"m-hidden-comments":e.showComment}},[s("button",{staticClass:"b-action-panel__el m-likes",class:{active:e.isLiked},attrs:{type:"button",disabled:e.disabledLike},on:{click:e.likeHandleThrottled}},[e.isLiked?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_unlike"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_unlike'), classes: 'm-tooltip-light' }"}],key:"icon-liked",staticClass:"icon-liked"}):s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.post_like_button_title_like"),classes:"m-tooltip-light"},expression:"{content: $t('message.post_like_button_title_like'), classes: 'm-tooltip-light' }"}],key:"icon-like",staticClass:"icon-like"})])]),e.canCommentStory?s("div",{staticClass:"b-action-panel__item m-free-size m-comments-form"},[s("button",{staticClass:"b-action-panel__el m-comments",attrs:{type:"button"},on:{click:e.showCommentForm}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.reply_story"),classes:"m-tooltip-light"},expression:"{content: $t('message.reply_story'), classes: 'm-tooltip-light' }"}],staticClass:"icon-message"})]),e.showComment?s("form",{staticClass:"b-comment-form m-field-line js-streaming__comment-form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.commentText,expression:"commentText"}],ref:"commentInput",staticClass:"form-control b-comment-form__input",attrs:{type:"text",placeholder:e.$t("message.reply_story"),maxlength:"140",tabindex:"1"},domProps:{value:e.commentText},on:{keyup:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.preventDefault(),t.stopPropagation()},focus:function(e){e.preventDefault(),e.stopPropagation()},blur:e.onBlur,input:function(t){t.target.composing||(e.commentText=t.target.value)}}}),s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.send_form"),classes:"m-tooltip-light"},expression:"{content: $t('message.send_form'), classes: 'm-tooltip-light' }"}],staticClass:"b-comment-form__submit",attrs:{disabled:!e.commentText.length||e.disabledComment},on:{click:function(t){return t.preventDefault(),e.submitCommentThrottled(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-send"})])]):e._e()]):e._e(),e.storyUser.tipsEnabled?s("span",{staticClass:"b-action-panel__item",class:{"m-right-part":e.showCommentForm,"m-free-size":!e.showCommentForm&&"sm"===e.$mq||"sm"!==e.$mq}},[s("button",{staticClass:"b-action-panel__el m-tips js-streaming__btn-tips__viewer m-fluid-width",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.showTipsForm(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"}),s("span",{staticClass:"b-action-panel__el__text",class:{"m-hidden-comments":e.showComment}},[e._v(" "+e._s(e.$t("message.send_tips"))+" ")])])]):e._e(),s("div",{staticClass:"b-action-panel__item m-free-size m-space-distance m-right-part m-dots-btn"},[s("b-dropdown",{ref:"postDropdown",staticClass:"b-post__tools__more",attrs:{right:"","toggle-class":"m-size-lg m-light m-not-width-limit m-center",variant:"link",offset:"4"},on:{hide:e.menuHide,show:e.menuShow}},[s("template",{slot:"button-content"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:{content:e.$t("message.tooltip_more"),classes:"m-tooltip-light"},expression:"{content: $t('message.tooltip_more'), classes: 'm-tooltip-light' }"}],staticClass:"icon-more"})]),s("b-dropdown-item-button",{on:{click:e.openReportModal}},[e._v(" "+e._s(e.$t("message.report"))+" ")])],2)],1),e.title?s("div",{staticClass:"b-story-name"},[e._v(" "+e._s(e.title)+" ")]):e._e()])},E=[],M=(s("c5f6"),s("0f32")),A=s.n(M);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var L={mixins:[g["a"]],components:{ImageThumb:O["a"]},data:function(){return{showComment:!1,commentText:"",pauseTimeout:void 0,disabledLike:!1,disabledComment:!1}},props:{realStoryId:{type:String,required:!0},type:{type:String,default:"userStories"},title:{type:String,default:void 0},close:{type:Function,required:!0},userId:{type:Number,required:!0},hardForward:{type:Function,required:!0},hardBack:{type:Function,required:!0},removePanel:{type:Function,required:!0}},computed:U(U(U(U({},Object(l["qb"])(["stories","userStories","chatStory","currentHighlights"])),Object(l["b"])(["authUser"])),Object(l["Ob"])(["getUser"])),{},{storyUser:function(){return this.currentStory.userId?this.getUser(this.currentStory.userId):{}},canCommentStory:function(){return this.storyUser.canCommentStory},storiesList:function(){var e=this;switch(!0){case"chatStory"===this.type:return[this.chatStory];case"currentHighlights"===this.type:return this.currentHighlights.stories;case"stories"===this.type:var t=this.stories.find((function(t){return t.user&&t.user.id==e.userId}));return t?t.stories:[];case"userStories"===this.type:return this.userStories;default:return[]}},currentStory:function(){var e=this;if(this.storiesList&&this.storiesList.length){var t=this.storiesList.find((function(t){return t.id==e.realStoryId}));return t||{}}return{}},isLiked:function(){return this.currentStory.isLiked},submitCommentThrottled:function(){return A()(this.submitComment,1e3)},likeHandleThrottled:function(){return A()(this.likeHandle,1e3)},isVideo:function(){var e=o()(this,"currentStory.media[0].type");return"video"===e}}),methods:U(U(U(U({},Object(l["pb"])(["like","unlike","comment"])),Object(l["B"])(["setReportType"])),Object(l["Sb"])(["setModalUser"])),{},{menuShow:function(){this.pauseStory()},menuHide:function(){this.playStory()},onBlur:function(){var e=this;this.playStory(),setTimeout((function(){e.commentText="",e.showComment=!1}),100)},openReportModal:function(){this.$refs.postDropdown.hide(),this.setReportType({type:"story",postId:this.currentStory.id}),this.$root.$emit("bv::show::modal","ModalReport")},showCommentForm:function(){var e=this;this.showComment||(this.commentText="",this.showComment=!0,this.pauseStory(),this.$nextTick((function(){e.$refs.commentInput.focus()})))},submitComment:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledComment){e.next=2;break}return e.abrupt("return");case 2:return this.disabledComment=!0,this.showComment=!1,e.next=6,this.comment({id:this.realStoryId,userId:this.currentStory.userId,text:this.commentText});case 6:this.disabledComment=!1,this.$router.push({name:"Chat",params:{chatId:this.currentStory.userId}}),this.close();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showTipsForm:function(){var e=this;this.pauseStory(),this.setModalUser({userId:this.storyUser.id,storyId:this.realStoryId}),this.$nextTick((function(){e.$root.$emit("bv::show::modal","ModalTips")}))},likeHandle:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledLike){e.next=2;break}return e.abrupt("return");case 2:return this.disabledLike=!0,t=this.isLiked?this.unlike:this.like,e.next=6,t({id:this.realStoryId,userId:this.currentStory.userId,type:this.type});case 6:this.disabledLike=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkOpen:function(){var e=this;setTimeout((function(){var t=document.getElementById("zuck-modal-content");t&&t.innerHTML?e.checkOpen():e.removePanel()}),99)}}),mounted:function(){var e=this;this.$root.$on("bv::show::modal",this.pauseStory),this.$root.$on("bv::hide::modal",this.playStory),this.$root.$on("modal::tips::close",(function(){document.documentElement.classList.remove("m-prevent-scrolling"),e.playStory()})),this.checkOpen()},beforeDestroy:function(){this.$root.$off("bv::show::modal",this.pauseStory),this.$root.$off("bv::hide::modal",this.playStory)}},N=L,R=Object(y["a"])(N,I,E,!1,null,null,null),B=R.exports,q=s("9798");function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){Object(r["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}t["a"]={computed:W(W(W(W({},Object(l["Ob"])(["user"])),Object(l["b"])(["authUser"])),Object(l["qb"])(["userStories"])),{},{type:function(){return"userStories"},zuckOptions:function(){return{backNative:!1,skin:"Snapgram",autoFullScreen:!1,avatars:!0,paginationArrows:!1,list:!0,cubeEffect:!0,localStorage:!1,previousTap:!0}},storiesNormalized:function(){return Object(q["b"])(this.userStories,this.user,!1)},allStories:function(){return[this.storiesNormalized]},element:function(){return"stories"}}),methods:W(W({},Object(l["pb"])(["watchStory","removeMyStory","removeMyHighlights"])),{},{getStoriesSet:function(e){switch(!0){case"chatStory"===this.type:return[this.chatStory];case"currentHighlights"===this.type:return this.currentHighlights.stories;case"stories"===this.type&&e:return this.myStories;case"stories"===this.type:return this.stories;case"userStories"===this.type:return this.userStories;case"archive"===this.type:return[this.storyFromArchive];default:return[]}},getUserId:function(e){switch(!0){case"chatStory"===this.type:return this.chatStory.userId;case"currentHighlights"===this.type:return this.currentHighlights.userId;case"stories"===this.type:var t=this.stories.find((function(t){var s=t.stories;return!!s.find((function(t){return t.id==e}))}));return t?t.user.id:void 0;case"userStories"===this.type:return this.userStories[0].userId;default:return}},getIsWatchedById:function(e){switch(!0){case"chatStory"===this.type:return this.chatStory.isWatched;case"currentHighlights"===this.type:var t=this.currentHighlights.stories.find((function(t){return t.id==e}));return!!t&&t.isWatched;case"stories"===this.type:for(var s=0;s<this.stories.length;s+=1)for(var i=0;i<this.stories[s].stories.length;i+=1)if(this.stories[s].stories[i].id==e)return this.stories[s].stories[i].isWatched;break;case"userStories"===this.type:var r=this.userStories.find((function(t){return t.id==e}));return r?r.isWatched:void 0;default:return}},waitMedia:function(){setTimeout((function(){var e=!1,t=document.querySelector(".story-viewer.viewing"),s=document.querySelector(".story-viewer.viewing .item.active img"),i=document.querySelector(".story-viewer.viewing .item.active video");t&&(s&&!s.complete&&(t.classList.add("paused"),t.classList.add("loading"),s.onload=function(){t&&(t.classList.remove("paused"),t.classList.remove("loading"))}),i&&(i.currentTime=0,i.readyState?(t.classList.remove("paused"),t.classList.remove("loading"),e=!0):(t.classList.add("paused"),t.classList.add("loading"),e=!1),i.onplaying=function(){t&&!e&&(t.classList.remove("paused"),t.classList.remove("loading")),e=!0},i.onwaiting=function(){t&&e&&!i.loop&&(t.classList.add("paused"),t.classList.add("loading")),e=!1}))}),100)},renderPanel:function(e,t){var s=this;this.panel&&this.removePanel();var r=document.createElement("div");if(r.className="panelWrapper","function"===typeof document.body.append){document.body.append(r);var n=e?D:B,o="currentHighlights"===this.type?this.currentHighlights.title:void 0,c=e?this.authUser.id:this.getUserId(t);this.panel=new a["default"](W(W({},n),{},{parent:this,propsData:{title:o,type:this.type,userId:c,realStoryId:t,close:function(){s.closeStory()},removeStory:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.removeMyStory(t);case 2:s.closeStory();case 3:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),removeHighlight:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.removeMyHighlights(s.currentHighlights.id);case 2:s.closeStory();case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),showStats:function(){s.$root.$emit("show::story::stat",{stories:s.getStoriesSet(e)})},editHighlight:function(){s.$root.$emit("show-create-highlight-modal",{isEdit:!0,currentHighlights:s.currentHighlights}),s.closeStory()},hardForward:function(e){try{s.zuckStories.navigateItem("next",e)}catch(t){s.closeStory()}},hardBack:function(e){try{s.zuckStories.navigateItem("previous",e)}catch(t){s.closeStory()}},removePanel:this.removePanel}})).$mount(".panelWrapper")}},closeStory:function(){var e=document.querySelector("#zuck-modal .close");e&&e.click()},removePanel:function(){this.panel&&(this.panel.$destroy(),this.panel.$el&&this.panel.$el.parentNode&&this.panel.$el.parentNode.removeChild(this.panel.$el),this.panel=null);var e=document.querySelectorAll(".b-streaming__actions");"function"===typeof e.forEach&&e.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},onWatchStory:function(e){var t=this;this.waitMedia();var s=e==="user-".concat(this.authUser.id);setTimeout((function(){var e=document.querySelector(".story-viewer.viewing .slides .item.active .tip.link");if(e){var i=e.innerHTML.trim();t.renderPanel(s,i);var r=t.getIsWatchedById(i);s||r||t.watchStory({id:i,type:t.type})}}),100)},onCloseStory:function(){this.removePanel()},goToProfile:function(){var e=document.querySelector(".story-viewer.viewing .slides .item.active .tip.link");if(e){var t=e.getAttribute("href");t&&(this.$router.push({name:"Profile",params:{userId:t}}),this.closeStory())}},addHeaderEvents:function(){var e=document.querySelector(".story-viewer.viewing .head .left");e&&e.addEventListener("click",this.goToProfile)},removeHeaderEvents:function(){var e=document.querySelector(".story-viewer.viewing .head .left");e&&e.removeEventListener("click",this.goToProfile)},initZuck:function(){var e=document.getElementById(this.element);if(e){this.zuckStories&&e&&(e.innerHTML="");var t=this;this.zuckStories=new c["a"](this.element,W(W({},this.zuckOptions),{},{stories:t.allStories,callbacks:{onView:function(e){0!==t.element.indexOf("chat-story-")&&document.body.classList.add("disabled-page-scrollbar"),t.onWatchStory(e),t.addHeaderEvents()},onClose:function(s,i){t.removeHeaderEvents(),t.onCloseStory(),0!==t.element.indexOf("chat-story-")&&document.body.classList.remove("disabled-page-scrollbar"),e&&(e.innerHTML=""),i()},onNavigateItem:function(e,s,i){t.onWatchStory(e),i()}}}))}}}),watch:{userStories:function(){var e=o()(this,"user.id"),t=o()(this,"authUser.id");this.userStories.length&&e&&t&&e!==t&&this.initZuck()}}}},9798:function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"b",(function(){return h}));var i=s("75fc"),r=(s("7f7f"),s("7618")),a=s("9b02"),n=s.n(a),o=s("9029"),c=function(){var e=n()(window,"navigator.connection");if(!e||"object"!==Object(r["a"])(e))return{canUse:!1,isMobile:o["isMobile"]};var t={canUse:!0,isMobile:o["isMobile"],good:!0};return e.downlinkMax&&e.downlinkMax>=1.5||e.downlink&&e.downlink>=1.5||"4g"===e.effectiveType||"wifi"===e.type?t:{canUse:!0,good:!1,isMobile:o["isMobile"]}},l=function(e){return new Date(e).getTime()/1e3},u=function(e,t,s){var i=c(),r=i.canUse,a=i.isMobile,n=i.good,o=t,l=s||t;return"photo"===e?o:r?n?o:l:a?l:o},d=function(e){var t=n()(e,"[0].type","photo"),s=n()(e,"[0].files.source.url",""),i=n()(e,"[0].files.source.sources.720")||s;return u(t,s,i)},p=function(e){var t=e.stories,s=e.user,r=void 0===s?{}:s,a=r.id,o=r.avatarThumbs,c=r.username,d=r.name;return{id:"user-".concat(a),photo:o?o.c50:void 0,name:d,link:"",lastUpdated:l(t[0].createdAt),seen:!1,items:t.reduce((function(e,t){var s=t.media.map((function(e){var s=e.type,i=e.files,r=n()(i,"source.duration",0),a=n()(i,"source.url",void 0),o=n()(i,"source.sources.720",void 0),d=u(s,a,o);return{id:t.id,type:"gif"===s?"video":s,length:"photo"===s||r<5?5:r,loop:"photo"!==s&&r<5,src:d,preview:a,link:c,linkText:t.id,seen:!1,time:l(t.createdAt)}}));return[].concat(Object(i["a"])(e),Object(i["a"])(s))}),[])}},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.avatarThumbs,r=t.username,a=t.id,o=t.name;return e.length?{id:"user-".concat(a),photo:i?i.c50:void 0,name:s?"My story":o,link:"",lastUpdated:l(e[0].createdAt),seen:!1,items:e.map((function(e){var t=e.id,s=e.media,i=e.createdAt,a=n()(s,"[0].type","photo"),o="gif"===a?"video":a,c=n()(s,"[0].files.source.duration",0),u=c<5?5:c,p="photo"!==a&&c<5,h=n()(s,"[0].source.url",""),m=d(s);return{id:t,type:o,length:u,loop:p,src:m,preview:h,link:r,linkText:t,seen:!1,time:l(i)}}))}:{}}},"9d17":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));s("28a5");var i=s("56d7"),r=function(e){return new Promise((function(t,s){var r=new FileReader;r.onloadend=function(){t(r.result)},r.onerror=s,e instanceof Blob?r.readAsDataURL(e):s({message:i["default"].$i18n.t("message.debug_alert_message")})}))}},"9df8":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return a}));s("c5f6"),s("a481");var i={methods:{priceHuman:function(e){return e?"$".concat(Math.max(Number(e),3).toFixed(2).replace(".00","")):this.$i18n.t("message.free")}}},r={methods:{amountHuman:function(e){return"$".concat(e?Math.max(Number(e),3).toFixed(2).replace(".00",""):Number(e).toFixed(2).replace(".00",""))}}},a={methods:{amountHumanShort:function(e){return"$".concat(Math.max(Number(e),3).toFixed(2).replace(".00",""))}}}},a17c:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("form",{attrs:{action:"#"}},[s("div",{staticClass:"g-input__fieldset"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.other_settings_story"))+" ")])]),s("div",{staticClass:"g-input__wrapper m-only-label"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.story_sett_allow_message_replies"))+" ")])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allowReplyFrom,expression:"allowReplyFrom"}],staticClass:"b-input-radio",attrs:{id:"allowNobody",type:"radio",name:"allow_replay",value:"nobody"},domProps:{checked:e._q(e.allowReplyFrom,"nobody")},on:{change:function(t){e.allowReplyFrom="nobody"}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"allowNobody"}},[e._v(" "+e._s(e.$t("message.story_sett_allow_message_replies_nobody"))+" ")]),e._m(0)])]),s("div",{staticClass:"g-input__wrapper b-input-radio__wrapper"},[s("span",{staticClass:"b-input-radio__container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.allowReplyFrom,expression:"allowReplyFrom"}],staticClass:"b-input-radio",attrs:{id:"allowSubscribers",type:"radio",name:"allow_replay",value:"subscribers"},domProps:{checked:e._q(e.allowReplyFrom,"subscribers")},on:{change:function(t){e.allowReplyFrom="subscribers"}}}),s("label",{staticClass:"b-input-radio__text",attrs:{for:"allowSubscribers"}},[e._v(" "+e._s(e.$t("message.story_sett_allow_message_replies_subscribers"))+" ")]),e._m(1)])]),e.users.length?s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.story_sett_hide_story"))+" ")]),s("div",{staticClass:"g-select__selected__list"},e._l(e.users,(function(t){return s("span",{key:t.id,staticClass:"g-select__selected__item"},[e._v(" "+e._s(t.username||t.name)+" "),s("button",{staticClass:"g-select__selected__item__del-btn",attrs:{type:"button"},on:{click:function(s){return e.toggleHideStoryFromUser(t.id)}}},[s("svg",{staticClass:"g-icon",attrs:{"aria-hidden":"true"}},[s("use",{attrs:{"xlink:href":"#icon-close",href:"#icon-close"}})])])])})),0),s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.story_sett_hide_story_label"))+" ")])]):e._e()])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"b-input-radio__label"},[s("span",{staticClass:"b-input-ripple"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"b-input-radio__label"},[s("span",{staticClass:"b-input-ripple"})])}],a=(s("8e6e"),s("ac6a"),s("456d"),s("a481"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("b047c"),c=s.n(o),l=s("2612"),u=s("d634");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"SettingsStory",data:function(){return{allowReplyFrom:null}},computed:p(p(p(p({},Object(u["qb"])(["storyBlockedViewers"])),Object(u["b"])(["authUser"])),Object(u["Ob"])(["getUser"])),{},{users:function(){var e=this;return this.storyBlockedViewers.map((function(t){return e.getUserById(t)})).filter((function(e){return e.isStoryBlockedUser}))},saveDebounced:function(){return c()(this.save,300)}}),methods:p(p(p(p({},Object(u["Nb"])(["toggleHideStoryFromUser"])),Object(u["pb"])(["fetchStoryBlockedViewers"])),Object(u["pb"])(["fetchStoryBlockedViewers"])),{},{getUserById:function(e){return this.getUser(e)},fetchData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,Object(l["H"])();case 4:return t=e.sent,s=t.allowReplyFrom,e.next=8,this.fetchStoryBlockedViewers();case 8:this.allowReplyFrom=s,this.loading=!1,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](1);case 14:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,Object(l["eb"])(t,s);case 4:this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{toastClass:"b-toaster__only_msg settings-toast",toaster:"b-toaster-bottom-left",autoHideDelay:1e3}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:this.loading=!1;case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(t,s){return e.apply(this,arguments)}return t}()}),watch:{allowReplyFrom:function(e,t){e&&t&&this.saveDebounced("allowReplyFrom",e)}},mounted:function(){this.authUser.canAddStory?this.fetchData():this.$router.replace({name:"Feed"})}},m=h,f=s("2877"),g=Object(f["a"])(m,i,r,!1,null,null,null);t["default"]=g.exports},b000:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"g-section__header connect_spotify m-mb-20"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_account"))+" ")]),e.authUser.isSpotifyConnected?s("button",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{type:"button",disabled:e.disabledSpotify},on:{click:function(t){return e.disableSpotify()}}},[e._v(" "+e._s(e.$t("message.disconnect_twitter_account_button"))+" ")]):s("a",{staticClass:"g-btn m-border m-rounded m-sm m-bold",attrs:{href:e.connectLink}},[e._v(" "+e._s(e.$t("message.connect_twitter_button"))+" ")])]),e.authUser.isSpotifyConnected?[s("div",{staticClass:"g-input__wrapper"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_anthem"))+" ")]),s("router-link",{staticClass:"spotify__settings__btn",attrs:{to:{name:"SpotifyAnthem"},tag:"button"}},[e.spotifyBioAnthem?s("span",{staticClass:"g-input__label"},[e._v(" "+e._s(e.userAnthemArtistSong)+" ")]):e._e(),s("div",{staticClass:"b-spotify__desc"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-spotify-filled",attrs:{"extra-class":"b-spotify__logo"}}),e._v(" "+e._s(e.userAnthemArtist)+" ")])])],1),s("div",{staticClass:"g-input__wrapper"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_top_artists"))+" ")]),s("router-link",{staticClass:"spotify__settings__btn",attrs:{to:{name:"SpotifyArtists"},tag:"button",disabled:!e.hasSpotifyTopArtists}},[s("span",{staticClass:"g-input__label"},[e._v(e._s(e.$t("message.settings_spotify_top_artists")))]),s("div",{staticClass:"b-spotify__desc"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-spotify-filled",attrs:{"extra-class":"b-spotify__logo"}}),e._v(" "+e._s(e.listOfTopSpotifyArtists)+" ")])])],1)]:e._e()],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("a481"),s("7f7f"),s("bd86")),o=s("9b02"),c=s.n(o),l=s("d634"),u=s("b775");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"SpotifySettings",data:function(){return{disabledSpotify:!1}},computed:p(p(p({},Object(l["b"])(["authUser"])),Object(l["eb"])(["spotifyBio","spotifyTopArtists","spotifyTopTracks","spotifyBioTopArtists","spotifyBioAnthem"])),{},{connectLink:function(){var e="".concat(window.location.origin).concat(window.location.pathname);return"".concat(u["a"]).concat(u["b"],"/proxy/spotify?app-token=").concat(u["h"],"&return_url=").concat(e)},hasSpotifyTopArtists:function(){return!!this.spotifyTopArtists.length},hasSpotifyTopTracks:function(){return!!this.spotifyTopTracks.length},listOfTopSpotifyArtists:function(){return this.spotifyBioTopArtists.length?this.spotifyBioTopArtists.map((function(e){return e.name})).join(", "):this.hasSpotifyTopArtists?this.$i18n.t("message.settings_spotify_select_artists"):this.$i18n.t("message.settings_spotify_no_artists")},userAnthemArtist:function(){return this.spotifyBioAnthem?this.spotifyBioAnthem.artists.map((function(e){return e.name})).join(", "):this.hasSpotifyTopTracks?this.$i18n.t("message.settings_spotify_select_anthem"):this.$i18n.t("message.settings_spotify_no_anthem")},userAnthemArtistSong:function(){return this.spotifyBioAnthem.name}}),watch:{authUser:function(e,t){e.isSpotifyConnected&&!t.isSpotifyConnected&&(this.fetchSpotifyBio(),this.fetchSpotifyTop())}},mounted:function(){this.checkSpotifyTokens(),this.authUser.isSpotifyConnected&&(this.fetchSpotifyBio(),this.fetchSpotifyTop())},methods:p(p(p({},Object(l["Nb"])(["connectSpotify","disconnectSpotify"])),Object(l["db"])(["fetchSpotifyBio","fetchSpotifyTop","fetchSpotifyTopArtists"])),{},{checkSpotifyTokens:function(){var e=c()(this.$route,"query.access_token"),t=c()(this.$route,"query.refresh_token"),s=c()(this.$route,"query.token_expiration");e&&t&&s&&(this.$router.replace(this.$route.path),this.connectSpotify({accessToken:e,tokenExpiration:s,refreshToken:t}))},disableSpotify:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSpotify=!0,e.next=3,this.disconnectSpotify();case 3:this.disabledSpotify=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()})},m=h,f=s("2877"),g=Object(f["a"])(m,i,r,!1,null,null,null);t["a"]=g.exports},b2183:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-settings__content"},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_choose_anthem"))+" ")]),s("button",{staticClass:"g-btn m-border m-rounded m-sm",on:{click:e.returnBack}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")])]),s("div",{staticClass:"b-chats__search-users-wrapper spotify__search"},[e.searchLoading?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"searchUsersIconLoading",staticClass:"icon-loading"}):s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"searchUsersIconSearch",staticClass:"icon-search"}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.anthemSearchInput,expression:"anthemSearchInput"}],staticClass:"form-control b-chats__search-users-input",attrs:{type:"text",autocomplete:"off",placeholder:"Search",maxlength:100,autocorrect:"off",autocapitalize:"off",spellcheck:"false"},domProps:{value:e.anthemSearchInput},on:{input:[function(t){t.target.composing||(e.anthemSearchInput=t.target.value)},e.doAnthemSearchInput]}}),s("button",{staticClass:"b-chats__search-users-clear",class:{"g-invisible":0===e.anthemSearchInput.length},attrs:{type:"button"},on:{click:e.clearAnthemSearch}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),s("div",{staticClass:"b-chats__available-users__list spotify__list"},[s("button",{staticClass:"b-chats__available-users__item spotify__list__item",attrs:{disabled:e.disabledSpotifyAnthem},on:{click:e.removeAnthem}},[s("div",[e._v(e._s(e.$t("message.settings_spotify_dont_want_anthem")))])])]),s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.settings_spotify_top_songs"))+" ")])]),e.noSpotifyTopTracks?s("div",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.settings_spotify_no_anthem"))+" ")]):e._e(),s("div",{staticClass:"b-chats__available-users__list spotify__list"},e._l(e.spotifyTopTracks,(function(t){return s("button",{key:t.id,staticClass:"b-chats__available-users__item spotify__track__item",attrs:{disabled:e.disabledSpotifyAnthem},on:{click:function(s){return s.preventDefault(),e.selectAnthem(t.id)}}},[s("span",{staticClass:"g-avatar m-w50"},[s("img",{attrs:{src:e.albumImage(t.album),alt:""}})]),s("div",[s("div",{staticClass:"g-user-name"},[e._v(e._s(t.name))]),s("div",{staticClass:"b-spotify__desc"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-spotify-filled",attrs:{"extra-class":"b-spotify__logo"}}),e._v(" "+e._s(e.showArtists(t.artists))+" ")])])])})),0)])},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=(s("7f7f"),s("bd86")),o=s("b047c"),c=s.n(o),l=s("d634"),u=s("1560");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var h={name:"SpotifyAnthem",mixins:[u["a"]],data:function(){return{anthemSearchInput:"",searchLoading:!1,disabledSpotifyAnthem:!1}},computed:p(p({},Object(l["eb"])(["spotifyTopTracks"])),{},{noSpotifyTopTracks:function(){return!this.spotifyTopTracks.length}}),mounted:function(){this.spotifyTopTracks.length||this.fetchSpotifyTopTracks()},methods:p(p({},Object(l["db"])(["fetchSpotifyTopTracks","sendSpotifyAnthem","fetchSpotifySearch"])),{},{returnBack:function(){this.goBack({name:"SettingsProfile"})},albumImage:function(e){return e.images[e.images.length-1].url},showArtists:function(e){return e.map((function(e){return e.name})).join(", ")},selectAnthem:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSpotifyAnthem=!0,e.next=3,this.sendSpotifyAnthem(t);case 3:s=e.sent,s&&this.returnBack(),this.disabledSpotifyAnthem=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeAnthem:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSpotifyAnthem=!0,e.next=3,this.sendSpotifyAnthem();case 3:t=e.sent,t&&this.returnBack(),this.disabledSpotifyAnthem=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),doAnthemSearchInput:c()((function(){this.anthemSearchInput?this.fetchSpotifySearch(this.anthemSearchInput):this.fetchSpotifyTopTracks()}),300),clearAnthemSearch:function(){this.anthemSearchInput="",this.fetchSpotifyTopTracks()}})},m=h,f=s("2877"),g=Object(f["a"])(m,i,r,!1,null,null,null);t["default"]=g.exports},b304:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("button",{staticClass:"g-btn m-border m-rounded m-block m-sm m-back-to-top m-gray-color m-uppercase",class:{"g-hidden":!e.showBackToTop},attrs:{type:"button"},on:{click:e.scrollToTop}},[e._v(" "+e._s(e.$t("message.back_to_top_button_label"))+" "),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-up"})])},r=[],a=s("b047c"),n=s.n(a),o=s("16d9"),c={name:"BackToTopBtn",mixins:[o["a"]],data:function(){return{showBackToTop:!1}},mounted:function(){window.addEventListener("scroll",this.catchScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.catchScroll)},methods:{catchScroll:n()((function(){this.showBackToTop=window.pageYOffset>0}),300,{leading:!0})}},l=c,u=s("2877"),d=Object(u["a"])(l,i,r,!1,null,null,null);t["a"]=d.exports},cd46:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:{"b-settings__content":e.isSettingPage}},[s("div",{staticClass:"g-section__header"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.edit_profile_title"))+" ")])]),s("form",{staticClass:"b-settings__form"},[s("div",{staticClass:"g-input__fieldset"},[e.isElementShown("images")?s("ProfileImages",{attrs:{"avatar-changed":e.avatarChanged,"cover-changed":e.coverChanged,"avatar-error":e.savingErrors.avatar,"cover-error":e.savingErrors.header},on:{avatarSelected:e.avatarSelected,avatarRemoved:e.avatarRemovedHandler,coverSelected:e.coverSelected,coverRemoved:e.coverRemovedHandler}}):e._e(),e.isElementShown("username")?s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:e.usernameValidate,expression:"usernameValidate"}],attrs:{id:"input-login","data-vv-delay":"1000","data-vv-as":"Username",name:"username",type:"text",label:e.$t("message.username_label"),"help-text":e.usernameHelpText,maxlength:24,trim:!0,"to-lower-case":!0,error:e.errors.first("username")||e.savingErrors["username"]},on:{input:function(t){return e.onInput("username")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[s("template",{slot:"afterInput"},[s("span",{staticClass:"new_login_state",class:{"m-bad":e.errors.first("username")}},[e.errors.first("username")?s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"usernameIconClose",staticClass:"icon-close"}):s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"usernameIconDone",staticClass:"icon-done"})])])],2):e._e(),e.isElementShown("name")?s("InputOF",{attrs:{id:"input-name",name:"name",type:"text",label:e.$t("message.profile_name_label"),placeholder:e.$t("message.profile_name_label"),maxlength:40,error:e.savingErrors["name"]},on:{input:function(t){return e.onInput("name")}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):e._e(),e.isElementShown("subscribe_price")?s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:e.subscribePriceValidationRules,expression:"subscribePriceValidationRules"}],attrs:{id:"input-subscribe-price","data-vv-as":"Subscription price",name:"subscribePrice",type:"price",min:e.minSubscribePrice,max:e.maxSubscribePrice,step:.01,"wrapper-classes":"b-settings__subscription-price__wrapper b-input__wrapper m-with-clear-btn",label:e.$t("message.subscription_price_label_new"),placeholder:e.$t("message.free_placeholder"),disabled:!e.authUser.canEarn,error:e.errors.first("subscribePrice")||e.savingErrors["subscribePrice"]},on:{input:function(t){return e.onInput("subscribePrice")}},model:{value:e.subscribePrice,callback:function(t){e.subscribePrice=t},expression:"subscribePrice"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"b-settings__subscription-price__curr-sign"},[e._v("$")])]),s("template",{slot:"afterInput"},[e.authUser.canEarn?s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.free__min_price_label",{MIN:e.minSubscribePrice}))+" ")]):s("p",{staticClass:"g-input__help",domProps:{innerHTML:e._s(e.$t("message.settings_subscription_price_no_bank_message",{BANKING_URL:e.bankingUrl}))}}),!e.authUser.subscribePrice&&e.subscribePrice>0&&e.allSettings.hasPaidPosts?s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.paid_posts_subscription_notice"))+" ")]):e._e(),e.showReviewNotice?s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.review_bundles_notice"))+" ")]):e._e()])],2):e._e(),e.isElementShown("bundles")&&e.authUser.subscribePrice>0?s("div",{staticClass:"list-offers"},[e.showAddBtn?e._e():s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.bundles_block_title"))+" ")]),s("bundles-card",{directives:[{name:"show",rawName:"v-show",value:e.showAddBtn,expression:"showAddBtn"}],attrs:{"data-name":"bundlesCard"}}),e._l(e.bundles,(function(e){return s("bundle",{key:e.id,attrs:{bundle:e,"data-name":"bundle"}})}))],2):e._e(),e.authUser.subscribePrice&&e.authUser.subscribePrice>0&&e.isElementShown("recommender_reward")?s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.recommender_reward_label"))+" "),s("span",{staticClass:"g-icon-info m-inline m-with-round-hover"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:{content:e.$t("message.tooltip_reward_subscriber_eferrals"),classes:"m-tooltip-higher"},expression:"{content: $t('message.tooltip_reward_subscriber_eferrals'), classes: 'm-tooltip-higher' }",modifiers:{enabled:!0}}],staticClass:"icon-info"})])]),s("div",{staticClass:"g-select__wrapper"},[s("CustomSelect",{attrs:{options:e.recommenderRewardOptions,searchable:!1},model:{value:e.recommenderReward,callback:function(t){e.recommenderReward=t},expression:"recommenderReward"}})],1)]):e._e(),e.authUser.isPerformer?s("div",{staticClass:"g-input__wrapper"},[s("div",{staticClass:"g-section__header m-mb-20 m-text-start"},[s("h2",{staticClass:"g-section-title"},[e._v(" "+e._s(e.$t("message.notify_awards_top"))+" ")]),s("span",{staticClass:"g-icon-info m-inline m-with-round-hover"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:{content:e.$t("message.notify_awards_top_hint"),classes:"m-tooltip-higher"},expression:"{content: $t('message.notify_awards_top_hint'), classes: 'm-tooltip-higher' }",modifiers:{enabled:!0}}],staticClass:"icon-info"})])]),s("div",{staticClass:"g-select__wrapper"},[s("checkbox-toggle",{attrs:{name:"sendAwardsTop1",disabled:e.disabledSendAwardsTop1,label:e.$t("message.send_awards_top_1")},on:{input:function(t){return e.sendCurrentUserField(e.sendAwardsTop1,"sendAwardsTop1","disabledSendAwardsTop1")}},model:{value:e.sendAwardsTop1,callback:function(t){e.sendAwardsTop1=t},expression:"sendAwardsTop1"}}),s("checkbox-toggle",{attrs:{name:"sendAwardsTop5",disabled:e.disabledSendAwardsTop5,label:e.$t("message.send_awards_top_5")},on:{input:function(t){return e.sendCurrentUserField(e.sendAwardsTop5,"sendAwardsTop5","disabledSendAwardsTop5")}},model:{value:e.sendAwardsTop5,callback:function(t){e.sendAwardsTop5=t},expression:"sendAwardsTop5"}})],1)]):e._e(),e.isElementShown("about")?s("InputOF",{attrs:{id:"input-about",name:"about",type:"textarea",label:e.$t("message.about_label"),placeholder:e.$t("message.about_label"),maxlength:1e3,autogrow:!0,autocomplete:!1,error:e.savingErrors["about"],required:"banking"===e.page},on:{input:function(t){return e.onInput("about")}},model:{value:e.about,callback:function(t){e.about=t},expression:"about"}}):e._e(),e.isElementShown("location")?s("InputOF",{attrs:{id:"input-location",type:"text",label:e.$t("message.location_label"),placeholder:e.$t("message.location_label"),maxlength:64,error:e.savingErrors["location"]},on:{input:function(t){return e.onInput("location")}},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}):e._e(),e.isElementShown("website")?s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:{url:{protocols:["http","https"]}},expression:"{url: { protocols: ['http', 'https'] }}"}],attrs:{id:"input-website","data-vv-as":e.$t("message.website_label"),type:"text",name:"website",label:e.$t("message.website_label"),placeholder:e.$t("message.website_label"),maxlength:100,error:e.errors.first("website")||e.savingErrors["website"]},on:{input:function(t){return e.onInput("website")},change:e.changeWebsite},model:{value:e.website,callback:function(t){e.website=t},expression:"website"}}):e._e(),e.isElementShown("wishlist")?s("InputOF",{directives:[{name:"validate",rawName:"v-validate",value:"url",expression:"'url'"}],attrs:{id:"input-wishlist","data-vv-as":e.$t("message.wishlist_label"),type:"text",name:"wishlist",label:e.$t("message.wishlist_label"),placeholder:e.$t("message.wishlist_label"),maxlength:100,error:e.errors.first("wishlist")||e.savingErrors["wishlist"]},on:{input:function(t){return e.onInput("wishlist")}},model:{value:e.wishlist,callback:function(t){e.wishlist=t},expression:"wishlist"}}):e._e()],1),s("ButtonOF",{attrs:{text:e.$t("message.save_changes_button"),loading:e.loading},on:{click:e.save}})],1),e.isElementShown("spotify")?s("spotify-settings"):e._e()],1)},r=[],a=(s("8e6e"),s("96cf"),s("3b8d")),n=(s("6762"),s("2fdb"),s("c5f6"),s("20d6"),s("ac6a"),s("456d"),s("7f7f"),s("bd86")),o=s("9b02"),c=s.n(o),l=s("9e86"),u=s.n(l),d=s("d634"),p=s("13ca"),h=s("0fc7"),m=s("1569"),f=s("d1e5"),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"g-input__wrapper"},[s("label",{staticClass:"g-input__label"},[e._v(" "+e._s(e.$t("message.change_profile_photos_label"))+" ")]),s("div",{staticClass:"b-user-panel"},[s("label",{staticClass:"b-user-panel__cover"},[s("input",{ref:"coverInput",staticClass:"input_file",attrs:{name:"header",type:"file",accept:e.acceptCoverExt},on:{change:e.changeCoverEvent}}),s("img",{staticClass:"b-user-panel__cover__img",attrs:{src:e.coverSrc,alt:""},on:{error:function(t){return e.errorCover(t)}}}),s("span",{staticClass:"g-btn m-rounded m-sm m-border m-bold",on:{click:function(t){return t.preventDefault(),e.selectCoverImage(t)}}},[e._v(" "+e._s(e.$t("message.upload_cover_image_button_label"))+" ")])]),s("label",{staticClass:"b-user-panel__avatar"},[s("input",{ref:"avatarInput",staticClass:"input_file",attrs:{name:"avatar",type:"file",accept:e.acceptAvatarExt},on:{change:e.changeAvatarEvent}}),s("span",{staticClass:"g-avatar online_status_class m-w150",class:{online:e.user.isOnline}},[s("image-thumb",{attrs:{user:Object.assign({},e.authUser,{avatar:e.avatarSrc,avatarThumbs:e.avatarThumbs}),size:"c144"}})],1),s("span",{staticClass:"g-btn m-rounded m-sm m-border m-bold",on:{click:function(t){return t.preventDefault(),e.selectAvatarImage(t)}}},[e._v(" "+e._s(e.$t("message.upload_profile_photo_button_label"))+" ")])]),s("button",{staticClass:"b-user-panel__del-btn m-cover b-btn-remove",class:e.showRemoveCover?"":"g-hidden",attrs:{type:"button"},on:{click:e.removeCover}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),s("button",{staticClass:"b-user-panel__del-btn m-avatar b-btn-remove",class:e.showRemoveAvatar?"":"g-hidden",attrs:{type:"button"},on:{click:e.removeAvatar}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.$t("message.change_header_image_no_nudity_message"))+" ")])])},v=[],b=s("925c"),_=s("e66b"),w=s("9d17"),y=s("7e35"),k=s("0f6f"),C=s("06f2");function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var P={name:"ProfileImages",components:{ImageThumb:_["a"]},mixins:[b["a"],y["a"],k["a"],C["a"]],props:{avatarChanged:{type:Boolean,default:!1},coverChanged:{type:Boolean,default:!1},avatarError:{type:String,default:""},coverError:{type:String,default:""}},data:function(){return{avatar:null,cover:null}},computed:S(S(S(S({},Object(d["Ob"])(["user","hasUser","userId"])),Object(d["b"])(["authUser"])),Object(d["q"])(["getInit"])),{},{photoExt:function(){return this.getInit.postMediaConfig.extensions.photo.join()},acceptAvatarExt:function(){return this.photoExt},acceptCoverExt:function(){return this.photoExt},coverSrc:function(){return this.coverChanged?this.cover:this.thumbSrcLink(this.authUser.header,this.authUser.headerThumbs,"w760","header")},avatarSrc:function(){return this.avatarChanged?this.avatar:this.authUser.avatar||""},avatarThumbs:function(){return this.avatarChanged?null:this.authUser.avatarThumbs||null},showRemoveAvatar:function(){return!!this.avatar||!this.avatarChanged&&this.authUser.avatar&&!this.authUser.avatar.includes("default_avatar.png")},showRemoveCover:function(){return!!this.cover||!this.coverChanged&&this.authUser.header&&!this.authUser.header.includes("default_header_image.png")&&!this.authUser.header.includes("default_header_image_dark.png")}}),watch:{avatarError:function(e,t){e&&!t&&(this.avatar="",alert(e))},coverError:function(e,t){e&&!t&&(this.cover="",alert(e))}},methods:{removeCover:function(){this.cover="",this.$emit("coverRemoved")},removeAvatar:function(){this.avatar="",this.$emit("avatarRemoved")},selectCoverImage:function(){this.$refs.coverInput.click()},selectAvatarImage:function(){this.$refs.avatarInput.click()},changeCoverEvent:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$refs.coverInput.files[0],s=this.getInit.personalConfig.header,i=s.minHeight,r=s.minWidth,a=this.getMediaFile(t.type,"photo"),a){e.next=7;break}alert(this.$i18n.t("message.upload_error_file_not_allowed")),e.next=20;break;case 7:return e.prev=7,e.next=10,Object(w["a"])(t);case 10:return n=e.sent,e.next=13,this.imageChecker({media:"photo",url:n,minHeight:i,minWidth:r});case 13:this.cover=n,this.$emit("coverSelected",t),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](7),alert(e.t0.message);case 20:this.$refs.coverInput.value="";case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));function t(){return e.apply(this,arguments)}return t}(),changeAvatarEvent:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.avatarInput.files[0],s=this.getInit.personalConfig.avatar,i=s.minHeight,r=s.minWidth,e.prev=2,e.next=5,Object(w["a"])(t);case 5:return a=e.sent,e.next=8,this.imageChecker({media:"photo",url:a,minHeight:i,minWidth:r});case 8:this.avatar=a,this.$emit("avatarSelected",t),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),alert(e.t0.message||this.$i18n.t("message.debug_alert_message"));case 15:this.$refs.avatarInput.value="";case 16:case"end":return e.stop()}}),e,this,[[2,12]])})));function t(){return e.apply(this,arguments)}return t}()}},x=P,j=s("2877"),$=Object(j["a"])(x,g,v,!1,null,null,null),T=$.exports,D=s("b000"),I=s("8aaea"),E=s("418f"),M=s("1e52"),A=s("29d7"),F=s("60b3"),U=s("8c16");s("a481");function L(e){return"string"===typeof e||e instanceof String?e.replace(/<[^>]*>/g,""):e}var N=s("8975");function R(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?R(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var q={name:"SettingsProfile",components:{ProfileImages:T,ButtonOF:h["a"],InputOF:p["a"],CheckboxToggle:m["a"],SpotifySettings:D["a"],CustomSelect:f["a"],Bundle:E["a"],BundlesCard:I["a"]},mixins:[U["g"],M["a"],A["a"],F["a"]],props:{page:{type:String,default:"settings"},fieldsToShow:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,profileData:{username:null,name:null,about:null,location:null,website:null,wishlist:null,subscribePrice:null},coverChanged:!1,coverRemoved:!1,avatar:"",cover:"",avatarChanged:!1,avatarRemoved:!1,recommenderReward:null,recommenderRewardOptions:[{code:null,name:this.$i18n.t("message.option_disabled")},{code:"1 month",name:this.$t("message.recommender_reward_1month_option")}],sendAwardsTop1:!1,sendAwardsTop5:!1,disabledSendAwardsTop1:!1,disabledSendAwardsTop5:!1,isBeforeDestroyed:!1}},computed:B(B(B(B(B({},Object(d["Ob"])(["user","hasUser","userId"])),Object(d["b"])(["isAuth","authUserId","authUser"])),Object(d["eb"])(["userLoginPrefix","allSettings"])),Object(d["h"])(["getBundles"])),{},{isSettingPage:function(){return"settings"===this.page},usernameHelpText:function(){var e=this.username?this.username:"".concat(this.userLoginPrefix).concat(this.authUser.id),t=Object(N["a"])(e);return"".concat(window.location.origin,"/").concat(t)},bankingUrl:function(){return"/my/banking"},username:{get:function(){return null!==this.profileData.username?this.profileData.username:this.authUser.username},set:function(e){this.profileData.username=e}},name:{get:function(){return null!==this.profileData.name?this.profileData.name:Object(N["b"])(this.authUser.name)},set:function(e){this.profileData.name=e}},location:{get:function(){return null!==this.profileData.location?this.profileData.location:this.authUser.location},set:function(e){this.profileData.location=e}},website:{get:function(){return null!==this.profileData.website?this.profileData.website:this.authUser.website},set:function(e){this.profileData.website=e}},subscribePrice:{get:function(){return null!==this.profileData.subscribePrice?this.profileData.subscribePrice:this.authUser.subscribePrice||""},set:function(e){this.authUser.canEarn&&(this.profileData.subscribePrice=e||"")}},wishlist:{get:function(){return null!==this.profileData.wishlist?this.profileData.wishlist:this.authUser.wishlist},set:function(e){this.profileData.wishlist=e}},about:{get:function(){return L(null!==this.profileData.about?this.profileData.about:this.authUser.rawAbout||this.authUser.about||"")},set:function(e){this.profileData.about=e}},minSubscribePrice:function(){return this.authUser.subscribeMinPrice},maxSubscribePrice:function(){return this.authUser.subscribeMaxPrice},subscribePriceValidationRules:function(){return"max_value:".concat(this.maxSubscribePrice,"|min_value:").concat(this.minSubscribePrice)},changedUserFields:function(){var e=this;return this.authUser.id?Object.keys(this.profileData).filter((function(t){return null!==e.profileData[t]&&e.profileData[t]!==e.authUser[t]&&!("subscribePrice"===t&&""===e.profileData[t]&&0===e.authUser[t])})):[]},changedSettingsFields:function(){return!(this.recommenderReward==this.allSettings.recommenderReward&&this.sendAwardsTop1==this.allSettings.sendAwardsTop1&&this.sendAwardsTop5==this.allSettings.sendAwardsTop5)},allDataSaved:function(){return!this.changedUserFields.length&&!this.changedSettingsFields},showAddBtn:function(){var e=this;return!!c()(this,"user.canAddSubscriberByBundle.durations")&&!!Object.keys(this.user.canAddSubscriberByBundle.durations).filter((function(t){return e.bundles.findIndex((function(e){return e.duration===Number(t)}))<0})).length},bundles:function(){return this.user.subscriptionBundles?this.getBundles(this.user.subscriptionBundles):[]},showReviewNotice:function(){var e=this;return this.subscribePrice&&this.authUser.bundleMaxPrice&&this.bundles.length&&this.bundles.some((function(t){return e.subscribePrice*(100-t.discount)*t.duration/100>e.authUser.bundleMaxPrice}))}}),watch:{authUser:function(e,t){this.setDataFromStore(e,t)},"allSettings.recommenderReward":function(e){this.recommenderReward=e},"allSettings.sendAwardsTop1":function(e){this.sendAwardsTop1=e},"allSettings.sendAwardsTop5":function(e){this.sendAwardsTop5=e}},mounted:function(){window.addEventListener("beforeunload",this.checkLeave),this.setDataFromStore(this.authUser),this.setDataFromSettings(this.allSettings),this.$root.$once("removeAllBeforeUnloadListeners",this.removeListeners)},beforeDestroy:function(){this.isBeforeDestroyed=!0,window.removeEventListener("beforeunload",this.checkLeave),this.$validator.pause(),this.$root.$off("removeAllBeforeUnloadListeners",this.removeListeners)},methods:B(B(B(B({},Object(d["fb"])(["setExistedUsernames","setSettingField"])),Object(d["Nb"])(["patchUser"])),Object(d["a"])(["fetchUserMe"])),{},{compareValues:function(e,t){return null===e&&(e=""),null===t&&(t=""),e===t},changeWebsite:function(){var e=/^http(s?):\/\//;this.website&&!e.test(this.website)&&(this.website="https://".concat(this.website))},isElementShown:function(e){return!e||!this.fieldsToShow.length||this.fieldsToShow.includes(e)},setDataFromStore:function(e,t){!e||t&&t.avatar===e.avatar||(this.avatar=e.avatar),!e||t&&t.header===e.header||(this.cover=e.header)},setDataFromSettings:function(e){this.recommenderReward=e.recommenderReward,this.sendAwardsTop1=e.sendAwardsTop1,this.sendAwardsTop5=e.sendAwardsTop5},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.savingErrors={},e.next=4,this.$validator.validateAll();case 4:if(t=e.sent,!t){e.next=46;break}if(this.setExistedUsernames(),s={},this.changedUserFields.forEach((function(e){s[e]=r.profileData[e]})),this.recommenderReward!=this.allSettings.recommenderReward&&(s.recommenderReward=this.recommenderReward),!this.coverRemoved){e.next=14;break}s.header="",e.next=18;break;case 14:if(!this.coverChanged||!this.cover){e.next=18;break}return e.next=17,this.uploadImage(this.cover);case 17:s.header=e.sent;case 18:if(!this.avatarRemoved){e.next=22;break}s.avatar="",e.next=26;break;case 22:if(!this.avatarChanged||!this.avatar){e.next=26;break}return e.next=25,this.uploadImage(this.avatar);case 25:s.avatar=e.sent;case 26:if(Object.keys(s).length){e.next=29;break}return this.loading=!1,e.abrupt("return");case 29:return e.next=31,this.patchUser(s);case 31:if(i=e.sent,this.isBeforeDestroyed){e.next=46;break}if(!i||!i.success){e.next=45;break}return this.$bvToast.toast(this.$i18n.t("message.changes_saved_toast"),{autoHideDelay:5e3,appendToast:!0,toaster:"b-toaster-bottom-left"}),this.recommenderReward!==this.allSettings.recommenderReward&&this.setSettingField({field:"recommenderReward",status:this.recommenderReward}),e.next=38,this.fetchUserMe();case 38:this.profileData={username:null,name:null,about:null,location:null,website:null,wishlist:null,subscribePrice:null},this.coverRemoved=!1,this.coverChanged=!1,this.avatarRemoved=!1,this.avatarChanged=!1,e.next=46;break;case 45:i&&i.error&&(this.savingErrors=u()(i.errors,(function(e){return e.join(". ")})),this.focusOnError(this.savingErrors));case 46:this.loading=!1;case 47:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),coverSelected:function(e){this.coverChanged=!0,this.coverRemoved=!1,this.cover=e,delete this.savingErrors.cover},avatarSelected:function(e){this.avatarChanged=!0,this.avatarRemoved=!1,this.avatar=e,delete this.savingErrors.avatar},uploadImage:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s={},e.prev=1,e.next=4,this.fileUploadAsync(t);case 4:i=e.sent,i&&!i.err?s=i:alert(this.$t("message.image_upload_error")),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),alert(this.$t("message.image_upload_error"));case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(t){return e.apply(this,arguments)}return t}(),coverRemovedHandler:function(){this.coverRemoved=!0,this.coverChanged=!0},avatarRemovedHandler:function(){this.avatarRemoved=!0,this.avatarChanged=!0},checkLeave:function(e){var t=e||window.event;if(!this.allDataSaved)return t&&(t.preventDefault(),t.returnValue=this.$i18n.t("message.profile_settings_leave_page")),this.$i18n.t("message.profile_settings_leave_page")},onInput:function(e){this.deleteSavingErrorsOnInput(e)},focusOnError:function(e){e.header&&(this.coverChanged=!1),e.avatar&&(this.avatarChanged=!1),this.focusOnSavingError(e)},removeListeners:function(){window.removeEventListener("beforeunload",this.checkLeave)}}),beforeRouteLeave:function(e,t,s){this.allDataSaved||this.$window.confirm(this.$i18n.t("message.profile_settings_leave_page"))?s():s(!1)}},H=q,W=Object(j["a"])(H,i,r,!1,null,null,null);t["default"]=W.exports},d075:function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));s("8e6e"),s("ac6a"),s("456d"),s("7f7f");var i=s("bd86"),r=(s("a481"),s("c1df")),a=s.n(r),n=s("d634"),o=s("709f");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u=function(){var e,t=o["a"].getItem("recommender");if(t)try{e=JSON.parse(t)}catch(s){e={}}else e={};return e},d=function(e){var t=u();if(t&&t[e]){var s=a()(t[e].expiredAt).isBefore();if(!s)return t[e].recId;p(e)}},p=function(e){var t=u();if(t&&t[e]){delete t[e];var s=JSON.stringify(t);o["a"].setItem("recommender",s)}};t["a"]={created:function(){var e=this;this.$watch((function(e){return[e.$route,e.authUserId,e.userId]}),(function(t){var s=function(){i&&i.query&&void 0!==i.query.rec&&e.$router.replace({query:l(l({},e.$route.query),{},{rec:void 0})})},i=t[0],r=t[1],n=t[2];if(n&&"Profile"===i.name&&i.query&&void 0!==i.query.rec){var c=i.query.rec;if(c=parseInt(c,10)||null,!c)return void s();if(r&&(r===c||r===n))return void s();if(n===c)return void s();var d=u();d[n]||(d[n]={},d[n].userId=n),d[n].recId=c,d[n].expiredAt=a()().add(1,"months").format();var p=JSON.stringify(d);o["a"].setItem("recommender",p),s()}}),{immediate:!0})},computed:l(l({},Object(n["b"])(["authUserId"])),Object(n["Ob"])(["userId"]))}},e057:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("8e6e"),s("ac6a"),s("456d");var i=s("bd86"),r=s("d634");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(i["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var o={computed:n(n(n({},Object(r["Ob"])(["userId"])),Object(r["b"])(["authUserId"])),{},{isAuthUser:function(){return this.userId===this.authUserId}})}},eacb:function(e,t,s){},ee41:function(e,t,s){"use strict";(function(e){t["a"]={methods:{pauseStory:function(){this.playTimeout=e.setTimeout((function(){var e=document.querySelector(".story-viewer.viewing");if(e){var t=document.querySelector(".story-viewer.viewing .item.active video");t&&t.pause(),e.classList.add("paused")}}))},playStory:function(){var e=document.querySelector(".story-viewer.viewing");if(e){var t=document.querySelector(".story-viewer.viewing .item.active video");t&&t.play(),e.classList.remove("paused")}}}}}).call(this,s("c8ba"))},f108:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("form",{ref:"dragUploadArea",staticClass:"has-advanced-upload",class:{"m-can-save":!e.disabledSubmit},attrs:{id:"make_post_form"},on:{submit:function(t){return t.preventDefault(),e.makePostSubmit(t)}}},[s("div",{ref:"makePost",staticClass:"b-make-post",class:{"m-form-draft-post":e.hasDraft&&!e.fakeMode,"m-with-paid-options":e.privatePost,"m-paid-text":e.lockDescription&&e.privatePost,"m-free-text":!e.lockDescription&&e.privatePost,"m-paid-poll":e.showPoll&&e.pollLocked&&e.privatePost,"m-free-poll":e.showPoll&&!e.pollLocked&&e.privatePost,"m-paid-media-active":e.paidMediaActive,"m-free-media-active":e.freeMediaActive,"m-media-on-center":e.mediaCentered,"m-paid-media-text":e.paidMediaText,"m-free-media-text":e.freeMediaText,"m-paid-media-audio":e.paidMediaAudio,"m-free-media-audio":e.freeMediaAudio,"m-free-audio":e.uploadedFilesAudio.length&&!e.audioLocked&&e.privatePost,"m-paid-audio":e.uploadedFilesAudio.length&&e.audioLocked&&e.privatePost,"m-chats-footer":e.isChat,"m-chats-tip":e.tipValue}},["Chat"===e.$route.name?s("chat-info",{attrs:{chat:e.chat,"with-user":e.withUser,"tip-value":e.tipValue,"tips-min":e.withUser.tipsMin,text:e.text}}):e._e(),e.defaultPollExpired>0||e.scheduleDate||e.saveForLater?s("div",{staticClass:"b-dropzone__previews b-make-post__schedule-expire-wrapper"},[e.defaultPollExpired>0?s("div",{staticClass:"b-dropzone__preview m-expire m-loaded"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-clock"}),s("span",{domProps:{innerHTML:e._s(e.$t("message.make_post_expire_preview_text",{DAYS:e.pollExpired}))}}),s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.defaultPollExpired=0}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]):e._e(),e.scheduleDate||e.saveForLater?s("div",{staticClass:"b-dropzone__preview m-schedule m-loaded"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-schedule"}),e.scheduleDate?[e._v(" Scheduled for "),s("strong",[s("utils-time",{attrs:{date:e.scheduleDate,type:"schedule"}})],1)]:e._e(),e.saveForLater?[e._v(" Save for Later ")]:e._e(),s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.scheduleDate=null,e.saveForLater=!1}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])],2):e._e()]):e._e(),e.privatePost?s("div",{staticClass:"b-make-post__price-free-labels"},[s("div",{staticClass:"b-make-post__price-free-label m-free",on:{click:e.movePreviewsToBeginning}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price-free"}),e._v(" "+e._s(e.$t("message.make_post_free_preview_label"))+" ")]),s("div",{ref:"paidContentLabel",staticClass:"b-make-post__price-free-label m-paid",on:{click:e.movePreviewsToEnd}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price"}),e._v(" "+e._s(e.$t("message.make_post_price_to_view_label"))+" "),s("div",{staticClass:"b-make-post__price-free-label__price"},[e._v(" "+e._s("$"+e.price.toFixed(2).replace(".00",""))+" ")]),s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",title:"Delete"},on:{click:function(t){e.price=0}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])]):e._e(),e.showPoll?s("div",{staticClass:"b-dropzone__previews b-make-post__voting-wrapper"},[e.pollLocked&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.togglePollLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-left",staticClass:"icon-arrow-left"})]):e._e(),s("div",{staticClass:"b-make-post__voting b-dropzone__preview m-loaded"},[s("div",{staticClass:"b-make-post__voting__header"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-poll"}),s("span",[e._v(e._s(e.$t("message.make_post_poll_duration_title")))]),s("button",{staticClass:"g-btn m-flat b-make-post__voting__duration",attrs:{type:"button"},on:{click:e.openPollDuration}},[s("span",{domProps:{innerHTML:e._s(e.votingDuration)}})])]),s("div",{staticClass:"new_vote_options",class:{minimal:e.votingOptions.length<=2}},e._l(e.votingOptions,(function(t,i){return s("div",{key:i,staticClass:"vote-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.votingOptions[i],expression:"votingOptions[index]"}],staticClass:"form-control",attrs:{placeholder:e.$t("message.enter_option")},domProps:{value:e.votingOptions[i]},on:{input:function(t){t.target.composing||e.$set(e.votingOptions,i,t.target.value)}}}),s("button",{staticClass:"delete-vote-option",attrs:{type:"button"},on:{click:function(t){return e.removeVoteOption(i)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])})),0),s("button",{staticClass:"g-btn m-flat new_vote_add_option",attrs:{type:"button"},on:{click:e.addVoteOption}},[e._v(" "+e._s(e.$t("message.makke_post_poll_add_option_button"))+" ")]),s("button",{staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button",title:"Delete"},on:{click:function(t){return e.showPollHandler(!1)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),!e.pollLocked&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.togglePollLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-right",staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.showFundraising?s("div",{staticClass:"b-dropzone__previews b-make-post__voting-wrapper"},[e.fundraisingLocked?s("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleFundraisingLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-left",staticClass:"icon-arrow-left"})]):e._e(),s("div",{staticClass:"b-make-post__voting b-dropzone__preview m-loaded"},[s("div",{staticClass:"b-make-post__voting__header"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-fundraising"}),s("span",[e._v(" "+e._s(e.$t("message.make_post_fundraising_title"))+" ")]),s("button",{staticClass:"g-btn m-flat b-make-post__voting__duration",attrs:{type:"button"},on:{click:e.toggleFundingPanel}},[s("span",[e._v(" "+e._s(e.$t("message.make_post_fundraising_target"))+" $"+e._s(e.fundraisingTarget.toFixed(2).replace(".00",""))+" ")])])]),s("div",{staticClass:"new_vote_options",class:{minimal:e.fundraisingOptions.length<=2}},e._l(e.fundraisingOptions,(function(t,i){return s("div",{key:i,staticClass:"vote-input"},[s("InputOF",{attrs:{type:"price",step:"1",min:e.authUser.tipsMin,max:e.fundraisingPresetMax,placeholder:e.$t("message.enter_option")},model:{value:e.fundraisingOptions[i],callback:function(t){e.$set(e.fundraisingOptions,i,t)},expression:"fundraisingOptions[index]"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"currency-sign"},[e._v("$")])])],2),s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"delete-vote-option",attrs:{type:"button"},on:{click:function(t){return e.removeFundraisingOption(i)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})]),e.getFundrisingOptionError(i).length?s("p",{staticClass:"g-input__help"},[e._v(" "+e._s(e.getFundrisingOptionError(i))+" ")]):e._e()],1)})),0),e.fundraisingOptions.length<4?s("button",{staticClass:"g-btn m-flat new_vote_add_option",attrs:{type:"button"},on:{click:e.addFundraisingOption}},[e._v(" "+e._s(e.$t("message.make_post_fundraising_add_option_button"))+" ")]):e._e(),s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.uploaded_media_delete_btn_title"),expression:"$t('message.uploaded_media_delete_btn_title')"}],staticClass:"b-dropzone__preview__delete b-btn-remove",attrs:{type:"button"},on:{click:function(t){return e.showFundraisingHandler(!1)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),!e.fundraisingLocked&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleFundraisingLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-poll-right",staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.uploadedFilesWithoutAudio.length?s("div",{ref:"postMedia",staticClass:"b-make-post__media files b-dropzone__previews",on:{scroll:e.scrollPreviews}},[e.privatePost?[e.isMobileDevice?s("div",{ref:"scrollbarFree",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar m-free",class:{"m-draggable":e.isDraggingPreviews}},[s("div",{staticClass:"b-make-post__media-slider__inner"},[e.getFreeFilesWithoutAudio.length?[e.isDraggingPreviews?s("draggable",{ref:"draggable-container-free",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle"},model:{value:e.freeFilesWithoutAudioList,callback:function(t){e.freeFilesWithoutAudioList=t},expression:"freeFilesWithoutAudioList"}},e._l(e.freeFilesWithoutAudioList,(function(t,i){return s("div",{key:i,staticClass:"b-make-post__preview m-draggable"},[s("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?s("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),s("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(s){return e.setPreviewOrder(t.orderId)}}},[s("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),s("button",{staticClass:"b-make-post__preview__drag-icon js-handle",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):s("div",{staticClass:"b-make-post__media-photos"},e._l(e.getFreeFilesWithoutAudio,(function(t,i){return s("upload-preview",{key:i,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:i,post:e.post,searchFace:e.isAnyMoreThanOneFace,"show-editor":!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage,deleteTip:e.onDeleteTip,updateThumbId:function(s){return e.updateFileThumbId(t,s)}}})})),1)]:e._e(),!e.isDraggingPreviews&&e.getPrimaryFilesWithoutAudio.length?s("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[s("span",{staticClass:"b-make-post__sort-btn m-left"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})])]):e._e()],2)]):s("swiper",{ref:"scrollbarFree",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar m-free",class:{"m-draggable":e.isDraggingPreviews},attrs:{options:{slidesPerView:"auto",freeMode:!0}}},[s("swiper-slide",[e.getFreeFilesWithoutAudio.length?[e.isDraggingPreviews?s("draggable",{ref:"draggable-container-free",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle",move:e.onPreviewMoveFree},model:{value:e.freeFilesWithoutAudioList,callback:function(t){e.freeFilesWithoutAudioList=t},expression:"freeFilesWithoutAudioList"}},e._l(e.freeFilesWithoutAudioList,(function(t,i){return s("div",{key:i,staticClass:"b-make-post__preview m-draggable"},[s("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?s("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),s("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(s){return e.setPreviewOrder(t.orderId)}}},[s("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),s("button",{staticClass:"b-make-post__preview__drag-icon swiper-no-swiping js-handle",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):s("div",{staticClass:"b-make-post__media-photos"},e._l(e.getFreeFilesWithoutAudio,(function(t,i){return s("upload-preview",{key:i,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:i,post:e.post,searchFace:e.isAnyMoreThanOneFace,"show-editor":!1},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage,deleteTip:e.onDeleteTip,updateThumbId:function(s){return e.updateFileThumbId(t,s)}}})})),1)]:e._e(),!e.isDraggingPreviews&&e.getPrimaryFilesWithoutAudio.length?s("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[!e.privatePost||e.getPrimaryFilesWithoutAudio.length?s("span",{staticClass:"b-make-post__sort-btn m-left"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]):e._e(),e.privatePost?e._e():s("span",{staticClass:"b-make-post__sort-btn m-right"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})])]):e._e()],2)],1)]:e._e(),e.isMobileDevice?s("div",{ref:"scrollbarPaid",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar",class:{"m-draggable":e.isDraggingPreviews,"m-paid":e.privatePost}},[s("div",{staticClass:"b-make-post__media-slider__inner"},[e.getPrimaryFilesWithoutAudio.length?[e.isDraggingPreviews?s("draggable",{ref:"draggable-container-paid",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle"},model:{value:e.uploadedFilesWithoutAudioList,callback:function(t){e.uploadedFilesWithoutAudioList=t},expression:"uploadedFilesWithoutAudioList"}},e._l(e.uploadedFilesWithoutAudioList,(function(t,i){return s("div",{key:i,staticClass:"b-make-post__preview m-draggable"},[s("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?s("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),s("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(s){return e.setPreviewOrder(t.orderId)}}},[s("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),s("button",{staticClass:"b-make-post__preview__drag-icon js-handle",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):s("div",{staticClass:"b-make-post__media-photos"},e._l(e.getPrimaryFilesWithoutAudio,(function(t,i){return s("upload-preview",{key:i,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:i,post:e.post,searchFace:e.isAnyMoreThanOneFace,"show-editor":e.isChat},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage,deleteTip:e.onDeleteTip,updateThumbId:function(s){return e.updateFileThumbId(t,s)}}})})),1)]:e._e(),!e.isDraggingPreviews&&(e.uploadedFilesWithoutAudio.length>1&&!e.privatePost||e.getFreeFilesWithoutAudio.length)?s("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[e.privatePost?e._e():s("span",{staticClass:"b-make-post__sort-btn m-left"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),!e.privatePost||e.getFreeFilesWithoutAudio.length?s("span",{staticClass:"b-make-post__sort-btn m-right"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.fileUploadDisabled||!e.uploadedFilesWithoutAudio.length||e.isDraggingPreviews?e._e():s("button",{staticClass:"button-add-media",attrs:{type:"button"},on:{click:e.addNewMediaClick}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})])],2)]):s("swiper",{ref:"scrollbarPaid",staticClass:"b-make-post__media-slider b-dropzone__previews-scroller m-custom-scrollbar",class:{"m-draggable":e.isDraggingPreviews,"m-paid":e.privatePost},attrs:{options:{slidesPerView:"auto",freeMode:!0}}},[s("swiper-slide",[e.getPrimaryFilesWithoutAudio.length?[e.isDraggingPreviews?s("draggable",{ref:"draggable-container-paid",staticClass:"b-make-post__media-photos",attrs:{handle:".js-handle",move:e.onPreviewMovePaid},model:{value:e.uploadedFilesWithoutAudioList,callback:function(t){e.uploadedFilesWithoutAudioList=t},expression:"uploadedFilesWithoutAudioList"}},e._l(e.uploadedFilesWithoutAudioList,(function(t,i){return s("div",{key:i,staticClass:"b-make-post__preview m-draggable"},[s("div",{staticClass:"b-dropzone__preview m-loaded"},[e.getThumb(t)?s("img",{staticClass:"b-dropzone__preview__media",attrs:{src:e.getThumb(t),alt:t.name}}):s("span",{staticClass:"b-dropzone__preview__name"},[e._v(" "+e._s(t.name)+" ")])]),s("button",{staticClass:"b-make-post__set-order-btn",attrs:{type:"button"},on:{click:function(s){return e.setPreviewOrder(t.orderId)}}},[s("span",{staticClass:"b-make-post__set-order-btn__inner",domProps:{innerHTML:e._s(e.getPreviewOrder(t.orderId))}})]),s("button",{staticClass:"b-make-post__preview__drag-icon swiper-no-swiping js-handle",attrs:{type:"button"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-drag"})])])})),0):s("div",{staticClass:"b-make-post__media-photos"},e._l(e.getPrimaryFilesWithoutAudio,(function(t,i){return s("upload-preview",{key:i,class:{"m-square":e.squarePreviews&&"photo"===t.mediaType},attrs:{file:t,index:i,post:e.post,searchFace:e.isAnyMoreThanOneFace,"show-editor":e.isChat},on:{deleteFile:e.onDeleteFile,openPreview:e.openPreview,saveEditedImage:e.onSaveEditedImage,saveAsCopyEditedImage:e.saveAsCopyEditedImage,deleteTip:e.onDeleteTip,updateThumbId:function(s){return e.updateFileThumbId(t,s)}}})})),1)]:e._e(),!e.isDraggingPreviews&&(e.uploadedFilesWithoutAudio.length>1&&!e.privatePost||e.getFreeFilesWithoutAudio.length)?s("button",{staticClass:"b-make-post__sort-btns m-btn",attrs:{type:"button"},on:{click:e.enableDraggablePreviews}},[e.privatePost?e._e():s("span",{staticClass:"b-make-post__sort-btn m-left"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),!e.privatePost||e.getFreeFilesWithoutAudio.length?s("span",{staticClass:"b-make-post__sort-btn m-right"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]):e._e()]):e._e(),e.fileUploadDisabled||!e.uploadedFilesWithoutAudio.length||e.isDraggingPreviews?e._e():s("button",{staticClass:"button-add-media",attrs:{type:"button"},on:{click:e.addNewMediaClick}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add"})])],2)],1),e.isDraggingPreviews?s("div",{staticClass:"b-make-post__sort-btns"},[s("button",{staticClass:"b-make-post__sort-btn",class:{"m-move-all":!e.previewsOrder.length&&e.paidMediaWithoutAudio.length},attrs:{type:"button",disabled:!e.previewsOrder.length&&!e.paidMediaWithoutAudio.length},on:{click:e.movePreviewsToBeginning}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-left"})]),s("button",{staticClass:"b-make-post__sort-btn",class:{"m-move-all":!e.previewsOrder.length&&e.freeMediaWithoutAudio.length},attrs:{type:"button",disabled:!e.previewsOrder.length&&!e.freeMediaWithoutAudio.length},on:{click:e.movePreviewsToEnd}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-arrow-right"})]),s("button",{staticClass:"b-make-post__sort-done-btn",attrs:{type:"button"},on:{click:e.savePreviewsOrder}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-done"})])]):e._e()],2):e._e(),e.uploadedFilesAudio.length?s("div",{staticClass:"b-make-post__media audio-post b-dropzone__previews"},[e.audioLocked&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleAudioLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-audio-left",staticClass:"icon-arrow-left"})]):e._e(),e._l(e.uploadedFilesAudio,(function(t,i){return s("upload-preview",{key:i,attrs:{file:t,index:i,post:e.post,searchFace:e.isAnyMoreThanOneFace},on:{deleteFile:e.onDeleteFile,deleteTip:e.onDeleteTip}})})),!e.audioLocked&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleAudioLocked}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-audio-right",staticClass:"icon-arrow-right"})]):e._e()],2):e._e(),s("div",{staticClass:"b-make-post__wrapper"},[s("div",{staticClass:"b-make-post__textarea-price-wrapper"},[e.lockDescription&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-left",attrs:{type:"button"},on:{click:e.toggleLockDescription}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-text-left",staticClass:"icon-arrow-left"})]):e._e(),s("div",{staticClass:"b-make-post__textarea-wrapper"},[s(e.tributeComponent,e._b({tag:"component"},"component",e.tributeComponentOptions,!1),[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"},{name:"autosize",rawName:"v-autosize"}],ref:"textarea",staticClass:"form-control b-make-post__text-input",class:{"size-collapse":e.hasAssets},attrs:{id:"new_post_text_input",placeholder:e.makePostPlaceholder,name:"text",rows:"1",maxlength:"10000",disabled:e.postTextDisabled},domProps:{value:e.text},on:{click:e.textareaClick,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:void t.preventDefault()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey?null:e.makeSubmitMessageEnter(t)},input:function(t){t.target.composing||(e.text=t.target.value)}}})])],1),!e.lockDescription&&e.privatePost?s("button",{staticClass:"b-make-post__move-btn m-text m-right",attrs:{type:"button"},on:{click:e.toggleLockDescription}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"icon-text-right",staticClass:"icon-arrow-right"})]):e._e()]),e.fakeMode&&e.authUser.isTwitterConnected&&e.authUser.twitterUsername&&!e.editPost?s("span",{staticClass:"b-make-post__tweet"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.fakeTweetSend,expression:"fakeTweetSend"}],attrs:{id:"new_post_tweet_send_fake",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.fakeTweetSend)?e._i(e.fakeTweetSend,null)>-1:e._q(e.fakeTweetSend,1)},on:{change:function(t){var s=e.fakeTweetSend,i=t.target,r=i.checked?1:0;if(Array.isArray(s)){var a=null,n=e._i(s,a);i.checked?n<0&&(e.fakeTweetSend=s.concat([a])):n>-1&&(e.fakeTweetSend=s.slice(0,n).concat(s.slice(n+1)))}else e.fakeTweetSend=r}}}),s("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_on_twitter"),expression:"$t('message.post_on_twitter')"}],attrs:{for:"new_post_tweet_send_fake"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-twitter"})])]):e._e(),s("div",{staticClass:"b-make-post__actions",class:{"post__actions-chat":e.isChat&&e.price}},[e.onlyFriends?e._e():[s("input",{ref:"fileupload_photo",attrs:{id:"fileupload_photo",type:"file",multiple:"",accept:e.acceptFilesExt,disabled:e.fileUploadDisabled},on:{change:e.fileUploadChange,click:e.clearInput,selectFile:e.fileUploadChange}}),s("label",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_add_media"),expression:"$t('message.post_add_media')"}],staticClass:"attach_file g-btn m-flat",attrs:{id:"attach_file_photo",for:"fileupload_photo"}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-media",staticClass:"icon-media"})])],e.isChat?e._e():s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.add_media_from_vault"),expression:"$t('message.add_media_from_vault')"}],staticClass:"g-btn m-flat m-default-icon-size",attrs:{type:"button",disabled:e.fileUploadDisabled||!(!e.uploadedFiles.length||e.allUploaded)},on:{click:e.goToValue}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-vault"})]),e.withUser&&e.withUser.tipsEnabled&&e.isChat?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.send_a_tip_button_messages"),expression:"$t('message.send_a_tip_button_messages')"}],staticClass:"g-btn m-flat m-default-icon-size b-chat__send-tip-btn",attrs:{type:"button",disabled:e.limitUploads||e.disabledTipsBtn},on:{click:e.toggleTipPanel}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds"})]):e._e(),(e.isChat||e.isTemplate)&&e.authUser.isPerformer&&!e.onlyFriends?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_record_video"),expression:"$t('message.tooltip_record_video')"}],ref:"videoMessageBtn",staticClass:"g-btn m-flat m-default-icon-size b-chat__video-record-btn js-chat__video-record-btn",attrs:{type:"button",disabled:e.tipValue>0,"data-state":""},on:{click:e.isHideHeader}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-video",staticClass:"icon-video"})]):e._e(),e.authUser.isPerformer&&!e.onlyFriends?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_record_voice"),expression:"$t('message.post_record_voice')"}],ref:"audioRecordBtn",staticClass:"g-btn m-flat",attrs:{id:"js-audioRecordBtn",type:"button",disabled:!!e.uploadedFilesAudio.length||!!e.uploadedFilesVideo.length||e.tipValue>0},on:{click:e.toggleRecordPanel}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-voice",staticClass:"icon-voice"})]):e._e(),e.showMoreBtn?[s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.tooltip_more"),expression:"$t('message.tooltip_more')"}],staticClass:"g-btn m-flat b-make-post__more-btn",attrs:{type:"button"},on:{click:e.showMoreBtnClick}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-more",staticClass:"icon-more"})]),e.authUser.canStreaming?["true"===e.$env.VUE_APP_SECTION_STREAMING?s("router-link",{staticClass:"b-make-post__streaming-link",attrs:{to:{name:"Streaming"}}},[s("span",{staticClass:"g-btn__label"},[e._v(e._s(e.$t("message.make_post_streaming_button_title")))]),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-live",staticClass:"icon-live"})]):s("a",{staticClass:"b-make-post__streaming-link",attrs:{href:"/my/streaming"}},[s("span",{staticClass:"g-btn__label"},[e._v(e._s(e.$t("message.make_post_streaming_button_title")))]),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-live",staticClass:"icon-live"})])]:e._e()]:[e.isChat||e.isTemplate?e._e():s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_add_poll"),expression:"$t('message.post_add_poll')"}],staticClass:"g-btn m-flat b-make-post__voting-btn",attrs:{type:"button",disabled:e.voteDisabled},on:{click:function(t){return e.showPollHandler(!0)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-poll",staticClass:"icon-poll"})]),!e.authUser.canMakeExpirePosts||e.isChat||e.isTemplate?e._e():s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_expiration_period"),expression:"$t('message.post_expiration_period')"}],staticClass:"g-btn m-flat b-make-post__expire-period-btn",attrs:{type:"button",disabled:e.postExpirationDisabled},on:{click:e.openPostExpiration}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-expire",staticClass:"icon-clock"})]),e.authUser.isPerformer&&e.isShowScheduleDate?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.isChat?e.$t("message.chat_scheduled"):e.$t("message.post_shedule"),expression:"isChat ? $t('message.chat_scheduled') : $t('message.post_shedule')"}],staticClass:"g-btn m-flat b-make-post__datepicker-btn",attrs:{type:"button",disabled:e.scheduleDateDisabled||e.tipValue>0},on:{click:e.openScheduleDate}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-schedule",staticClass:"icon-schedule"})]):e._e(),!e.authUser.canCreateFundRaising||e.isChat||e.isTemplate?e._e():s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.post_set_fundraising_target_title"),expression:"$t('message.post_set_fundraising_target_title')"}],staticClass:"g-btn m-flat",attrs:{disabled:e.fundraisingDisabled},on:{click:function(t){return t.preventDefault(),e.toggleFundingPanel(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-fundraising",staticClass:"icon-fundraising"})]),e.isShowPriceBtn&&!e.onlyFriends?s("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.priceBtnTooltip,expression:"priceBtnTooltip"}],staticClass:"g-btn m-flat",attrs:{disabled:e.defaultPollExpired>0||e.privatePost||e.fundraisingTarget>0||e.tipValue>0},on:{click:function(t){return t.preventDefault(),e.togglePricePanel(t)}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],key:"make-post-icon-price",staticClass:"icon-price"})]):e._e()]],2),s("datetime",{ref:"scheduleDatepicker",staticClass:"b-make-post__datepicker-input custom-datepicker",attrs:{format:{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"},"use12-hour":"","min-datetime":e.minDatetime,type:"datetime",title:e.isChat?this.$i18n.t("message.chat_scheduled"):this.$i18n.t("message.datepicker_popup_title"),"show-tabs":""},on:{close:e.closeScheduleDate},scopedSlots:e._u([{key:"button-confirm",fn:function(t){return["date"===t.step?s("button",{staticClass:"g-btn m-rounded m-no-uppercase",attrs:{type:"button"}},[e._v(" "+e._s(e.$t("message.next_button"))+" ")]):s("button",{staticClass:"g-btn m-rounded m-no-uppercase",attrs:{type:"button"}},[e._v(" "+e._s(e.$t("message.save"))+" ")])]}}]),model:{value:e.scheduleDate,callback:function(t){e.scheduleDate=t},expression:"scheduleDate"}},[s("template",{slot:"button-cancel"},[e.isChat?e._e():s("button",{staticClass:"g-btn m-rounded m-no-uppercase custom-datepicker-button-save-later",attrs:{type:"button"},on:{click:e.setSaveForLater}},[e._v(" "+e._s(e.$t("message.save_for_later_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded m-no-uppercase m-border custom-datepicker-button-cancel",attrs:{type:"button"}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")])])],2)],1),s("div",{staticClass:"make_post_error",domProps:{innerHTML:e._s(e.makePostError)},on:{click:e.innerLinkToRouter}}),s("div",{staticClass:"b-dropzone__label"},[e._v(" "+e._s(e.$t("message.fileupload_drop_label"))+" ")])],1)]),e.showMediaHint?s("div",{staticClass:"b-reminder-form",class:{"b-reminder-chat":e.isChat}},[s("div",{staticClass:"b-reminder-form__text"},[e._v(" "+e._s(e.$t("message.do_not_forget_attachments"))+" ")]),s("div",{staticClass:"b-reminder-form__icons"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-media",on:{click:e.addNewMediaClick}}),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-video",on:{click:e.addNewMediaClick}}),s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-voice",on:{click:e.toggleRecordPanel}})])]):e._e(),s("AudioInput",{class:{"m-hidden":!e.isShowRecordPanel||e.isShowPostPricePanel||e.isShowFundingPanel},attrs:{"toggle-record-panel":e.toggleRecordPanel}}),s("PostPrice",{class:{"m-hidden":!e.isShowPostPricePanel||e.isShowRecordPanel||e.isShowFundingPanel},attrs:{"toggle-price-panel":e.togglePricePanel,"default-price":e.price,"set-price":e.setPrice,"is-shown":e.isShowPostPricePanel,title:e.isChat?e.$i18n.t("message.chat_set_message_price_title"):""}}),e.authUser.canCreateFundRaising?s("post-funding",{class:{"m-hidden":!e.isShowFundingPanel||e.isShowRecordPanel||e.isShowPostPricePanel},attrs:{"toggle-funding-panel":e.toggleFundingPanel,"default-target":e.fundraisingTarget,"set-target":e.setTarget,"is-shown":e.isShowFundingPanel}}):e._e(),s("modal-post-period",{attrs:{title:this.$i18n.t("message.make_post_expire_popup_title"),name:"ModalPostExpiration"},on:{period:e.updateExpPeriod}}),s("modal-post-period",{attrs:{title:"POLL DURATION","default-period":e.defaultVotingDuration,name:"ModalPollDuration"},on:{period:e.updatePollDuration}}),e.isChat?s("tip-panel",{ref:"tipPanel",attrs:{"with-user":e.withUser},on:{doSetTip:e.doSetTip,clearTipValue:e.clearTipValue}}):e._e(),s("modal-confirm",{attrs:{"modal-show":e.isShowModalConfirmSendMessage,text:this.$i18n.t("message.confirm_send_messages",{COUNT:e.getSelectedUsersIds}),"agree-btn":"Yes","close-on-agree":"","close-on-cancel":""},on:{"update:modalShow":function(t){e.isShowModalConfirmSendMessage=t},"update:modal-show":function(t){e.isShowModalConfirmSendMessage=t},"on-agree":e.submitMessage}}),e.showVideoMessage&&e.isChat?s("videomessage"):e._e()],1)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("55dd"),s("6762"),s("2fdb"),s("75fc")),n=(s("7514"),s("6b54"),s("a481"),s("3b2b"),s("96cf"),s("3b8d")),o=(s("20d6"),s("7f7f"),s("bd86")),c=(s("c5f6"),s("0f32")),l=s.n(c),u=s("b047c"),d=s.n(u),p=s("9b02"),h=s.n(p),m=s("c1df"),f=s.n(m),g=s("63ea"),v=s.n(g),b=s("13ea"),_=s.n(b),w=s("859b"),y=(s("d355"),s("310e")),k=s.n(y),C=s("24cb"),O=s("1560"),S=s("9d30"),P=s("d634"),x=s("5892"),j=s("2612"),$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{ref:e.name,attrs:{id:e.name,centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("template",{slot:"modal-header"},[s("h4",{staticClass:"modal-title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-expire"}),e._v(" "+e._s(e.title)+" ")]),s("span",{staticClass:"b-make-post__modal__value",domProps:{innerHTML:e._s(e.daysValue)}})]),s("div",{staticClass:"b-make-post__expire-wrapper"},e._l(e.periodDays,(function(t,i){return s("div",{key:i,staticClass:"b-make-post__expire__item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.periodValue,expression:"periodValue"}],staticClass:"b-make-post__expire__input",attrs:{id:e.name+i,type:"radio"},domProps:{value:t,checked:e._q(e.periodValue,t)},on:{change:function(s){e.periodValue=t}}}),s("label",{staticClass:"b-make-post__expire__label",attrs:{for:e.name+i},domProps:{innerHTML:e._s(e.periodLabel(t))}})])})),0),s("template",{slot:"modal-footer"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:function(t){e.show=!1}}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button"},on:{click:e.saveChanges}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])],2)},T=[],D={name:"ModalPostPeriod",props:{title:{type:String,default:""},defaultPeriod:{type:Number,default:1},name:{type:String,required:!0}},data:function(){return{show:!1,periodDays:[1,3,7,30,0],periodValue:1}},computed:{daysValue:function(){return this.periodLabel(this.periodValue)}},mounted:function(){this.defaultPeriod&&(this.periodValue=this.defaultPeriod)},methods:{periodLabel:function(e){return e>0?this.$i18n.tc("message.count_day_plural_new",e,{COUNT:'<span class="g-first-letter">'.concat(e,"</span>")}):this.$i18n.t("message.no_limit_days_with_first_letter")},saveChanges:function(){this.show=!1,this.$emit("period",this.periodValue)}}},I=D,E=s("2877"),M=Object(E["a"])(I,$,T,!1,null,null,null),A=M.exports,F=s("33a44"),U=s("0c50"),L=s("06f2"),N=s("792a"),R=s("25ac"),B=s("ebf6"),q=s("ad97"),H=s("925c"),W=s("8975"),V=s("16d9"),z=s("6344"),Y=s("f629"),G=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.authUser.canCreateFundRaising?s("div",{staticClass:"b-chat__panel m-funding"},[s("div",{staticClass:"container"},[s("span",{staticClass:"b-chat__panel__title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-fundraising",attrs:{"extra-class":"b-chat__panel__icon"}}),e._v(" "+e._s(e.$t("message.post_fundraising_target_title"))+" ")]),s("div",{staticClass:"b-chat__panel__input-wrapper",class:{"m-filled":e.target>0}},[s("div",{staticClass:"b-settings__form credits-form-field"},[s("InputOF",{ref:"targetInput",staticClass:"form-control b-chat__panel__input",attrs:{id:"targetInput",type:"price",min:e.authUser.minFundRaisingTarget,max:e.authUser.maxFundRaisingTarget,step:"1",placeholder:this.$i18n.t("message.post_fundraising_target_field_placeholder")},on:{focus:e.focus,blur:e.blur},model:{value:e.target,callback:function(t){e.target=t},expression:"target"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"currency-sign"},[e._v("$")])])],2)],1),s("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"targetInput":""},on:{click:e.clearTarget}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),e.messagePriceError?s("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.messagePriceError)+" ")]):e._e(),s("div",{staticClass:"b-chat__panel-btns"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.toggleFundingPanel}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:!!e.messagePriceError},on:{click:e.setPostTarget}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])]):e._e()},Q=[],J=s("13ca");function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function X(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Z={components:{InputOF:J["a"]},props:{defaultTarget:{type:Number,default:0},toggleFundingPanel:{type:Function,required:!0},setTarget:{type:Function,required:!0},isShown:{type:Boolean,required:!0}},data:function(){return{target:"",focused:!1,focusTimeout:null}},computed:X(X({},Object(P["b"])(["authUser"])),{},{messagePriceError:function(){if(this.target){if(this.target<this.authUser.minFundRaisingTarget)return this.$i18n.t("message.min_price_label",{MIN:this.authUser.minFundRaisingTarget});if(this.target>this.authUser.maxFundRaisingTarget)return this.$i18n.t("message.max_price_label",{MAX:this.authUser.maxFundRaisingTarget})}return""}}),watch:{defaultTarget:function(){this.target=this.defaultTarget},isShown:function(e,t){!t&&e&&this.$refs.targetInput.$el.getElementsByTagName("input")[0].focus()}},mounted:function(){this.defaultTarget&&(this.target=this.defaultTarget)},methods:{clearTarget:function(){this.target=""},setPostTarget:function(){this.setTarget(this.target),this.toggleFundingPanel()},focus:function(){clearTimeout(this.focusTimeout),this.focused=!0},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)}}},ee=Z,te=Object(E["a"])(ee,G,Q,!1,null,null,null),se=te.exports,ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._t("default")],2)},re=[],ae={name:"EmptyComponent"},ne=ae,oe=Object(E["a"])(ne,ie,re,!1,null,null,null),ce=oe.exports,le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"b-chat__panel",class:{"m-hidden":!e.isShowTipPanel}},[s("div",{staticClass:"container"},[s("span",{staticClass:"b-chat__panel__title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-funds",attrs:{"extra-class":"b-chat__panel__icon"}}),e._v(" "+e._s(e.$t("message.chat_set_message_tip_title"))+" ")]),s("div",{staticClass:"b-chat__panel__input-wrapper"},[s("div",{staticClass:"b-chat__panel__input-wrapper",class:{"m-filled":e.tipValue>0}},[s("div",{staticClass:"b-settings__form credits-form-field"},[s("InputOF",{ref:"tipInput",staticClass:"form-control b-chat__panel__input",attrs:{id:"tipInputChat",type:"price",min:e.tipsMin,max:e.tipsMax,step:"0.01",placeholder:"0.00"},on:{focus:e.focus,blur:e.blur},model:{value:e.tipValue,callback:function(t){e.tipValue=t},expression:"tipValue"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"currency-sign"},[e._v("$")])])],2)],1),s("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"tipInputChat":""},on:{click:e.clearTip}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])])]),s("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.messageTipsError)+" ")]),s("div",{staticClass:"b-chat__panel-btns"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.closeTipPanel}},[s("span",[e._v(e._s(e.$t("message.cancel_button")))])]),e.canPayToUser?s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.tipSubmitDisabled},on:{click:e.addTips}},[s("span",[e._v(e._s(e.$t("message.save_button")))])]):s("router-link",{staticClass:"g-btn m-rounded m-border",attrs:{to:{name:"PaymentsAddCard"}}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-add-card"}),s("span",[e._v(e._s(e.$t("message.tip_add_card_btn_label")))])])],1)])])},ue=[],de=s("30ba");function pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function he(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var me={name:"TipPanel",components:{InputOF:J["a"]},mixins:[de["a"],V["a"]],props:{withUser:{type:Object,default:void 0}},data:function(){return{isShowTipPanel:!1,tipValue:"",tipValueMin:5,tipValueMax:500,focusTimeout:null,focused:!1}},computed:he(he({},Object(P["b"])(["authUser"])),{},{messageTipsError:function(){if(this.tipValue){if(this.tipValue<this.tipsMin)return"Minimum $".concat(this.tipsMin," USD");if(this.tipValue>this.tipsMax)return"Maximum $".concat(this.tipsMax," USD")}return""},tipsMin:function(){return this.authUser.creditBalance>=1&&this.withUser&&this.withUser.canPayInternal?1:this.withUser?this.withUser.tipsMin:this.tipValueMin},tipsMax:function(){return this.withUser?this.withUser.tipsMax:this.tipValueMax},user:function(){return this.withUser},tipSubmitDisabled:function(){return this.tipValue<this.tipsMin||this.tipValue>this.tipsMax}}),methods:{focus:function(){clearTimeout(this.focusTimeout),this.focused=!0,this.messagePrice||(this.newMessagePrice="")},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)},closeTipPanel:function(){this.clearTip(),this.toggleTipPanel()},toggleTipPanel:function(){var e=this;this.isShowTipPanel||this.$nextTick((function(){e.scrollToBottom()})),this.isShowTipPanel=!this.isShowTipPanel,this.isShowTipPanel&&this.$refs.tipInput&&this.$refs.tipInput.$el.children[0].children[1].focus()},addTips:function(){this.$emit("doSetTip",this.tipValue)},clearTip:function(){this.$emit("clearTipValue"),this.tipValue=""}}},fe=me,ge=Object(E["a"])(fe,le,ue,!1,null,null,null),ve=ge.exports,be=s("ce23"),_e=s("1793"),we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.isShowInfoForTipsMessages?s("div",{staticClass:"b-info-tips-form"},[s("div",{staticClass:"b-info-tips-form__text"},[e._v(" "+e._s(e.$t("message.please_add_a_tip_to_this"))+" ")]),s("span",{staticClass:"g-icon-info"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip.enabled",value:{content:e.$t("message.send_messages_for_tips_popup"),classes:"m-tooltip-higher"},expression:"{ content: $t('message.send_messages_for_tips_popup'), classes: 'm-tooltip-higher' }",modifiers:{enabled:!0}}],staticClass:"icon-info"})])]):e._e(),e.isMessagesWithIsTopInfo&&!e.authUser.isPerformer&&e.withUser&&e.withUser.tipsEnabled?s("div",{staticClass:"b-info-tips-form"},[s("div",{staticClass:"b-info-tips-form__text"},[e._v(" "+e._s(e.$t("message.send_a_tip_button_messages"))+" ")]),s("button",{staticClass:"g-page__header__btn m-with-round-hover",attrs:{type:"button"},on:{click:e.clearMessagesWithIsTopInfo}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"},{name:"tooltip",rawName:"v-tooltip",value:e.$t("message.close_button"),expression:"$t('message.close_button')"}],staticClass:"icon-close"})])]):e._e(),!e.text&&e.tipValue?s("div",{staticClass:"b-info-tips-form"},[s("div",{staticClass:"b-info-tips-form__text"},[e._v(" "+e._s(e.$t("message.chat_please_dd_text_for_tips"))+" ")])]):e._e()])},ye=[],ke=s("709f");function Ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Oe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ce(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Se={name:"ChatInfo",props:{tipValue:{type:[String,Number],default:""},tipsMin:{type:[String,Number],default:""},withUser:{type:Object,default:function(){}},text:{type:String,default:""},chat:{type:Object,default:function(){}}},data:function(){return{isMessagesWithIsTopInfo:!1}},computed:Oe(Oe({},Object(P["b"])(["authUser"])),{},{isShowInfoForTipsMessages:function(){return"SettingsMessaging"!==this.$route.name&&"only_friends"===this.chat.canNotSendReason&&this.tipValue<this.tipsMin}}),mounted:function(){null!==ke["a"].getItem("isShowInfoTips")&&ke["a"].getItem("isShowInfoTips")<Date.now()&&(this.isMessagesWithIsTopInfo=!0),null===ke["a"].getItem("isShowInfoTips")&&(this.isMessagesWithIsTopInfo=!0)},methods:{clearMessagesWithIsTopInfo:function(){this.isMessagesWithIsTopInfo=!1;var e=Date.now(),t=e+2592e6;ke["a"].setItem("isShowInfoTips",t)}}},Pe=Se,xe=Object(E["a"])(Pe,we,ye,!1,null,null,null),je=xe.exports,$e=s("8b3f"),Te=s("a836"),De=s("09e4");function Ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function Ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(s),!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ie(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var Me={name:"MakeFeedPost",components:{ModalPostPeriod:A,Datetime:w["Datetime"],UtilsTime:F["a"],UploadPreview:U["a"],AudioInput:z["a"],PostPrice:Y["a"],PostFunding:se,draggable:k.a,VueTribute:C["a"],EmptyComponent:ce,InputOF:J["a"],TipPanel:ve,Videomessage:_e["a"],ChatInfo:je,ModalConfirm:$e["a"]},mixins:[L["a"],N["a"],R["a"],B["a"],V["a"],q["a"],H["a"],O["a"],S["a"],be["a"]],props:{place:{type:String,default:"feed"},editPost:{type:Boolean,default:!1},hideStreamBtn:{type:Boolean,default:!1},fakeMode:{type:Boolean,default:!1},post:{type:Object,default:function(){}},showMoreBtn:{type:Boolean,default:!0},isChat:{type:Boolean,default:!1},withUser:{type:Object,default:void 0},chat:{type:Object,default:function(){}},userIds:{type:[Array,String],default:function(){return[]}},listIds:{type:Array,default:function(){return[]}},excludedUserIds:{type:Array,default:function(){return[]}},userIdToSend:{type:Number,default:0},fundRaisingPostId:{type:Number,default:0},awards:{type:Array,default:function(){return[]}},sendToQueue:{type:Number,default:0},usersCount:{type:Number,default:0},postDonators:{type:Number,default:0},postBuyers:{type:Number,default:0},postVoters:{type:Number,default:0},idScheduledMsg:{type:Number,default:0},isTemplate:{type:Boolean,default:!1},template:{type:Object,default:function(){}}},data:function(){return{postUsage:!0,text:"",showPoll:!1,votingOptions:["",""],defaultVotingDuration:7,defaultPollExpired:0,showFundraising:!1,fundraisingLocked:!1,fundraisingTarget:0,fundraisingOptions:[5,""],isShowFundingPanel:!1,tweetSend:0,fakeTweetSend:0,scheduleDate:null,makePostError:"",isShowRecordPanel:!1,isShowPostPricePanel:!1,price:0,unlockedMedia:[],lockDescription:!1,saveForLater:!1,uploadedFilesWithoutAudioList:[],freeFilesWithoutAudioList:[],isDraggingPreviews:!1,squarePreviews:!1,previewsOrder:[],isMobileDevice:!1,paidMediaWithoutAudio:[],freeMediaWithoutAudio:[],paidMediaActive:!1,freeMediaActive:!1,mediaCentered:!1,paidMediaText:!1,freeMediaText:!1,paidMediaAudio:!1,freeMediaAudio:!1,galleryMedia:[],pollLocked:!1,options:{},audioLocked:!1,hasBeforeunloadPostEvent:!1,beforeEachPostFunc:null,mentionUsersQuery:"",mentionUsers:[],tipValue:"",showVideoMessage:!1,isShowModalConfirmSendMessage:!1,isEditScheduleMessages:!1}},computed:Ee(Ee(Ee(Ee(Ee({},Object(P["b"])(["authUser"])),Object(P["O"])(["getDraft"])),Object(P["q"])(["goBackState"])),Object(P["j"])(["getSelectedUsersIds"])),{},{isOpen:{get:function(){return this.photoSwipeIsOpen},set:function(e){e?this.$root.$on("closePhotoSwipe",this.hidePhotoSwipe):this.$root.$off("closePhotoSwipe",this.hidePhotoSwipe),this.photoSwipeSetItems(e?this.galleryMedia:[]),this.photoSwipeSetOptions(e?this.options:{}),this.photoSwipeSetOpen(e)}},hasDraft:function(){return!!this.getDraft},showMediaHint:function(){return!(!this.privatePost||this.fakeMode)&&((!this.uploadedFilesAudio.length||!this.audioLocked)&&!this.getPrimaryFilesWithoutAudio.length)},hasAssets:function(){return this.uploadedFiles.length||this.scheduleDate||this.showPoll||this.showFundraising||this.defaultPollExpired>0},isAnyMoreThanOneFace:function(){return!this.uploadedFiles.filter((function(e){return e.faceCount>=2})).length},privatePost:function(){return!!this.price},disabledSubmit:function(){var e=!0;return e=!(!this.showFundraising||this.fundraisingOptions.filter((function(e){return Number(e)>0})).length&&!this.isFundrisingOptionsErrors&&this.text.trim().length)||(this.privatePost?!(!this.uploadedFiles.length||this.allUploaded)||(!this.text.trim().length||!this.lockDescription)&&(!(this.showPoll&&this.votingOptions.filter((function(e){return e.length})).length>1&&this.pollLocked&&this.text.trim().length)&&((!this.uploadedFilesAudio.length||!this.audioLocked)&&!this.getPrimaryFilesWithoutAudio.length)):this.uploadedFiles.length?!this.allUploaded:!this.text.trim().length),"ChatsSend"!==this.$route.name||this.userIds.length||this.getListsUsersCount||this.specificBulkMessage&&this.usersCount||(e=!0),"ChatsSend"===this.$route.name&&this.listIds.length&&this.uploadedFiles.length&&!this.text.trim().length&&(e=!1),"Chat"===this.$route.name&&this.chat&&"only_friends"===this.chat.canNotSendReason&&this.tipValue<this.withUser.tipsMin&&(e=!0),this.authUser.canChat||(e=!0),this.tipValue&&this.text&&(e=!1),this.$emit("canSave",e),e},isFundrisingOptionsErrors:function(){var e=this;return this.fundraisingOptions.some((function(t,s){return e.getFundrisingOptionError(s).length}))},votingDuration:function(){return this.defaultVotingDuration>0?this.$i18n.tc("message.count_day_plural_new",this.defaultVotingDuration,{COUNT:this.defaultVotingDuration}):this.$i18n.t("message.no_limit_days_with_first_letter")},pollExpired:function(){return"".concat(this.defaultPollExpired," days")},minDatetime:function(){var e=new Date(Date.now());return e.toISOString()},makePostPlaceholder:function(){return this.isChat||this.isTemplate?this.$i18n.t("message.chat_text_input_placeholder"):this.uploadedFiles.length?this.$i18n.t("message.make_post_alt_text_input_placeholder"):this.$i18n.t("message.make_post_text_input_placeholder_new")},itHasPost:function(){return!!this.post&&!!this.post.id},postTextDisabled:function(){return!!this.itHasPost&&!this.post.canEditText},canEditMedia:function(){return!this.post||!this.post.hasOwnProperty("canEditMedia")||this.post.canEditMedia},fileUploadDisabled:function(){return!!this.tipValue||!!this.itHasPost&&!this.post.canEditMedia},postExpirationDisabled:function(){return this.defaultPollExpired?!!this.defaultPollExpired:this.itHasPost?!this.post.canEditExpire:!!this.price},scheduleDateDisabled:function(){return this.scheduleDate?!!this.scheduleDate:this.saveForLater?!!this.saveForLater:!!this.itHasPost&&!this.post.canEditSchedule},voteDisabled:function(){return this.showPoll?this.showPoll:!!this.itHasPost&&!this.post.canEditVote},fundraisingDisabled:function(){return!!this.privatePost||!!this.fundraisingTarget},uploadedFilesWithoutAudio:function(){return this.uploadedFilesWithoutAudioList=this.uploadedFiles.filter((function(e){return"audio"!==e.mediaType})),this.uploadedFiles.filter((function(e){return"audio"!==e.mediaType}))},uploadedFilesAudio:function(){return this.uploadedFiles.filter((function(e){return"audio"===e.mediaType}))},uploadedFilesVideo:function(){return this.uploadedFiles.filter((function(e){return"video"===e.mediaType||"gif"===e.mediaType}))},uploadedFilesPhoto:function(){return this.uploadedFiles.filter((function(e){return"photo"===e.mediaType}))},getFreeFilesWithoutAudio:function(){var e=this,t=[];return this.privatePost&&(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.uploadedFilesWithoutAudio.findIndex((function(e){return e.orderId===t||e.id===t}))>-1})),t=this.uploadedFilesWithoutAudio.filter((function(t){return e.freeMediaWithoutAudio.indexOf(t.orderId)>-1||e.freeMediaWithoutAudio.indexOf(t.id)>-1}))),this.freeFilesWithoutAudioList=t,t},getPrimaryFilesWithoutAudio:function(){var e=this,t=this.uploadedFilesWithoutAudio;return this.privatePost&&(t=this.uploadedFilesWithoutAudio.filter((function(t){return e.freeMediaWithoutAudio.indexOf(t.orderId)<0&&e.freeMediaWithoutAudio.indexOf(t.id)<0})),this.paidMediaWithoutAudio=t.map((function(e){return e.orderId}))),this.uploadedFilesWithoutAudioList=t,t},checkLeave:function(){return!this.fakeMode&&!this.editPost&&(!(!this.text||!this.text.trim().length)||!!this.uploadedFiles.length||!!this.uploadedFilesAudio.length||this.showPoll||this.showFundraising||!!this.scheduleDate||!!this.defaultPollExpired||!!this.price)},checkLeaveTextPost:function(){return this.$i18n.t("message.post_leave_msg")},tributeOptions:function(){var e=this;return{trigger:"@",values:d()(this.fetchUsersMention,500),lookup:function(e){return e._tributeLookup},fillAttr:"username",containerClass:"mention-container",selectTemplate:function(e){return"@".concat(e.original.username)},menuItemTemplate:function(t){var s=t.original,i=e.thumbSrcLink(s.avatar,s.avatarThumbs,"c50"),r="";return r+='<div class="connected-accounts-info">',r+='<span class="connected-accounts-profile-avatar g-avatar m-w50">',r+='<img src="'.concat(i,'" alt="').concat(s.name,'">'),r+="</span>",r+='<span class="connected-accounts-profile-link">',s.displayName?r+='<div class="g-user-name one-line-text">'.concat(s.displayName," (").concat(s.name,")</div>"):r+='<div class="g-user-name one-line-text">'.concat(s.name,"</div>"),r+='<div class="g-user-username one-line-text">@'.concat(s.username,"</div>"),r+="</span>",r+="</div>",r}}},showTribute:function(){return this.authUser.isPerformer},tributeComponent:function(){return this.showTribute?C["a"]:ce},tributeComponentOptions:function(){return this.showTribute?{options:this.tributeOptions}:{}},fundraisingPresetMax:function(){return Math.min(this.fundraisingTarget,this.authUser.tipsMax)},disabledTipsBtn:function(){return!!this.uploadedFiles.length||!!this.price},getListsUsersCount:function(){return this.listIds.length?this.usersCount:0},isShowScheduleDate:function(){return("Chat"!==this.$route.name||"sm"===this.$mq)&&"SettingsMessaging"!==this.$route.name},specificBulkMessage:function(){return this.fundRaisingPostId||this.awards.length||this.sendToQueue||this.postDonators||this.postBuyers||this.postVoters},isShowPriceBtn:function(){return!(!this.isChat&&"SettingsMessaging"!==this.$route.name||!this.authUser.isPerformer)||!(!this.authUser.canEarn||0!==this.authUser.subscribePrice)},priceBtnTooltip:function(){return this.isChat||"SettingsMessaging"===this.$route.name?this.$i18n.t("message.tooltip_message_price"):this.$i18n.t("message.post_set_price_title")},onlyFriends:function(){return"Chat"===this.$route.name&&this.chat&&"only_friends"===this.chat.canNotSendReason}}),watch:{post:{handler:function(e,t){v()(e,t)||(e&&e.id?this.setPostData(e):this.resetToDefault())}},uploadedFiles:{handler:function(){var e=this;this.squarePreviews=this.uploadedFilesPhoto.length>1&&this.checkPreviewRatio(),this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},deep:!0,immediate:!0},privatePost:{handler:function(){var e=this;this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))}}},created:function(){var e=document.createElement("div");e.style.overflow="scroll",document.body.appendChild(e),e.innerText="m",this.isMobileDevice=e.offsetWidth===e.clientWidth&&e.offsetHeight===e.clientHeight,document.body.removeChild(e)},mounted:function(){var e=this;this.beforeunloadCheckLeave({watchField:"checkLeave",conditionField:"checkLeave",eventField:"hasBeforeunloadPostEvent",funcField:"handleBeforeUnloadPost"});var t=ke["a"].getItem("filesFromMediaFeed");this.$route.params.setFocus&&this.$refs.textarea.focus(),this.$route.params.fileUploadData&&this.handleInputFile(this.$route.params.fileUploadData),this.$route.params.tweetSend&&(this.fakeTweetSend=this.$route.params.tweetSend),!this.fakeMode&&this.$route.params.vaultFiles&&this.$route.params.post&&this.setMediaData(this.$route.params.vaultFiles),!this.fakeMode&&this.$route.params.vaultFiles&&this.$route.params.inprogressPost&&(this.loadDraft(),this.setMediaData(this.$route.params.vaultFiles,!0)),!this.fakeMode&&t&&(this.setMediaData(JSON.parse(t)),ke["a"].removeItem("filesFromMediaFeed")),this.isTemplate&&!_()(this.template)&&(this.setDataFromStore(),this.setMediaData(this.template.media),this.setFreeLockMedia(this.template.previews)),this.isChat&&this.$route.params.vaultFiles&&this.setMediaData(this.$route.params.vaultFiles),this.isChat&&this.$route.params.scheduleItem&&(this.setMediaData(this.$route.params.scheduleItem.media),this.setDataSchedule(this.$route.params.scheduleItem),this.isEditScheduleMessages=!0),this.fakeMode||this.$route.params.vaultFiles||this.isChat||this.isTemplate||this.loadDraft(),void 0!==this.$parent.tweetSend&&(this.$parent.tweetSend=this.fakeTweetSend),this.$root.$once("removeAllBeforeUnloadListeners",this.removeListeners),this.$refs.videoMessageBtn&&this.$nextTick((function(){e.showVideoMessage=!0}))},beforeDestroy:function(){this.$root.$off("closePhotoSwipe",this.hidePhotoSwipe),document.body.classList.remove("open-panel"),this.beforeEachPostFunc&&this.beforeEachPostFunc(),this.hasBeforeunloadPostEvent&&(window.removeEventListener("beforeunload",this.handleBeforeUnloadPost),this.hasBeforeunloadPostEvent=!1),this.fakeMode||this.editPost||this.isTemplate||this.saveDraft(),this.$root.$off("removeAllBeforeUnloadListeners",this.removeListeners),this.isTemplate&&this.resetToDefault()},methods:Ee(Ee(Ee(Ee(Ee(Ee(Ee({},Object(P["B"])(["preloaderShow"])),Object(P["S"])(["setPost"])),Object(P["N"])(["setDraft","resetDraft"])),Object(P["i"])(["sendMessage","fetchChatsMessages"])),Object(P["k"])(["setQueueMessagesLoading"])),Object(P["db"])(["saveAutoMessage"])),{},{updateFileThumbId:function(e,t){this.uploadedFiles=this.uploadedFiles.map((function(s){return e.processId&&e.processId===s.processId||e.id&&e.id===s.id?Ee(Ee({},s),{},{thumbId:t}):s}))},fetchUsersMention:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,s){var i,r,a,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.mentionUsersQuery=t,this.mentionUsers=[],!(this.mentionUsersQuery&&this.mentionUsersQuery.length>=2&&this.mentionUsersQuery.length<=100)){e.next=15;break}if(i=new RegExp("^u\\d+$"),r=i.test(this.mentionUsersQuery),r){e.next=15;break}return e.prev=6,e.next=9,Object(j["P"])({query:this.mentionUsersQuery});case 9:a=e.sent,this.mentionUsers=a.map((function(e){return Ee(Ee({},e),{},{_tributeLookup:n.mentionUsersQuery})})),e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](6);case 15:s(this.mentionUsers);case 16:case"end":return e.stop()}}),e,this,[[6,13]])})));function t(t,s){return e.apply(this,arguments)}return t}(),toggleLockDescription:function(){var e=this;this.lockDescription=!this.lockDescription,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},addNewMediaClick:function(){this.$refs.fileupload_photo.click()},openNewPostPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.$router.push({name:"PostsCreate",params:Ee(Ee({},e),{},{tweetSend:this.fakeTweetSend,noReload:!0})})},fileUploadChange:function(e){this.fakeMode?this.openNewPostPage({fileUploadData:e}):this.handleInputFile(e)},textareaClick:function(){this.fakeMode&&this.openNewPostPage({setFocus:!0})},addVoteOption:function(){this.votingOptions.push("")},addFundraisingOption:function(){this.fundraisingOptions.push("")},removeVoteOption:function(e){this.votingOptions.splice(e,1)},removeFundraisingOption:function(e){this.fundraisingOptions.splice(e,1)},showPollHandler:function(e){var t=this;this.showPoll=e,e?this.pollLocked=this.privatePost:(this.votingOptions=["",""],this.defaultVotingDuration=7,this.pollLocked=!1),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},showFundraisingHandler:function(e){var t=this;this.showFundraising=e,this.fundraisingLocked=!1,e||(this.fundraisingOptions=["5",""],this.fundraisingTarget=0),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},openPostExpiration:function(){this.$root.$emit("bv::show::modal","ModalPostExpiration")},openPollDuration:function(){this.$root.$emit("bv::show::modal","ModalPollDuration")},openScheduleDate:function(){this.$refs.scheduleDatepicker.isOpen=!0,window.disableBodyScroll(!0)},closeScheduleDate:function(){window.enableBodyScroll(!0)},updateExpPeriod:function(e){this.defaultPollExpired=e},updatePollDuration:function(e){this.defaultVotingDuration=e},getDataObject:function(){var e={};if(this.text&&(e.text=this.text),this.uploadedFilesUrl.length>0&&(e.mediaFiles=this.uploadedFilesUrl),this.scheduleDate&&(e.isScheduled=1,e.scheduledDate=this.scheduleDate),this.saveForLater&&(e.isScheduled=1,e.isPublishedWithPeriod=1),this.authUser.isTwitterConnected&&this.authUser.twitterUsername&&(e.tweetSend=this.tweetSend),this.price&&(e.price=this.price),e.preview=[],this.freeFilesWithoutAudioList&&(e.preview=this.freeFilesWithoutAudioList.map((function(e){return e.processId||e.id}))),!this.audioLocked&&this.uploadedFilesAudio.length&&e.preview.push(this.uploadedFilesAudio[0].processId||this.uploadedFilesAudio[0].id),this.defaultPollExpired>0&&(e.expireDays=this.defaultPollExpired),this.showPoll&&this.votingOptions.length&&(e.votingOptions=this.votingOptions,this.defaultVotingDuration>0&&(e.votingDue=this.defaultVotingDuration),this.pollLocked||e.preview.push("poll")),this.showFundraising){var t=this.fundraisingOptions.filter((function(e){return Number(e)>0})).map((function(e){return Number(e)}));t.length&&(e.fundRaisingTipsPresets=t,e.fundRaisingTargetAmount=Number(this.fundraisingTarget))}return this.privatePost&&this.lockDescription&&(e.lockedText=this.lockDescription),e},makePostSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.makePostError="",s=this.getDataObject(),e.prev=2,this.preloaderShow(!0),!this.itHasPost){e.next=10;break}return e.next=7,Object(x["g"])(this.post.id,s);case 7:t=e.sent,e.next=13;break;case 10:return e.next=12,Object(x["d"])(s);case 12:t=e.sent;case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](2),this.preloaderShow(!1),e.t0.data&&e.t0.data.error&&e.t0.data.error.message&&(this.makePostError=e.t0.data.error.message),e.abrupt("return");case 20:if(void 0!==this.alreadyConfirmLeave&&(this.alreadyConfirmLeave=!0),this.preloaderShow(!1),!this.scheduleDate&&!this.saveForLater){e.next=26;break}return"Queue"===this.$route.name?this.$emit("reload-queue"):this.$router.replace({name:"Queue",params:{noReload:!0}}),this.resetToDefault(),e.abrupt("return");case 26:t&&t.id&&(this.setPost(t),this.resetDraft(),this.resetToDefault(),this.itHasPost&&this.goBackState.routeFrom&&"Post"===this.goBackState.routeFrom.name&&this.goBackState.routeFrom.params.postId===t.id?this.goBack({name:"Post",params:{userId:this.authUser.username,postId:t.id,noReload:!0}}):this.$router.replace({name:"Post",params:{userId:this.authUser.username,postId:t.id,noReload:!0}}));case 27:case"end":return e.stop()}}),e,this,[[2,15]])})));function t(){return e.apply(this,arguments)}return t}(),resetToDefault:function(){this.uploadedFiles=[],this.showPoll=!1,this.votingOptions=["",""],this.defaultVotingDuration=7,this.defaultPollExpired=0,this.scheduleDate=null,this.text="",this.postUsage=!0,this.tweetSend=0,this.fakeTweetSend=0,this.makePostError="",this.isShowRecordPanel=!1,this.isShowPostPricePanel=!1,this.price=0,this.unlockedMedia=[],this.lockDescription=!1,this.saveForLater=!1,this.audioLocked=!1,this.pollLocked=!1,this.uploadedFilesWithoutAudioList=[],this.freeFilesWithoutAudioList=[],this.isDraggingPreviews=!1,this.squarePreviews=!1,this.previewsOrder=[],this.paidMediaWithoutAudio=[],this.freeMediaWithoutAudio=[],this.paidMediaActive=!1,this.freeMediaActive=!1,this.mediaCentered=!1,this.paidMediaText=!1,this.freeMediaText=!1,this.paidMediaAudio=!1,this.freeMediaAudio=!1,this.galleryMedia=[],this.pollLocked=!1,this.isOpen=!1,this.options={},this.audioLocked=!1,this.showFundraising=!1,this.fundraisingLocked=!1,this.fundraisingTarget=0,this.fundraisingOptions=[5,""],this.isShowFundingPanel=!1,this.tipValue=""},clearInput:function(e){e.target.value=""},mediaSource:function(e){return e.source||e.full?e.source?e.source.source:e.full:e.video&&e.video.mp4?e.video.mp4:e.src},setPostData:function(e){var t=this;this.resetToDefault(),void 0!==e.rawText?e.rawText.trim().length&&(this.text=Object(W["b"])(e.rawText)):e.text.trim().length&&(this.text=Object(W["b"])(e.text)),this.uploadedFiles=e.media.map((function(e){var s;if("processing"===t.post.mediaType){var i=t.mediaSource(e),r=t.fileType(i);s=t.getMediaFile(r)}else s=e.type;var a="audio"===s?e.full:e.preview,n={mediaType:s,progress:100,deleteType:"DELETE",url:a,id:e.id,orderId:Math.random().toString(36).substr(2,9)};if("video"===s){n.videoPreview=!0;var o=h()(e,"files.preview.options",[]),c=h()(e,"files.preview.url",void 0);if(o.length){var l=o.find((function(e){return e.selected}))||o[0];n.thumbs=o,n.thumbId=l.id}else c&&(n.thumbs=[{id:1,selected:!0,url:c}],n.thumbId=1)}return e.source&&(e.source.width&&(n.width=e.source.width),e.source.height&&(n.height=e.source.height)),n})),this.post.canEditSchedule&&(this.post.isPublishedWithPeriod?this.setSaveForLater():this.scheduleDate=this.post.postedAt);var s=f()().startOf("day");if(this.post.expiredAt){var i=f()(this.post.postedAt).startOf("day"),r=f()(this.post.expiredAt).startOf("day");this.defaultPollExpired=r.diff(i,"days")}if(this.post.canEditVote&&this.post.voting&&this.post.voting.options){this.showPoll=!0,this.votingOptions=this.post.voting.options.map((function(e){return e.name}));var n=f()(this.post.voting.finishedAt).startOf("day");this.defaultVotingDuration=n.diff(s,"days")}this.post.fundRaising&&(this.showFundraising=!0,this.fundraisingOptions=Object(a["a"])(this.post.fundRaising.presets),this.fundraisingTarget=this.post.fundRaising.target),this.post.price>0&&(this.price=this.post.price),this.post.lockedText&&(this.lockDescription=this.post.lockedText),this.setFreeLockMedia(this.post.preview),this.privatePost&&this.$nextTick((function(){t.scrollPreviewsThrottled()}))},setMediaData:function(e,t){var s=e.map((function(e){var t=e.type,s="audio"===t?e.src:e.preview,i={mediaType:t,progress:100,deleteType:"DELETE",url:s,id:e.id,orderId:Math.random().toString(36).substr(2,9)};if("video"===t){i.videoPreview=!0;var r=h()(e,"files.preview.options",[]),a=h()(e,"files.preview.url",void 0);if(r.length){var n=r.find((function(e){return e.selected}))||r[0];i.thumbs=r,i.thumbId=n.id}else a?(i.thumbs=[{id:1,selected:!0,url:a}],i.thumbId=1):e.thumb&&(i.thumbs=[{id:1,selected:!0,url:e.thumb}])}return e.source&&(e.source.width&&(i.width=e.source.width),e.source.height&&(i.height=e.source.height)),i}));if(t){var i=[].concat(Object(a["a"])(this.uploadedFiles),Object(a["a"])(s)).reduce((function(e,t){return t.id?-1===e.ids.indexOf(t.id)?{ids:[].concat(Object(a["a"])(e.ids),[t.id]),files:[].concat(Object(a["a"])(e.files),[t])}:e:Ee(Ee({},e),{},{files:[].concat(Object(a["a"])(e.files),[t])})}),{ids:[],files:[]});this.uploadedFiles=i.files}else this.uploadedFiles=s},setFreeLockMedia:function(e){var t=this;this.unlockedMedia=null!==e&&void 0!==e?void 0!==e.length?e:[e]:[],this.freeMediaWithoutAudio=this.unlockedMedia.filter((function(e){return t.uploadedFilesWithoutAudio.findIndex((function(t){return t.id===e}))>-1})),this.paidMediaWithoutAudio=this.uploadedFilesWithoutAudio.filter((function(e){return t.unlockedMedia.indexOf(e.id)<0})).map((function(e){return e.id})),this.audioLocked=this.uploadedFilesAudio.length&&!this.unlockedMedia.includes(this.uploadedFilesAudio[0].id)},togglePricePanel:function(){this.isShowPostPricePanel=!this.isShowPostPricePanel,document.body.classList.toggle("open-panel",this.isShowPostPricePanel),this.isShowRecordPanel&&(this.isShowRecordPanel=!1),this.isShowFundingPanel&&(this.isShowFundingPanel=!1)},toggleFundingPanel:function(){this.isShowFundingPanel=!this.isShowFundingPanel,document.body.classList.toggle("open-panel",this.isShowFundingPanel),this.isShowRecordPanel&&(this.isShowRecordPanel=!1),this.isShowPostPricePanel&&(this.isShowPostPricePanel=!1)},toggleRecordPanel:function(){this.isShowRecordPanel=!this.isShowRecordPanel,document.body.classList.toggle("open-panel",this.isShowRecordPanel),this.isShowPostPricePanel&&(this.isShowPostPricePanel=!1),this.isShowFundingPanel&&(this.isShowFundingPanel=!1)},setPrice:function(e){var t=this;this.price=+e,this.privatePost&&(this.paidMediaWithoutAudio=this.uploadedFilesWithoutAudio.map((function(e){return e.orderId})),this.$nextTick((function(){t.scrollPreviewsThrottled()}))),this.showPoll&&(this.pollLocked=this.privatePost),this.audioLocked=this.privatePost},setTarget:function(e){this.fundraisingTarget=+e,this.showFundraisingHandler(!!+e)},saveDraft:function(){if(!this.isChat){this.resetDraft();var e=this.uploadedFiles.filter((function(e){return 100===e.progress}));(e.length||this.text||this.showPoll||this.showFundraising)&&this.setDraft(JSON.stringify(Ee(Ee({},this.$data),{},{uploadedFiles:e,isShowRecordPanel:!1,isShowPostPricePanel:!1,isShowFundingPanel:!1})))}},loadDraft:function(){var e=JSON.parse(this.getDraft);for(var t in e)this[t]=e[t]},clearDraft:function(){this.resetToDefault(),this.resetDraft()},setSaveForLater:function(){this.saveForLater=!0},checkPreviewRatio:function(){var e=this.uploadedFilesPhoto[0],t=e.width,s=e.height;return this.uploadedFilesPhoto.some((function(e,i){return!!(i&&e.width&&e.height&&t&&s)&&(e.width/e.height).toFixed(2)!==(t/s).toFixed(2)}))},enableDraggablePreviews:function(){var e=this;this.isDraggingPreviews=!0,this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},setPreviewOrder:function(e){var t=this.previewsOrder.indexOf(e);t>-1?this.previewsOrder.splice(t,1):this.previewsOrder.push(e)},getPreviewOrder:function(e){var t=this.previewsOrder.indexOf(e);return t>-1?t+1:""},sortByNumber:function(e){var t=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.sort((function(e,i){var r=t.previewsOrder.indexOf(e.orderId),a=t.previewsOrder.indexOf(i.orderId);return r<0&&a<0?0:r<0?s?1:-1:a<0?s?-1:1:r-a})),this.previewsOrder=[]},movePreviewsToBeginning:function(){var e=this;this.privatePost?(this.previewsOrder.length?(this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})),this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})).concat(this.previewsOrder),this.$nextTick((function(){e.sortByNumber(e.freeFilesWithoutAudioList,!0)}))):this.paidMediaWithoutAudio.length&&(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.concat(this.paidMediaWithoutAudio),this.paidMediaWithoutAudio=[]),this.$nextTick((function(){e.scrollPreviewsThrottled()}))):this.previewsOrder.length&&this.sortByNumber(this.uploadedFilesWithoutAudioList,!0)},movePreviewsToEnd:function(){var e=this;this.privatePost?(this.previewsOrder.length?(this.freeMediaWithoutAudio=this.freeMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})),this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.filter((function(t){return e.previewsOrder.indexOf(t)<0})).concat(this.previewsOrder),this.$nextTick((function(){e.sortByNumber(e.uploadedFilesWithoutAudioList,!0)}))):this.freeMediaWithoutAudio.length&&(this.paidMediaWithoutAudio=this.paidMediaWithoutAudio.concat(this.freeMediaWithoutAudio),this.freeMediaWithoutAudio=[]),this.$nextTick((function(){e.scrollPreviewsThrottled()}))):this.previewsOrder.length&&this.sortByNumber(this.uploadedFilesWithoutAudioList)},savePreviewsOrder:function(){var e=this;this.previewsOrder.length&&this.movePreviewsToBeginning(),this.uploadedFiles=this.freeFilesWithoutAudioList.concat(this.uploadedFilesWithoutAudioList,this.uploadedFilesAudio),this.isDraggingPreviews=!1,this.previewsOrder=[],this.privatePost&&this.$nextTick((function(){e.scrollPreviewsThrottled()}))},onPreviewMoveFree:function(e){var t=this.$refs["draggable-container-free"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().left-this.$refs.scrollbarFree.$el.getBoundingClientRect().left,s=this.$refs.scrollbarFree.$el.getBoundingClientRect().right-this.$refs["draggable-container-free"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().right;t<0?this.$refs.scrollbarFree.$swiper.translateTo(this.$refs.scrollbarFree.$swiper.getTranslate()-t+20,500):s<0&&this.$refs.scrollbarFree.$swiper.translateTo(this.$refs.scrollbarFree.$swiper.getTranslate()+s-20,500)},onPreviewMovePaid:function(e){var t=this.$refs["draggable-container-paid"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().left-this.$refs.scrollbarPaid.$el.getBoundingClientRect().left,s=this.$refs.scrollbarPaid.$el.getBoundingClientRect().right-this.$refs["draggable-container-paid"].$el.querySelectorAll(".b-make-post__preview")[e.draggedContext.futureIndex].getBoundingClientRect().right;t<0?this.$refs.scrollbarPaid.$swiper.translateTo(this.$refs.scrollbarPaid.$swiper.getTranslate()-t+20,500):s<0&&this.$refs.scrollbarPaid.$swiper.translateTo(this.$refs.scrollbarPaid.$swiper.getTranslate()+s-20,500)},scrollPreviewsThrottled:function(){var e=this;setTimeout((function(){if(e.mediaCentered=!1,e.freeMediaActive=!1,e.paidMediaActive=!1,e.paidMediaAudio=!1,e.freeMediaAudio=!1,e.paidMediaText=!1,e.freeMediaText=!1,e.privatePost)try{var t=e.$refs.makePost.offsetWidth,s=e.showPoll?e.pollLocked?48:t-48:e.$refs.paidContentLabel.offsetLeft;if(e.uploadedFilesWithoutAudio.length){var i=e.isMobileDevice?e.$refs.scrollbarPaid:e.$refs.scrollbarPaid.$el,r=i.offsetLeft-e.$refs.postMedia.scrollLeft;Math.abs(s-r)<6?e.mediaCentered=!0:s<r?e.freeMediaActive=!0:e.paidMediaActive=!0,e.uploadedFilesAudio.length?e.audioLocked&&r<54?e.paidMediaAudio=!0:!e.audioLocked&&r>t-54&&(e.freeMediaAudio=!0):e.lockDescription&&r<54?e.paidMediaText=!0:!e.lockDescription&&r>t-54&&(e.freeMediaText=!0)}}catch(a){}}),100)},scrollPreviews:l()((function(){this.scrollPreviewsThrottled()}),250),getThumb:function(e){var t=h()(e,"thumbs",[]),s=e.thumbId;!s&&t.length&&(s=t[0].id);var i=t.find((function(e){return e.id===s})),r=i?i.url:"";return r||("photo"===e.mediaType||"gif"===e.mediaType||"video"===e.mediaType&&e.processId?e.url:void 0)},showMoreBtnClick:function(){this.fakeMode?this.openNewPostPage():this.showMoreBtn=!1},openPreview:function(e){var t=this;this.galleryMedia=e,this.$nextTick((function(){t.isOpen=!0}))},hidePhotoSwipe:function(){this.isOpen=!1},togglePollLocked:function(){var e=this;this.pollLocked=!this.pollLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},toggleFundraisingLocked:function(){var e=this;this.fundraisingLocked=!this.fundraisingLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},toggleAudioLocked:function(){var e=this;this.audioLocked=!this.audioLocked,this.$nextTick((function(){e.scrollPreviewsThrottled()}))},handleBeforeUnloadPost:function(e){if(this.hasBeforeunloadPostEvent){var t=this.checkLeaveTextPost;return e=e||window.event,e&&(e.returnValue=t),t}},getFundrisingOptionError:function(e){var t=this;return""!==this.fundraisingOptions[e]?this.fundraisingOptions[e]>this.fundraisingPresetMax?this.$i18n.t("message.max_price_label",{MAX:this.fundraisingPresetMax}):this.fundraisingOptions[e]<this.authUser.tipsMin?this.$i18n.t("message.min_price_label",{MIN:this.authUser.tipsMin}):void 0!==this.fundraisingOptions.find((function(s,i){return i<e&&Number(s)===Number(t.fundraisingOptions[e])}))?this.$i18n.t("message.option_exists"):"":""},removeListeners:function(){window.removeEventListener("beforeunload",this.handleBeforeUnloadPost)},submitMessage:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,s,i,r,a,n,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.disabledSubmit){e.next=2;break}return e.abrupt("return");case 2:if(this.authUser.canChat){e.next=4;break}return e.abrupt("return");case 4:if(this.isSubmitting=!0,this.$emit("canSave",!0),!this.tipValue){e.next=23;break}return window.doTips=function(){},e.next=10,this.makePayments({paymentType:"tip",amount:this.tipValue,text:this.text,userId:this.$route.params.chatId,tipSource:"chat"},this.submitMessage);case 10:if(t=e.sent,!t||!t.success){e.next=22;break}return e.prev=12,e.next=15,this.fetchChatsMessages({userId:this.$route.params.chatId,lastId:this.chat.messages[this.chat.messages.length-1],more:!0,before:!1});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](12),Sentry.captureException(e.t0);case 20:this.resetToDefault(),this.isSubmitting=!1;case 22:return e.abrupt("return");case 23:if(s={},s.text=this.text,s.lockedText=this.lockDescription,this.uploadedFilesUrl.length>0&&(s.mediaFiles=this.uploadedFilesUrl),this.price&&(s.price=this.price),this.scheduleDate&&(s.isScheduled=1,s.scheduledDate=this.scheduleDate),s.previews=[],this.freeFilesWithoutAudioList&&(s.previews=this.freeFilesWithoutAudioList.map((function(e){return e.processId||e.id}))),!this.audioLocked&&this.uploadedFilesAudio.length&&s.previews.push(this.uploadedFilesAudio[0].processId||this.uploadedFilesAudio[0].id),this.defaultPollExpired>0&&(s.expireDays=this.defaultPollExpired),this.showPoll&&this.votingOptions.length&&(s.votingOptions=this.votingOptions,this.defaultVotingDuration>0&&(s.votingDue=this.defaultVotingDuration),this.pollLocked||s.previews.push("poll")),!this.isTemplate){e.next=47;break}return e.prev=35,e.next=38,this.saveAutoMessage(s);case 38:e.next=45;break;case 40:return e.prev=40,e.t1=e["catch"](35),alert(e.t1),this.isSubmitting=!1,e.abrupt("return");case 45:return this.resetToDefault(),e.abrupt("return");case 47:if(1!==this.userIds.length&&!this.userIdToSend||this.scheduleDate){e.next=62;break}if(i=this.userIdToSend||this.userIds[0],!i){e.next=60;break}return e.next=52,this.sendMessage({id:i,data:s});case 52:if(r=e.sent,void 0!==this.alreadyConfirmLeave&&(this.alreadyConfirmLeave=!0),!r){e.next=58;break}this.$router.replace({name:"Chats",params:{chatId:i}}),e.next=60;break;case 58:return this.isSubmitting=!1,e.abrupt("return");case 60:e.next=125;break;case 62:if(this.userIds.length||this.getListsUsersCount||this.specificBulkMessage){e.next=96;break}if(a=this.$route.params.chatId,n=!!h()(this.$route,"query"),!this.scheduleDate){e.next=85;break}if(s.userIds=a,n&&this.getFilterData(s),this.setQueueMessagesLoading(!0),e.prev=69,!this.isEditScheduleMessages){e.next=75;break}return e.next=73,Object(Te["v"])(s,this.idScheduledMsg);case 73:e.next=77;break;case 75:return e.next=77,Object(Te["x"])(s);case 77:e.next=84;break;case 79:return e.prev=79,e.t2=e["catch"](69),Object(De["b"])(e.t2),this.isSubmitting=!1,e.abrupt("return");case 84:this.setQueueMessagesLoading(!1);case 85:if(!a||this.scheduleDate){e.next=94;break}return this.resetToDefault(),this.$emit("canSave",!0),e.next=90,this.sendMessage({id:a,data:s});case 90:if(o=e.sent,o){e.next=94;break}return this.isSubmitting=!1,e.abrupt("return");case 94:e.next=125;break;case 96:if(!(this.userIds.length>1||this.getListsUsersCount||this.specificBulkMessage||this.scheduleDate)){e.next=124;break}if(this.userIds.length>1?s.userIds=this.userIds:this.getListsUsersCount?(c=this.listIds.indexOf("recent"),c>-1&&(s.userIds="last24h",this.listIds.splice(c,1)),this.listIds.length&&(s.userLists=this.listIds),this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.fundRaisingPostId?(s.fundRaisingPostId=this.fundRaisingPostId,this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.awards.length?(s.awards=this.awards.join("/"),this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.sendToQueue?(s.queueBuyers=[this.sendToQueue],this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.postDonators?(s.postDonators=this.postDonators,this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.postBuyers?(s.postBuyers=this.postBuyers,this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.postVoters?(s.postVoters=this.postVoters,this.excludedUserIds.length&&(s.excludeUserIds=this.excludedUserIds)):this.userIds.length&&this.scheduleDate&&(s.userIds=this.userIds),this.setQueueMessagesLoading(!0),u=!!h()(this.$route,"query"),u&&this.getFilterData(s),e.prev=101,!this.isEditScheduleMessages){e.next=108;break}return e.next=105,Object(Te["v"])(s,this.idScheduledMsg);case 105:l=e.sent,e.next=111;break;case 108:return e.next=110,Object(Te["x"])(s);case 110:l=e.sent;case 111:e.next=118;break;case 113:return e.prev=113,e.t3=e["catch"](101),Object(De["b"])(e.t3),this.isSubmitting=!1,e.abrupt("return");case 118:this.setQueueMessagesLoading(!1),void 0!==this.alreadyConfirmLeave&&(this.alreadyConfirmLeave=!0),l&&void 0!==l.pending&&!this.scheduleDate&&this.$router.replace({name:"Chats"}),l&&void 0!==l.pending&&this.scheduleDate&&this.$router.replace({name:"ScheduleMessage"}),e.next=125;break;case 124:alert(this.$i18n.t("message.please_select_the_recipient"));case 125:this.isSubmitting=!1,this.resetToDefault();case 127:case"end":return e.stop()}}),e,this,[[12,17],[35,40],[69,79],[101,113]])})));function t(){return e.apply(this,arguments)}return t}(),goToValue:function(){this.$router.push({name:"MediaVault",params:{fromPostForm:!0}})},toggleTipPanel:function(){this.$refs.tipPanel.toggleTipPanel()},doSetTip:function(e){this.uploadedFiles.push({mediaType:"tip",value:e}),this.tipValue=e,this.toggleTipPanel()},onDeleteTip:function(e){this.uploadedFiles.splice(e,1),this.tipValue=""},clearTipValue:function(){this.tipValue=""},isHideHeader:function(){document.documentElement.classList.add("p-personal-chats-chat")},makeSubmitMessage:function(){(!this.isTemplate||_()(this.template))&&this.getSelectedUsersIds>1&&"ChatsSend"===this.$route.name?this.isShowModalConfirmSendMessage=!0:this.submitMessage()},makeSubmitMessageEnter:function(){"ChatsSend"!==this.$route.name&&"Chat"!==this.$route.name||this.makeSubmitMessage()},setDataSchedule:function(e){var t=this;this.text=this.getTextEncode(e),this.price=e.price||"",this.scheduleDate=e.scheduledAt||"",this.lockDescription=e.lockedText,this.unlockedMedia=null!==e.previews&&void 0!==e.previews?void 0!==e.previews.length?e.previews:[e.previews]:[],this.freeMediaWithoutAudio=this.unlockedMedia.filter((function(e){return t.uploadedFilesWithoutAudio.findIndex((function(t){return t.id===e}))>-1}))},setDataFromStore:function(){this.text=this.getTextEncode(this.template),this.price=this.template.price,this.lockDescription=this.template.lockedText},getFilterData:function(e){var t=this.$route.query,s=t.total_spent,i=t.tips,r=t.duration,a=t.inactive,n=t.recommenders,o=t.signed_up_before,c=t.signed_up_after,l=t.scheduledSubscribedOn;return i&&(e["filter[".concat("tips","]")]=i),s&&(e["filter[".concat("total_spent","]")]=s),r&&(e["filter[".concat("duration","]")]=r),a&&(e["filter[".concat("inactive","]")]=a),n&&(e["filter[".concat("recommenders","]")]=n),o&&(e["filter[".concat("signed_up_before","]")]=o),c&&(e["filter[".concat("signed_up_after","]")]=c),l&&(e.scheduledSubscribedOn=l),e},getTextEncode:function(e){if(void 0!==e.rawText){if(e.rawText.trim().length)return Object(W["c"])(e.rawText)}else if(e.text.trim().length)return Object(W["c"])(e.text);return""}})},Ae=Me,Fe=Object(E["a"])(Ae,i,r,!1,null,null,null);t["a"]=Fe.exports},f629:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.authUser.canEarn?s("div",{staticClass:"b-chat__panel"},[s("div",{staticClass:"container"},[s("span",{staticClass:"b-chat__panel__title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-price",attrs:{"extra-class":"b-chat__panel__icon"}}),e._v(" "+e._s(e.title||e.$t("message.post_set_price_title"))+" ")]),s("div",{staticClass:"b-chat__panel__input-wrapper",class:{"m-filled":e.price>0}},[s("div",{staticClass:"b-settings__form credits-form-field"},[s("InputOF",{ref:"priceInput",staticClass:"form-control b-chat__panel__input",attrs:{id:"priceInput",type:"price",min:e.authUser.postMinPrice,max:e.authUser.postMaxPrice,step:.01,placeholder:this.$i18n.t("message.post_message_price_field_placeholder")},on:{focus:e.focus,blur:e.blur},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}},[s("template",{slot:"beforeInput"},[s("span",{staticClass:"currency-sign"},[e._v("$")])])],2)],1),s("label",{staticClass:"g-input__clear-btn b-chat__panel__input-clear-btn",attrs:{for:e.focused?"priceInput":""},on:{click:e.clearMessagePrice}},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-close"})])]),e.messagePriceError?s("div",{staticClass:"b-chat__panel__error"},[e._v(" "+e._s(e.messagePriceError)+" ")]):e._e(),s("div",{staticClass:"b-chat__panel-btns"},[s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button"},on:{click:e.togglePricePanel}},[e._v(" "+e._s(e.$t("message.cancel_button"))+" ")]),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.messagePriceSetDisabled},on:{click:e.setNewPrice}},[e._v(" "+e._s(e.$t("message.save_button"))+" ")])])])]):e._e()},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),n=(s("c5f6"),s("d634")),o=s("13ca");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){Object(a["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var u={components:{InputOF:o["a"]},props:{defaultPrice:{type:[Number,String],default:0},togglePricePanel:{type:Function,required:!0},setPrice:{type:Function,required:!0},isShown:{type:Boolean,required:!0},title:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:0}},data:function(){return{price:"",focused:!1,focusTimeout:null}},computed:l(l({},Object(n["b"])(["authUser"])),{},{minPrice:function(){return this.min||this.authUser.postMinPrice},maxPrice:function(){return this.max||this.authUser.postMaxPrice},messagePriceError:function(){if(this.price){if(this.price<this.minPrice)return"Minimum $".concat(this.minPrice," USD");if(this.price>this.maxPrice)return"Maximum $".concat(this.maxPrice," USD")}return""},messagePriceSetDisabled:function(){return!(!this.price||!(this.price<this.minPrice||this.price>this.maxPrice))}}),watch:{defaultPrice:function(){this.price=this.defaultPrice},isShown:{handler:function(e,t){var s=this;!t&&e&&this.$nextTick((function(){s.$refs.priceInput&&s.$refs.priceInput.$el.getElementsByTagName("input")[0].focus()}))},immediate:!0}},mounted:function(){this.defaultPrice&&(this.price=this.defaultPrice)},methods:{clearMessagePrice:function(){this.price=""},setNewPrice:function(){this.setPrice(this.price),this.togglePricePanel()},focus:function(){clearTimeout(this.focusTimeout),this.focused=!0},blur:function(){var e=this;this.focusTimeout=setTimeout((function(){e.focused=!1}),150)}}},d=u,p=s("2877"),h=Object(p["a"])(d,i,r,!1,null,null,null);t["a"]=h.exports},fa5d:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-modal",{attrs:{"modal-class":"m-security-check",centered:""},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[s("template",{slot:"modal-header"},[s("h4",{staticClass:"modal-title"},[s("svg",{directives:[{name:"svg-sprite",rawName:"v-svg-sprite"}],staticClass:"icon-alert"}),e._v(" "+e._s(e.$t("message.trust_modal_title"))+" ")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"b-trust__input form-control",attrs:{type:"text",name:"code",placeholder:e.$t("message.trust_code_input_title"),autocomplete:"off"},domProps:{value:e.code},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmCode(t)},input:function(t){t.target.composing||(e.code=t.target.value)}}}),s("p",{staticClass:"input-help text-center"},[e._v(" "+e._s(e.inputHelper)+" ")]),s("template",{staticClass:"m-align-center",slot:"modal-footer"},[e.isHasEmail?s("button",{staticClass:"g-btn m-rounded m-border",attrs:{type:"button",disabled:e.sendCodeDisabled||e.disabledSubmit},on:{click:e.sendCode}},[e._v(" "+e._s(e.$t("message.trust_code_send_email_title"))+" ")]):e._e(),s("button",{staticClass:"g-btn m-rounded",attrs:{type:"button",disabled:e.submitDisabled||e.disabledSubmit},on:{click:e.confirmCode}},[e._v(" Confirm ")])])],2)},r=[],a=(s("8e6e"),s("ac6a"),s("456d"),s("96cf"),s("3b8d")),n=s("bd86"),o=s("09e4"),c=s("d634"),l=s("2612");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var p={name:"ModalSecurityCheck",props:{value:{type:Boolean,required:!0}},data:function(){return{code:"",sendCodeDisabled:!1,disabledSubmit:!1}},computed:d(d({},Object(c["b"])(["authUser"])),{},{show:{get:function(){return this.value},set:function(e){this.code="",this.$emit("input",e)}},isHasEmail:function(){return this.authUser.email&&this.authUser.email.length>0},inputHelper:function(){return this.isHasEmail&&this.authUser.isOtpEnabled?"Please request a verification code via email or enter it from Google Authenticator app":this.isHasEmail?"Please request a verification code via email":this.authUser.isOtpEnabled?"Please use Google Authenticator app to enter a verification code":""},submitDisabled:function(){return!this.code.length}}),methods:{sendCode:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSubmit=!0,e.prev=1,e.next=4,Object(l["jb"])();case 4:t=e.sent,t&&t.success&&(alert("Please check your email"),this.sendCodeDisabled=!0),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:this.disabledSubmit=!1;case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),confirmCode:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.disabledSubmit=!0,e.prev=1,e.next=4,Object(l["ib"])(this.code);case 4:this.$emit("confirm"),this.show=!1,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),Object(o["b"])(e.t0);case 11:this.disabledSubmit=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()}},h=p,m=s("2877"),f=Object(m["a"])(h,i,r,!1,null,null,null);t["a"]=f.exports}}]);
//# sourceMappingURL=settings.js.map?rev=202008311040-5a7dcf7da1